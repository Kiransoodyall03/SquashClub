/*! For license information please see main.563ac49f.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,f(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,N=Object.prototype.hasOwnProperty,k={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,a={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,s)&&!j.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+C(l,0):a,x(i)?(s="",null!=e&&(s=e.replace(T,"$&/")+"/"),_(i,t,s,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var u=a+C(o=e[c],c);l+=_(o,t,s,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=_(o=o.value,t,s,u=a+C(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return _(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},R={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!j.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<s&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!f)if(null!==r(c))f=!0,R(N);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function N(e,n){f=!1,g&&(g=!1,y(S),S=-1),m=!0;var a=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!_());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),w(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,p=a,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,j=!1,E=null,S=-1,T=5,C=-1;function _(){return!(t.unstable_now()-C<T)}function I(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?k():(j=!1,E=null)}}else j=!1}if("function"===typeof b)k=function(){b(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=I,k=function(){A.postMessage(null)}}else k=function(){v(I,0)};function R(e){E=e,j||(j=!0,k())}function D(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,D(x,a-i))):(e.sortIndex=o,n(c,e),f||m||(f=!0,R(N))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(m,e)||!d.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case N:return"Portal";case E:return"Profiler";case j:return"StrictMode";case _:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(bi){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ae(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,ke=null,je=null;function Ee(e){if(e=bs(e)){if("function"!==typeof Ne)throw Error(a(280));var t=e.stateNode;t&&(t=xs(t),Ne(e.stateNode,e.type,t))}}function Se(e){ke?je?je.push(e):je=[e]:ke=e}function Te(){if(ke){var e=ke,t=je;if(je=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function _e(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ce(e,t,n)}finally{Ie=!1,(null!==ke||null!==je)&&(_e(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Oe(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,s,a,i,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qe(s),e;if(i===r)return qe(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),null!==e?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Xe=s.unstable_requestPaint,$e=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=dt(o):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~s)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Nt,kt,jt,Et,St=!1,Tt=[],Ct=null,_t=null,It=null,Pt=new Map,At=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=ys(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==_t&&Ut(_t)&&(_t=null),null!==It&&Ut(It)&&(It=null),Pt.forEach(Ft),At.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==_t&&zt(_t,e),null!==It&&zt(It,e),Pt.forEach(t),At.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Wt=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var s=bt,a=Wt.transition;Wt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=s,Wt.transition=a}}function Gt(e,t,n,r){var s=bt,a=Wt.transition;Wt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=s,Wt.transition=a}}function Kt(e,t,n,r){if(qt){var s=Yt(e,t,n,r);if(null===s)qr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,s),!0;case"dragenter":return _t=Lt(_t,e,t,n,r,s),!0;case"mouseover":return It=Lt(It,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,At.set(a,Lt(At.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==s;){var a=bs(s);if(null!==a&&xt(a),null===(a=Yt(e,t,n,r))&&qr(e,t,r,Qt,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=ys(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in $t?$t.value:$t.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),pn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),fn=sn(M({},pn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return jn}var Sn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Sn),Cn=sn(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),In=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Pn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Dn||On&&8<On&&11>=On),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Ur(e,0)}function Yn(e){if(K(ws(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,xe(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=ur(n,a);var i=ur(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},kr={},jr={};function Er(e){if(kr[e])return kr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return kr[e]=n[t];return e}u&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),_r=Er("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Ir.set(e,t),l(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Sr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Cr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Mr(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Mr(s,o,c),a=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var s=Ht;break;case 4:s=Gt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=ys(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=a,s=xe(n),i=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Sr:case Tr:case Cr:l=vn;break;case _r:l=In;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Ae(m,h))&&u.push(Hr(m,f,p)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:ws(l),p=null==c?o:ws(c),(o=new u(f,m+"leave",l,n,s)).target=d,o.relatedTarget=p,f=null,ys(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,m=0,p=u=l;p;p=Kr(p))m++;for(p=0,f=h;f;f=Kr(f))p++;for(;0<m-p;)u=Kr(u),m--;for(;0<p-m;)h=Kr(h),p--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Qr(i,o,l,u,!1),null!==c&&null!==d&&Qr(i,d,c,u,!0)}if("select"===(l=(o=r?ws(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(qn(o))if($n)g=ir;else{g=sr;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(i,g,n,s):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?ws(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,s);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":wr(i,n,s)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Jt="value"in($t=s)?$t.value:$t.textContent,Bn=!0)),0<(v=Gr(r,b)).length&&(b=new wn(b,e,null,n,s),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=y))}Ur(i,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Ae(e,n))&&r.unshift(Hr(e,a,s)),null!=(a=Ae(e,t))&&r.push(Hr(e,a,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ae(n,a))&&i.unshift(Hr(n,l,o)):s||null!=(l=Ae(n,a))&&i.push(Hr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,ps="__reactProps$"+ds,ms="__reactContainer$"+ds,fs="__reactEvents$"+ds,gs="__reactListeners$"+ds,vs="__reactHandles$"+ds;function ys(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xs(e){return e[ps]||null}var Ns=[],ks=-1;function js(e){return{current:e}}function Es(e){0>ks||(e.current=Ns[ks],Ns[ks]=null,ks--)}function Ss(e,t){ks++,Ns[ks]=e.current,e.current=t}var Ts={},Cs=js(Ts),_s=js(!1),Is=Ts;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function As(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rs(){Es(_s),Es(Cs)}function Ds(e,t,n){if(Cs.current!==Ts)throw Error(a(168));Ss(Cs,t),Ss(_s,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(a(108,W(e)||"Unknown",s));return M({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,Is=Cs.current,Ss(Cs,e),Ss(_s,_s.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Os(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Es(_s),Es(Cs),Ss(Cs,e)):Es(_s),Ss(_s,n)}var Us=null,Fs=!1,Vs=!1;function zs(e){null===Us?Us=[e]:Us.push(e)}function Bs(){if(!Vs&&null!==Us){Vs=!0;var e=0,t=bt;try{var n=Us;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Us=null,Fs=!1}catch(s){throw null!==Us&&(Us=Us.slice(e+1)),Ke(Ze,Bs),s}finally{bt=t,Vs=!1}}return null}var Ws=[],qs=0,Hs=null,Gs=0,Ks=[],Qs=0,Ys=null,Xs=1,$s="";function Js(e,t){Ws[qs++]=Gs,Ws[qs++]=Hs,Hs=e,Gs=t}function Zs(e,t,n){Ks[Qs++]=Xs,Ks[Qs++]=$s,Ks[Qs++]=Ys,Ys=e;var r=Xs;e=$s;var s=32-it(r)-1;r&=~(1<<s),n+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Xs=1<<32-it(t)+s|n<<s|r,$s=a+e}else Xs=1<<a|n<<s|r,$s=e}function ea(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ta(e){for(;e===Hs;)Hs=Ws[--qs],Ws[qs]=null,Gs=Ws[--qs],Ws[qs]=null;for(;e===Ys;)Ys=Ks[--Qs],Ks[Qs]=null,$s=Ks[--Qs],Ks[Qs]=null,Xs=Ks[--Qs],Ks[Qs]=null}var na=null,ra=null,sa=!1,aa=null;function ia(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Xs,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cs(n.nextSibling);var r=na;t&&oa(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,sa=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!sa)return ua(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?cs(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=cs(e.nextSibling)}function pa(){ra=na=null,sa=!1}function ma(e){null===aa?aa=[e]:aa.push(e)}var fa=w.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&ya(a)===t.type)?((r=s(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case N:return(t=Fc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Lc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case A:return p(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);va(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case A:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);va(t,r)}return null}function f(s,a,o,l){for(var c=null,u=null,d=a,f=a=0,g=null;null!==d&&f<o.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var v=p(s,d,o[f],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(s,d),a=i(v,a,f),null===u?c=v:u.sibling=v,u=v,d=g}if(f===o.length)return n(s,d),sa&&Js(s,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(s,o[f],l))&&(a=i(d,a,f),null===u?c=d:u.sibling=d,u=d);return sa&&Js(s,f),c}for(d=r(s,d);f<o.length;f++)null!==(g=m(d,s,f,o[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),a=i(g,a,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),sa&&Js(s,f),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,f=o,g=o=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=p(s,f,y.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(s,f),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,f=v}if(y.done)return n(s,f),sa&&Js(s,g),u;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return sa&&Js(s,g),u}for(f=r(s,f);!y.done;g++,y=l.next())null!==(y=m(f,s,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(s,e)}),sa&&Js(s,g),u}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=a;null!==u;){if(u.key===c){if((c=i.type)===k){if(7===u.tag){n(r,u.sibling),(a=s(u,i.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&ya(c)===u.type){n(r,u.sibling),(a=s(u,i.props)).ref=ga(r,u,i),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===k?((a=Lc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Oc(i.type,i.key,i.props,null,r.mode,l)).ref=ga(r,a,i),l.return=r,r=l)}return o(r);case N:e:{for(u=i.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=s(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(i,r.mode,l)).return=r,r=a}return o(r);case A:return e(r,a,(u=i._init)(i._payload),l)}if(te(i))return f(r,a,i,l);if(O(i))return g(r,a,i,l);va(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=s(a,i)).return=r,r=a):(n(r,a),(a=Uc(i,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var wa=ba(!0),xa=ba(!1),Na=js(null),ka=null,ja=null,Ea=null;function Sa(){Ea=ja=ka=null}function Ta(e){var t=Na.current;Es(Na),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){ka=e,Ea=ja=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(Ea!==e)if(e={context:e,memoizedValue:t,next:null},null===ja){if(null===ka)throw Error(a(308));ja=e,ka.dependencies={lanes:0,firstContext:e}}else ja=ja.next=e;return t}var Pa=null;function Aa(e){null===Pa?Pa=[e]:Pa.push(e)}function Ra(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Aa(t)):(n.next=s.next,s.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Da(e,n)}return null===(s=r.interleaved)?(t.next=t,Aa(r)):(t.next=s.next,s.next=t),r.interleaved=t,Da(e,n)}function Va(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function za(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,r){var s=e.updateQueue;Oa=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=s.baseState;for(i=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Oa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ml|=i,e.lanes=i,e.memoizedState=d}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(a(191,s));s.call(r)}}}var qa={},Ha=js(qa),Ga=js(qa),Ka=js(qa);function Qa(e){if(e===qa)throw Error(a(174));return e}function Ya(e,t){switch(Ss(Ka,t),Ss(Ga,e),Ss(Ha,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Es(Ha),Ss(Ha,t)}function Xa(){Es(Ha),Es(Ga),Es(Ka)}function $a(e){Qa(Ka.current);var t=Qa(Ha.current),n=le(t,e.type);t!==n&&(Ss(Ga,e),Ss(Ha,n))}function Ja(e){Ga.current===e&&(Es(Ha),Es(Ga))}var Za=js(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=w.ReactCurrentDispatcher,si=w.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,hi=0;function pi(){throw Error(a(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fi(e,t,n,r,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:eo,e=n(r,s),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=to,e=n(r,s)}while(ui)}if(ri.current=Ji,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function gi(){var e=0!==di;return di=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function wi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=yi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=oi,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ai&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Ml|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ni(e){var t=yi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);or(i,t.memoizedState)||(wo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ki(){}function ji(e,t){var n=ii,r=yi(),s=t(),i=!or(r.memoizedState,s);if(i&&(r.memoizedState=s,wo=!0),r=r.queue,Li(Ti.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Pi(9,Si.bind(null,n,r,s,t),void 0,null),null===Il)throw Error(a(349));0!==(30&ai)||Ei(n,t,s)}return s}function Ei(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,r){t.value=n,t.getSnapshot=r,Ci(t)&&_i(e)}function Ti(e,t,n){return n(function(){Ci(t)&&_i(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function _i(e){var t=Da(e,1);null!==t&&rc(t,e,1,-1)}function Ii(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Qi.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ai(){return yi().memoizedState}function Ri(e,t,n,r){var s=vi();ii.flags|=e,s.memoizedState=Pi(1|t,n,void 0,void 0===r?null:r)}function Di(e,t,n,r){var s=yi();r=void 0===r?null:r;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==r&&mi(r,i.deps))return void(s.memoizedState=Pi(t,n,a,r))}ii.flags|=e,s.memoizedState=Pi(1|t,n,a,r)}function Oi(e,t){return Ri(8390656,8,e,t)}function Li(e,t){return Di(2048,8,e,t)}function Mi(e,t){return Di(4,2,e,t)}function Ui(e,t){return Di(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4,4,Fi.bind(null,t,e),n)}function zi(){}function Bi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qi(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),ii.lanes|=n,Ml|=n,e.baseState=!0),t)}function Hi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{bt=n,si.transition=r}}function Gi(){return yi().memoizedState}function Ki(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yi(e))Xi(t,n);else if(null!==(n=Ra(e,t,n,r))){rc(n,e,r,tc()),$i(n,t,r)}}function Qi(e,t,n){var r=nc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Xi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(s.next=s,Aa(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ra(e,t,s,r))&&(rc(n,e,r,s=tc()),$i(n,t,r))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $i(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ji={readContext:Ia,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:Ia,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ri(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Ii,useDebugValue:zi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Hi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,s=vi();if(sa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Il)throw Error(a(349));0!==(30&ai)||Ei(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Oi(Ti.bind(null,r,i,e),[e]),r.flags|=2048,Pi(9,Si.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=vi(),t=Il.identifierPrefix;if(sa){var n=$s;t=":"+t+"R"+(n=(Xs&~(1<<32-it(Xs)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ia,useCallback:Bi,useContext:Ia,useEffect:Li,useImperativeHandle:Vi,useInsertionEffect:Mi,useLayoutEffect:Ui,useMemo:Wi,useReducer:xi,useRef:Ai,useState:function(){return xi(wi)},useDebugValue:zi,useDeferredValue:function(e){return qi(yi(),oi.memoizedState,e)},useTransition:function(){return[xi(wi)[0],yi().memoizedState]},useMutableSource:ki,useSyncExternalStore:ji,useId:Gi,unstable_isNewReconciler:!1},to={readContext:Ia,useCallback:Bi,useContext:Ia,useEffect:Li,useImperativeHandle:Vi,useInsertionEffect:Mi,useLayoutEffect:Ui,useMemo:Wi,useReducer:Ni,useRef:Ai,useState:function(){return Ni(wi)},useDebugValue:zi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:qi(t,oi.memoizedState,e)},useTransition:function(){return[Ni(wi)[0],yi().memoizedState]},useMutableSource:ki,useSyncExternalStore:ji,useId:Gi,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),a=Ua(r,s);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,s))&&(rc(t,e,s,r),Va(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),a=Ua(r,s);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,s))&&(rc(t,e,s,r),Va(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),s=Ua(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Fa(e,s,r))&&(rc(t,e,r,n),Va(t,e,r))}};function ao(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,a))}function io(e,t,n){var r=!1,s=Ts,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(s=As(t)?Is:Cs.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ps(e,s):Ts),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Ia(a):(a=As(t)?Is:Cs.current,s.context=Ps(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ro(e,t,a,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),Ba(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var po="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Ua(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),ho(0,t)},n}function fo(e,t,n){(n=Ua(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ho(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ua(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var bo=w.ReactCurrentOwner,wo=!1;function xo(e,t,n,r){t.child=null===e?xa(t,null,n,r):wa(t,e.child,n,r)}function No(e,t,n,r,s){n=n.render;var a=t.ref;return _a(t,s),r=fi(e,t,n,r,a,s),n=gi(),null===e||wo?(sa&&n&&ea(t),t.flags|=1,xo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function ko(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,jo(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(wo=!0)}}return To(e,t,n,r,s)}function Eo(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ss(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ss(Dl,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ss(Dl,Rl),Rl|=r;return xo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,s){var a=As(n)?Is:Cs.current;return a=Ps(t,a),_a(t,s),n=fi(e,t,n,r,a,s),r=gi(),null===e||wo?(sa&&r&&ea(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function Co(e,t,n,r,s){if(As(n)){var a=!0;Ls(t)}else a=!1;if(_a(t,s),null===t.stateNode)qo(e,t),io(t,n,r),lo(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Ps(t,c=As(n)?Is:Cs.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,i,r,c),Oa=!1;var h=t.memoizedState;i.state=h,Ba(t,r,i,s),l=t.memoizedState,o!==r||h!==l||_s.current||Oa?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Oa||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ma(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ia(l):l=Ps(t,l=As(n)?Is:Cs.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,i,r,l),Oa=!1,h=t.memoizedState,i.state=h,Ba(t,r,i,s);var m=t.memoizedState;o!==d||h!==m||_s.current||Oa?("function"===typeof p&&(ro(t,n,p,r),m=t.memoizedState),(c=Oa||ao(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _o(e,t,n,r,a,s)}function _o(e,t,n,r,s,a){So(e,t);var i=0!==(128&t.flags);if(!r&&!i)return s&&Ms(t,n,!1),Ho(e,t,a);r=t.stateNode,bo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,o,a)):xo(e,t,o,a),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),Ya(e,t.containerInfo)}function Po(e,t,n,r,s){return pa(),ma(s),t.flags|=256,xo(e,t,n,r),t.child}var Ao,Ro,Do,Oo,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,s=t.pendingProps,i=Za.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ss(Za,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,s,0,null),e=Lc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=uo(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Mc({mode:"visible",children:r.children},s,0,null),(i=Lc(i,s,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=uo(i=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Il)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Da(e,s),rc(r,e,s,-1))}return gc(),Vo(e,t,o,r=uo(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ra=cs(s.nextSibling),na=t,sa=!0,aa=null,null!==e&&(Ks[Qs++]=Xs,Ks[Qs++]=$s,Ks[Qs++]=Ys,Xs=e.id,$s=e.overflow,Ys=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,i,n);if(o){o=s.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Dc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,s}return e=(o=e.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&ma(r),wa(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function Bo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Wo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ss(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return As(t.type)&&Rs(),Ko(t),null;case 3:return r=t.stateNode,Xa(),Es(_s),Es(Cs),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ro(e,t),Ko(t),null;case 5:Ja(t);var s=Qa(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ko(t),null}if(e=Qa(Ha.current),da(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[hs]=t,r[ps]=i,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<Or.length;s++)Fr(Or[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,i),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fr("invalid",r);break;case"textarea":se(r,i),Fr("invalid",r)}for(var l in ye(n,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":G(r),Z(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),s=r;break;case"iframe":case"object":case"embed":Fr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Or.length;s++)Fr(Or[s],e);s=r;break;case"source":Fr("error",e),s=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),s=r;break;case"details":Fr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),Fr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Fr("invalid",e)}for(i in ye(n,s),c=s)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Fr("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Qa(Ka.current),Qa(Ha.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(i=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ko(t),null;case 13:if(Es(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,i=!1;else if(i=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hs]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),i=!1}else null!==aa&&(oc(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Xa(),Ro(e,t),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Ta(t.type._context),Ko(t),null;case 19:if(Es(Za),null===(i=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Go(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Go(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ss(Za,1&Za.current|2),t.child}e=e.sibling}null!==i.tail&&$e()>Wl&&(t.flags|=128,r=!0,Go(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!sa)return Ko(t),null}else 2*$e()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Go(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,n=Za.current,Ss(Za,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ta(t),t.tag){case 1:return As(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Es(_s),Es(Cs),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(Es(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Es(Za),null;case 4:return Xa(),null;case 10:return Ta(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Do=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qa(Ha.current);var a,i=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),i=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":s=re(e,s),r=re(e,r),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,$o=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&tl(t,n,a)}s=s.next}while(s!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[fs],delete t[gs],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:$o||el(n,t);case 6:var r=dl,s=hl;dl=null,pl(e,t,n),hl=s,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=s;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&tl(n,t,i),s=s.next}while(s!==r)}pl(e,t,n);break;case 1:if(!$o&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,pl(e,t,n),$o=r):pl(e,t,n);break;default:pl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));ml(i,o,s),dl=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Ec(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),sl(3,e)}catch(g){Ec(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&$(s,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":J(s,i);break;case"textarea":ae(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(s,!!i.multiple,m,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[ps]=i}catch(g){Ec(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){Ec(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=$e())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,gl(t,e),$o=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(m=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Nl(h);continue}}null!==m?(m.return=p,Zo=m):Nl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),ul(e,ll(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;cl(e,ll(e),i);break;default:throw Error(a(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var s=Zo,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Xo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Xo;var c=$o;if(Xo=i,($o=l)&&!c)for(Zo=s;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?kl(s):null!==l?(l.return=i,Zo=l):kl(s);for(;null!==a;)Zo=a,wl(a,t,n),a=a.sibling;Zo=s,Xo=o,$o=c}xl(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Zo=a):xl(e)}}function xl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wa(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}$o||512&t.flags&&al(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function Nl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Ec(t,s,l)}}var a=t.return;try{al(t)}catch(l){Ec(t,a,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Ec(t,i,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var jl,El=Math.ceil,Sl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,_l=0,Il=null,Pl=null,Al=0,Rl=0,Dl=js(0),Ol=0,Ll=null,Ml=0,Ul=0,Fl=0,Vl=null,zl=null,Bl=0,Wl=1/0,ql=null,Hl=!1,Gl=null,Kl=null,Ql=!1,Yl=null,Xl=0,$l=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&_l)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Al?Al&-Al:null!==fa.transition?(0===ec&&(ec=ft()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(a(185));vt(e,n,r),0!==(2&_l)&&e===Il||(e===Il&&(0===(2&_l)&&(Ul|=n),4===Ol&&lc(e,Al)),sc(e,r),1===n&&0===_l&&0===(1&t.mode)&&(Wl=$e()+500,Fs&&Bs()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Il?Al:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fs=!0,zs(e)}(cc.bind(null,e)):zs(cc.bind(null,e)),is(function(){0===(6&_l)&&Bs()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zl=-1,ec=0,0!==(6&_l))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var s=_l;_l|=2;var i=fc();for(Il===e&&Al===t||(ql=null,Wl=$e()+500,pc(e,t));;)try{bc();break}catch(l){mc(e,l)}Sa(),Sl.current=i,_l=s,null!==Pl?t=0:(Il=null,Al=0,t=Ol)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Ll,pc(e,0),lc(e,r),sc(e,$e()),n;if(6===t)lc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!or(a(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=vc(e,r))&&(0!==(i=mt(e))&&(r=i,t=ic(e,i))),1===t))throw n=Ll,pc(e,0),lc(e,r),sc(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Nc(e,zl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(Nc.bind(null,e,zl,ql),t);break}Nc(e,zl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>s&&(s=o),r&=~i}if(r=s,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=rs(Nc.bind(null,e,zl,ql),r);break}Nc(e,zl,ql);break;default:throw Error(a(329))}}}return sc(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&_l))throw Error(a(327));kc();var t=ht(e,0);if(0===(1&t))return sc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ll,pc(e,0),lc(e,t),sc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nc(e,zl,ql),sc(e,$e()),null}function uc(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&(Wl=$e()+500,Fs&&Bs())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&_l)&&kc();var t=_l;_l|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(_l=t))&&Bs()}}function hc(){Rl=Dl.current,Es(Dl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Rs();break;case 3:Xa(),Es(_s),Es(Cs),ni();break;case 5:Ja(r);break;case 4:Xa();break;case 13:case 19:Es(Za);break;case 10:Ta(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Pl=e=Dc(e.current,null),Al=Rl=t,Ol=0,Ll=null,Fl=Ul=Ml=0,zl=Vl=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(r=(n=Pa[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}Pa=null}return e}function mc(e,t){for(;;){var n=Pl;try{if(Sa(),ri.current=Ji,ci){for(var r=ii.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ci=!1}if(ai=0,li=oi=ii=null,ui=!1,di=0,Tl.current=null,null===n||null===n.return){Ol=1,Ll=t,Pl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=vo(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&go(i,u,t),c=u;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){go(i,u,t),gc();break e}c=Error(a(426))}else if(sa&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),yo(v,o,l,0,t),ma(co(c,l));break e}}i=c=co(c,l),4!==Ol&&(Ol=2),null===Vl?Vl=[i]:Vl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,za(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,za(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Ji,null===e?Ji:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&Ml)&&0===(268435455&Ul)||lc(Il,Al)}function vc(e,t){var n=_l;_l|=2;var r=fc();for(Il===e&&Al===t||(ql=null,pc(e,t));;)try{yc();break}catch(s){mc(e,s)}if(Sa(),_l=n,Sl.current=r,null!==Pl)throw Error(a(261));return Il=null,Al=0,Ol}function yc(){for(;null!==Pl;)wc(Pl)}function bc(){for(;null!==Pl&&!Ye();)wc(Pl)}function wc(e){var t=jl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,Tl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Rl)))return void(Pl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ol=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ol&&(Ol=5)}function Nc(e,t,n){var r=bt,s=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Yl);if(0!==(6&_l))throw Error(a(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,i),e===Il&&(Pl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ic(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=_l;_l|=4,Tl.current=null,function(e,t){if(es=qt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=o),p===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(x){Ec(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}f=nl,nl=!1}(e,n),vl(n,e),mr(ts),qt=!!es,ts=es=null,e.current=n,bl(n,e,s),Xe(),_l=l,bt=o,Cl.transition=i}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=s),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Jl?$l++:($l=0,Jl=e):$l=0,Bs()}(e,t,n,r)}finally{Cl.transition=s,bt=r}return null}function kc(){if(null!==Yl){var e=wt(Xl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&_l))throw Error(a(331));var s=_l;for(_l|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var p=(d=Zo).sibling,m=d.return;if(il(d),d===u){Zo=null;break}if(null!==p){p.return=m,Zo=p;break}Zo=m}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Zo=y;break e}Zo=i.return}}var b=e.current;for(Zo=b;null!==Zo;){var w=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Zo=w;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(N){Ec(l,l.return,N)}if(l===o){Zo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Zo=x;break e}Zo=l.return}}if(_l=s,Bs(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function jc(e,t,n){e=Fa(e,t=mo(0,t=co(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),sc(e,t))}function Ec(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fa(t,e=fo(t,e=co(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Al&n)===n&&(4===Ol||3===Ol&&(130023424&Al)===Al&&500>$e()-Bl?pc(e,0):Fl|=n),sc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Da(e,t))&&(vt(e,t,n),sc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ic(e,t){return Ke(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,s,i){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Lc(n.children,s,i,t);case j:o=8,s|=8;break;case E:return(e=Ac(12,n,t,2|s)).elementType=E,e.lanes=i,e;case _:return(e=Ac(13,n,t,s)).elementType=_,e.lanes=i,e;case I:return(e=Ac(19,n,t,s)).elementType=I,e.lanes=i,e;case R:return Mc(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case T:o=9;break e;case C:o=11;break e;case P:o=14;break e;case A:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Lc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,s,a,i,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return Ts;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(As(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(As(n))return Os(e,n,t)}return t}function Wc(e,t,n,r,s,a,i,o,l){return(e=zc(n,r,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=Ua(r=tc(),s=nc(n))).callback=void 0!==t&&null!==t?t:null,Fa(n,a,s),e.current.lanes=s,vt(e,s,r),sc(e,r),e}function qc(e,t,n,r){var s=t.current,a=tc(),i=nc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ua(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fa(s,t,i))&&(rc(e,s,i,a),Va(e,s,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_s.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),pa();break;case 5:$a(t);break;case 1:As(t.type)&&Ls(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ss(Na,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ss(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Ss(Za,1&Za.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ss(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,sa&&0!==(1048576&t.flags)&&Zs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=Ps(t,Cs.current);_a(t,n),s=fi(null,t,r,e,s,n);var i=gi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,As(r)?(i=!0,Ls(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,La(t),s.updater=so,t.stateNode=s,s._reactInternals=t,lo(t,r,e,n),t=_o(null,t,r,!0,i,n)):(t.tag=0,sa&&i&&ea(t),xo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=no(r,e),s){case 0:t=To(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=No(null,t,r,e,n);break e;case 14:t=ko(null,t,r,no(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,To(e,t,r,s=t.elementType===r?s:no(r,s),n);case 1:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:no(r,s),n);case 3:e:{if(Io(t),null===e)throw Error(a(387));r=t.pendingProps,s=(i=t.memoizedState).element,Ma(e,t),Ba(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,r,n,s=co(Error(a(423)),t));break e}if(r!==s){t=Po(e,t,r,n,s=co(Error(a(424)),t));break e}for(ra=cs(t.stateNode.containerInfo.firstChild),na=t,sa=!0,aa=null,n=xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===s){t=Ho(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return $a(t),null===e&&ca(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==i&&ns(r,i)&&(t.flags|=32),So(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uo(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:no(r,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ss(Na,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===s.children&&!_s.current){t=Ho(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Ua(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ca(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ca(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_a(t,n),r=r(s=Ia(s)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return s=no(r=t.type,t.pendingProps),ko(e,t,r,s=no(r.type,s),n);case 15:return jo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:no(r,s),qo(e,t),t.tag=1,As(r)?(e=!0,Ls(t)):e=!1,_a(t,n),io(t,r,s),lo(t,r,s,n),_o(null,t,r,!0,e,n);case 19:return Wo(e,t,n);case 22:return Eo(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof s){var o=s;s=function(){var e=Hc(i);o.call(e)}}qc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"===typeof r){var a=r;r=function(){var e=Hc(i);a.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[ms]=i.current,Br(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ms]=l.current,Br(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,n,r)}),l}(n,t,e,s,r);return Hc(i)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[ms]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,$e()),0===(6&_l)&&(Wl=$e()+500,Bs()))}break;case 13:dc(function(){var t=Da(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Kc(e,1)}},Nt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Da(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},jt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xs(r);if(!s)throw Error(a(90));K(r),J(r,s)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,_e=dc;var tu={usingClientEntryPoint:!1,Events:[bs,ws,xs,Se,Te,uc]},nu={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{st=su.inject(ru),at=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",s=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,s,0,i,o),e[ms]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),a=n.t(s,2),i=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,s){void 0===s&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=r.Pop,h=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){l=r.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:l,location:w.location,delta:t})}function b(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let w={get action(){return l},get location(){return e(a,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(u,y),h=e,()=>{a.removeEventListener(u,y),h=null}},createHref:e=>t(a,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let s=m(w.location,e,t);n&&n(s,e),g=v()+1;let c=p(s,g),u=w.createHref(s);try{o.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;a.location.assign(u)}i&&h&&h({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let s=m(w.location,e,t);n&&n(s,e),g=v();let a=p(s,g),c=w.createHref(s);o.replaceState(a,"",c),i&&h&&h({action:l,location:w.location,delta:0})},go:e=>o.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let s=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==s)return null;let a=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=R(s);i=P(a[o],e,r)}return i}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(d(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=B([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of N(e.path))s(e,t,r);else s(e,t)}),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=N(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,j=3,E=2,S=1,T=10,C=-2,_=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(_)&&(r+=C),t&&(r+=E),n.filter(e=>!_(e)).reduce((e,t)=>e+(k.test(t)?j:""===t?S:T),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:B([a,u.pathname]),pathnameBase:W(B([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=B([a,u.pathnameBase]))}return i}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:i,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function L(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:a=""}="string"===typeof e?g(e):e;if(r)if(i=r,O.test(i))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),h(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?M(r.substring(1),"/"):M(r,t)}else n=t;var i;return{pathname:n,search:q(s),hash:H(a)}}function M(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function U(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function V(e,t){let n=F(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function z(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=g(e):(s=c({},e),d(!s.pathname||!s.pathname.includes("?"),U("?","pathname","search",s)),d(!s.pathname||!s.pathname.includes("#"),U("#","pathname","hash",s)),d(!s.search||!s.search.includes("#"),U("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=L(s,a),u=o&&"/"!==o&&o.endsWith("/"),h=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],Q=(new Set(K),["get",...K]);new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}const X=s.createContext(null);const $=s.createContext(null);const J=s.createContext(null);const Z=s.createContext(null);const ee=s.createContext({outlet:null,matches:[],isDataRoute:!1});const te=s.createContext(null);function ne(){return null!=s.useContext(Z)}function re(){return ne()||d(!1),s.useContext(Z).location}function se(e){s.useContext(J).static||s.useLayoutEffect(e)}function ae(){let{isDataRoute:e}=s.useContext(ee);return e?function(){let{router:e}=ge(me.UseNavigateStable),t=ye(fe.UseNavigateStable),n=s.useRef(!1);se(()=>{n.current=!0});let r=s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Y({fromRouteId:t},s)))},[e,t]);return r}():function(){ne()||d(!1);let e=s.useContext(X),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:a}=s.useContext(ee),{pathname:i}=re(),o=JSON.stringify(V(a,n.v7_relativeSplatPath)),l=s.useRef(!1);return se(()=>{l.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let a=z(n,JSON.parse(o),i,"path"===s.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:B([t,a.pathname])),(s.replace?r.replace:r.push)(a,s.state,s)},[t,r,o,i,e])}()}function ie(){let{matches:e}=s.useContext(ee),t=e[e.length-1];return t?t.params:{}}function oe(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(J),{matches:a}=s.useContext(ee),{pathname:i}=re(),o=JSON.stringify(V(a,r.v7_relativeSplatPath));return s.useMemo(()=>z(e,JSON.parse(o),i,"path"===n),[e,o,i,n])}function le(e,t,n,a){ne()||d(!1);let{navigator:i}=s.useContext(J),{matches:o}=s.useContext(ee),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=re();if(t){var m;let e="string"===typeof t?g(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||d(!1),h=e}else h=p;let f=h.pathname||"/",v=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:v});let w=pe(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:B([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,a);return t&&w?s.createElement(Z.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function ce(){let e=function(){var e;let t=s.useContext(te),n=ve(fe.UseRouteError),r=ye(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:a},n):null,null)}const ue=s.createElement(ce,null);class de extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(ee.Provider,{value:this.props.routeContext},s.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function he(e){let{routeContext:t,match:n,children:r}=e,a=s.useContext(X);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(ee.Provider,{value:t},r)}function pe(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,r,a)=>{let i,d=!1,h=null,p=null;var m;n&&(i=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ue,c&&(u<0&&0===a?(m="route-fallback",!1||be[m]||(be[m]=!0),d=!0,p=null):u===a&&(d=!0,p=r.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,a+1)),g=()=>{let t;return t=i?h:d?p:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(he,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?s.createElement(de,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var me=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(me||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function ge(e){let t=s.useContext(X);return t||d(!1),t}function ve(e){let t=s.useContext($);return t||d(!1),t}function ye(e){let t=function(){let e=s.useContext(ee);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const be={};function we(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}a.startTransition;function xe(e){let{to:t,replace:n,state:r,relative:a}=e;ne()||d(!1);let{future:i,static:o}=s.useContext(J),{matches:l}=s.useContext(ee),{pathname:c}=re(),u=ae(),h=z(t,V(l,i.v7_relativeSplatPath),c,"path"===a),p=JSON.stringify(h);return s.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:a}),[u,p,a,n,r]),null}function Ne(e){d(!1)}function ke(e){let{basename:t="/",children:n=null,location:a,navigationType:i=r.Pop,navigator:o,static:l=!1,future:c}=e;ne()&&d(!1);let u=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:u,navigator:o,static:l,future:Y({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof a&&(a=g(a));let{pathname:p="/",search:m="",hash:f="",state:v=null,key:y="default"}=a,b=s.useMemo(()=>{let e=D(p,u);return null==e?null:{location:{pathname:e,search:m,hash:f,state:v,key:y},navigationType:i}},[u,p,m,f,v,y,i]);return null==b?null:s.createElement(J.Provider,{value:h},s.createElement(Z.Provider,{children:n,value:b}))}function je(e){let{children:t,location:n}=e;return le(Ee(t),n)}new Promise(()=>{});s.Component;function Ee(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let a=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,Ee(e.props.children,a));e.type!==Ne&&d(!1),e.props.index&&e.props.children&&d(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Ee(e.props.children,a)),n.push(i)}),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(tj){}new Map;const _e=a.startTransition;l.flushSync,a.useId;function Ie(e){let{basename:t,children:n,future:r,window:a}=e,i=s.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),v(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return m("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,o)));let l=i.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=s.useCallback(e=>{d&&_e?_e(()=>u(e)):u(e)},[u,d]);return s.useLayoutEffect(()=>l.listen(h),[l,h]),s.useEffect(()=>we(r),[r]),s.createElement(ke,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=s.forwardRef(function(e,t){let n,{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:p}=e,m=Te(e,Ce),{basename:g}=s.useContext(J),v=!1;if("string"===typeof u&&Ae.test(u)&&(n=u,Pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(tj){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;ne()||d(!1);let{basename:r,navigator:a}=s.useContext(J),{hash:i,pathname:o,search:l}=oe(e,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:B([r,o])),a.createHref({pathname:c,search:l,hash:i})}(u,{relative:a}),b=function(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=ae(),u=re(),d=oe(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(u)===f(d);c(e,{replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,i,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:p});return s.createElement("a",Se({},m,{href:n||y,onClick:v||i?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var De,Oe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(De||(De={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Oe||(Oe={}));const Le=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],a=s+1<e.length,i=a?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Le(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==i||null==o)throw new Ue;const l=t<<2|a>>4;if(r.push(l),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(e){return function(e){const t=Le(e);return Me.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ve=function(e){try{return Me.decodeString(e,!0)}catch(tj){console.error("base64Decode failed: ",tj)}return null};const ze=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Be=()=>{try{return ze()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(tj){return}const t=e&&Ve(e[1]);return t&&JSON.parse(t)})()}catch(tj){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(tj))}},We=e=>{var t,n;return null===(n=null===(t=Be())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},qe=()=>{var e;return null===(e=Be())||void 0===e?void 0:e.config},He=e=>{var t;return null===(t=Be())||void 0===t?void 0:t["_".concat(e)]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ke(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return!function(){var e;const t=null===(e=Be())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(tj){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){try{return"object"===typeof indexedDB}catch(tj){return!1}}class Xe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}}class $e{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(Je,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new Xe(n,a,t)}}const Je=/\{\$([^}]+)}/g;function Ze(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],a=t[s];if(et(n)&&et(a)){if(!Ze(n,a))return!1}else if(n!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function et(e){return null!==e&&"object"===typeof e}function tt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function nt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function rt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class st{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=at),void 0===r.error&&(r.error=at),void 0===r.complete&&(r.complete=at);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(tj){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(tj){"undefined"!==typeof console&&console.error&&console.error(tj)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function at(){}function it(e){return e&&e._delegate?e._delegate:e}class ot{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lt="[DEFAULT]";class ct{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ge;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(tj){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(tj){if(r)return null;throw tj}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:lt})}catch(tj){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(tj){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===lt?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.component?this.component.multipleInstances?e:lt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ct(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const dt=[];var ht;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ht||(ht={}));const pt={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},mt=ht.INFO,ft={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},gt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ft[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class vt{constructor(e){this.name=e,this._logLevel=mt,this._logHandler=gt,this._userLogHandler=null,dt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?pt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function bt(e){var t=function(e,t){if("object"!=yt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yt(t)?t:t+""}function wt(e,t,n){return(t=bt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(t){wt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let kt,jt;const Et=new WeakMap,St=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,_t=new WeakMap;let It={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return St.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Tt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Pt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(jt||(jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Dt(this),n),Rt(Et.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Rt(e.apply(Dt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.call(Dt(this),t,...r);return Tt.set(a,t.sort?t.sort():[t]),Rt(a)}}function At(e){return"function"===typeof e?Pt(e):(e instanceof IDBTransaction&&function(e){if(St.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});St.set(e,t)}(e),t=e,(kt||(kt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,It):e);var t}function Rt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(Rt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&Et.set(t,e)}).catch(()=>{}),_t.set(t,e),t}(e);if(Ct.has(e))return Ct.get(e);const t=At(e);return t!==e&&(Ct.set(e,t),_t.set(t,e)),t}const Dt=e=>_t.get(e);const Ot=["get","getKey","getAll","getAllKeys","count"],Lt=["put","add","delete","clear"],Mt=new Map;function Ut(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Mt.get(t))return Mt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Lt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Ot.includes(n))return;const a=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let a=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),s&&t.done]))[0]};return Mt.set(t,a),a}It=(e=>Nt(Nt({},e),{},{get:(t,n,r)=>Ut(t,n)||e.get(t,n,r),has:(t,n)=>!!Ut(t,n)||e.has(t,n)}))(It);class Ft{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Vt="@firebase/app",zt="0.10.13",Bt=new vt("@firebase/app"),Wt="@firebase/app-compat",qt="@firebase/analytics-compat",Ht="@firebase/analytics",Gt="@firebase/app-check-compat",Kt="@firebase/app-check",Qt="@firebase/auth",Yt="@firebase/auth-compat",Xt="@firebase/database",$t="@firebase/data-connect",Jt="@firebase/database-compat",Zt="@firebase/functions",en="@firebase/functions-compat",tn="@firebase/installations",nn="@firebase/installations-compat",rn="@firebase/messaging",sn="@firebase/messaging-compat",an="@firebase/performance",on="@firebase/performance-compat",ln="@firebase/remote-config",cn="@firebase/remote-config-compat",un="@firebase/storage",dn="@firebase/storage-compat",hn="@firebase/firestore",pn="@firebase/vertexai-preview",mn="@firebase/firestore-compat",fn="firebase",gn="[DEFAULT]",vn={[Vt]:"fire-core",[Wt]:"fire-core-compat",[Ht]:"fire-analytics",[qt]:"fire-analytics-compat",[Kt]:"fire-app-check",[Gt]:"fire-app-check-compat",[Qt]:"fire-auth",[Yt]:"fire-auth-compat",[Xt]:"fire-rtdb",[$t]:"fire-data-connect",[Jt]:"fire-rtdb-compat",[Zt]:"fire-fn",[en]:"fire-fn-compat",[tn]:"fire-iid",[nn]:"fire-iid-compat",[rn]:"fire-fcm",[sn]:"fire-fcm-compat",[an]:"fire-perf",[on]:"fire-perf-compat",[ln]:"fire-rc",[cn]:"fire-rc-compat",[un]:"fire-gcs",[dn]:"fire-gcs-compat",[hn]:"fire-fst",[mn]:"fire-fst-compat",[pn]:"fire-vertex","fire-js":"fire-js",[fn]:"fire-js-all"},yn=new Map,bn=new Map,wn=new Map;function xn(e,t){try{e.container.addComponent(t)}catch(tj){Bt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),tj)}}function Nn(e){const t=e.name;if(wn.has(t))return Bt.debug("There were multiple attempts to register component ".concat(t,".")),!1;wn.set(t,e);for(const n of yn.values())xn(n,e);for(const n of bn.values())xn(n,e);return!0}function kn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jn(e){return void 0!==e.settings}const En=new $e("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Sn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const Tn="10.14.1";function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:gn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw En.create("bad-app-name",{appName:String(s)});if(n||(n=qe()),!n)throw En.create("no-options");const a=yn.get(s);if(a){if(Ze(n,a.options)&&Ze(r,a.config))return a;throw En.create("duplicate-app",{appName:s})}const i=new ut(s);for(const l of wn.values())i.addComponent(l);const o=new Sn(n,r,i);return yn.set(s,o),o}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;const t=yn.get(e);if(!t&&e===gn&&qe())return Cn();if(!t)throw En.create("no-app",{appName:e});return t}function In(e,t,n){var r;let s=null!==(r=vn[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Bt.warn(e.join(" "))}Nn(new ot("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Pn="firebase-heartbeat-store";let An=null;function Rn(){return An||(An=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=Rt(i);return r&&i.addEventListener("upgradeneeded",e=>{r(Rt(i.result),e.oldVersion,e.newVersion,Rt(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Pn)}catch(tj){console.warn(tj)}}}).catch(e=>{throw En.create("idb-open",{originalErrorMessage:e.message})})),An}async function Dn(e,t){try{const n=(await Rn()).transaction(Pn,"readwrite"),r=n.objectStore(Pn);await r.put(t,On(e)),await n.done}catch(tj){if(tj instanceof Xe)Bt.warn(tj.message);else{const t=En.create("idb-set",{originalErrorMessage:null===tj||void 0===tj?void 0:tj.message});Bt.warn(t.message)}}}function On(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ln{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Un(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Mn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(tj){Bt.warn(tj)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Mn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Fn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Fn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Fe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(tj){return Bt.warn(tj),""}}}function Mn(){return(new Date).toISOString().substring(0,10)}class Un{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ye()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Rn()).transaction(Pn),n=await t.objectStore(Pn).get(On(e));return await t.done,n}catch(tj){if(tj instanceof Xe)Bt.warn(tj.message);else{const t=En.create("idb-get",{originalErrorMessage:null===tj||void 0===tj?void 0:tj.message});Bt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Dn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Dn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Fn(e){return Fe(JSON.stringify({version:2,heartbeats:e})).length}var Vn;Vn="",Nn(new ot("platform-logger",e=>new Ft(e),"PRIVATE")),Nn(new ot("heartbeat",e=>new Ln(e),"PRIVATE")),In(Vt,zt,Vn),In(Vt,zt,"esm2017"),In("fire-js","");In("firebase","10.14.1","app");function zn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Bn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wn=Bn,qn=new $e("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Hn=new vt("@firebase/auth");function Gn(e){if(Hn.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Hn.error("Auth (".concat(Tn,"): ").concat(e),...n)}}function Kn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Jn(e,...n)}function Qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jn(e,...n)}function Yn(e,t,n){const r=Object.assign(Object.assign({},Wn()),{[t]:n});return new $e("auth","Firebase",r).create(t,{appName:e.name})}function Xn(e){return Yn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $n(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Kn(e,"argument-error"),Yn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qn.create(e,...n)}function Zn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Jn(t,...r)}}function er(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Gn(t),new Error(t)}function tr(e,t){e||er(t)}function nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function rr(){return"http:"===sr()||"https:"===sr()}function sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ar(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(rr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ir{constructor(e,t){this.shortDelay=e,this.longDelay=t,tr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return ar()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function or(e,t){tr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class lr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ur=new ir(3e4,6e4);function dr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function hr(e,t,n,r){return pr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const i=tt(Object.assign({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),lr.fetch()(fr(e,e.config.apiHost,n,i),l)})}async function pr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},cr),t);try{const t=new vr(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw yr(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const t=s.ok?a.errorMessage:a.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw yr(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw yr(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw yr(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw Yn(e,o,i);Kn(e,o)}}catch(tj){if(tj instanceof Xe)throw tj;Kn(e,"network-request-failed",{message:String(tj)})}}async function mr(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await hr(e,t,n,r,s);return"mfaPendingCredential"in a&&Kn(e,"multi-factor-auth-required",{_serverResponse:a}),a}function fr(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?or(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function gr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Qn(this.auth,"network-request-failed")),ur.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qn(e,t,r);return s.customData._tokenResponse=n,s}function br(e){return void 0!==e&&void 0!==e.enterprise}class wr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function xr(e,t){return hr(e,"GET","/v2/recaptchaConfig",dr(e,t))}async function Nr(e,t){return hr(e,"POST","/v1/accounts:lookup",t)}function kr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(tj){}}function jr(e){return 1e3*Number(e)}function Er(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Gn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ve(n);return e?JSON.parse(e):(Gn("Failed to decode base64 JWT payload"),null)}catch(tj){return Gn("Caught error parsing JWT payload as JSON",null===tj||void 0===tj?void 0:tj.toString()),null}}function Sr(e){const t=Er(e);return Zn(t,"internal-error"),Zn("undefined"!==typeof t.exp,"internal-error"),Zn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Tr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(tj){throw tj instanceof Xe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(tj)&&e.auth.currentUser===e&&await e.auth.signOut(),tj}}class Cr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(tj){return void((null===tj||void 0===tj?void 0:tj.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class _r{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kr(this.lastLoginAt),this.creationTime=kr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ir(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Tr(e,Nr(n,{idToken:r}));Zn(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const a=s.users[0];e._notifyReloadListener(a);const i=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?Pr(a.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new _r(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function Pr(e){return e.map(e=>{var{providerId:t}=e,n=zn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Zn(e.idToken,"internal-error"),Zn("undefined"!==typeof e.idToken,"internal-error"),Zn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Sr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Zn(0!==e.length,"internal-error");const t=Sr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Zn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await pr(e,{},async()=>{const n=tt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=fr(e,r,"/v1/token","key=".concat(s)),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",lr.fetch()(a,{method:"POST",headers:i,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,a=new Ar;return n&&(Zn("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(Zn("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),s&&(Zn("number"===typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ar,this.toJSON())}_performRefresh(){return er("not implemented")}}function Rr(e,t){Zn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Dr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=zn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _r(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Tr(this,this.stsTokenManager.getToken(this.auth,e));return Zn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=it(e),r=await n.getIdToken(t),s=Er(r);Zn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a="object"===typeof s.firebase?s.firebase:void 0,i=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:kr(jr(s.auth_time)),issuedAtTime:kr(jr(s.iat)),expirationTime:kr(jr(s.exp)),signInProvider:i||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=it(e);await Ir(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Zn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Zn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ir(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await Tr(this,async function(e,t){return hr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,i,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(i=t.tenantId)&&void 0!==i?i:void 0,f=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:N}=t;Zn(y&&N,e,"internal-error");const k=Ar.fromJSON(this.name,N);Zn("string"===typeof y,e,"internal-error"),Rr(u,e.name),Rr(d,e.name),Zn("boolean"===typeof b,e,"internal-error"),Zn("boolean"===typeof w,e,"internal-error"),Rr(h,e.name),Rr(p,e.name),Rr(m,e.name),Rr(f,e.name),Rr(g,e.name),Rr(v,e.name);const j=new Dr({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:k,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(j.providerData=x.map(e=>Object.assign({},e))),f&&(j._redirectEventId=f),j}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ar;r.updateFromServerResponse(t);const s=new Dr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ir(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Zn(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Pr(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),i=new Ar;i.updateFromIdToken(n);const o=new Dr({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new _r(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Or=new Map;function Lr(e){tr(e instanceof Function,"Expected a class definition");let t=Or.get(e);return t?(tr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Or.set(e,t),t)}class Mr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Mr.type="NONE";const Ur=Mr;function Fr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Vr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Fr(this.userKey,r.apiKey,s),this.fullPersistenceKey=Fr("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Vr(Lr(Ur),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Lr(Ur);const a=Fr(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(a);if(t){const n=Dr._fromJSON(e,t);c!==s&&(i=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],i&&await s._set(a,i.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(a)}catch(l){}})),new Vr(s,e,n)):new Vr(s,e,n)}}function zr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Br(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Kr(t))return"Blackberry";if(Qr(t))return"Webos";if(Wr(t))return"Safari";if((t.includes("chrome/")||qr(t))&&!t.includes("edge/"))return"Chrome";if(Gr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/firefox\//i.test(e)}function Wr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/crios\//i.test(e)}function Hr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iemobile/i.test(e)}function Gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/android/i.test(e)}function Kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/blackberry/i.test(e)}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/webos/i.test(e)}function Yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Xr(){return function(){const e=Ke();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return Yr(e)||Gr(e)||Qr(e)||Kr(e)||/windows phone/i.test(e)||Hr(e)}function Jr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=zr(Ke());break;case"Worker":t="".concat(zr(Ke()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Tn,"/").concat(r)}class Zr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(tj){r(tj)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(tj){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===tj||void 0===tj?void 0:tj.message})}}}class es{constructor(e){var t,n,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,a,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class ts{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rs(this),this.idTokenSubscription=new rs(this),this.beforeStateQueue=new Zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Vr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(tj){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Nr(this,{idToken:e}),n=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==a||!(null===i||void 0===i?void 0:i.user)||(r=i.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(tj){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(tj))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Zn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(tj){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ir(e)}catch(tj){if((null===tj||void 0===tj?void 0:tj.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Xn(this));const t=e?it(e):null;return t&&Zn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Zn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return hr(e,"GET","/v2/passwordPolicy",dr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new es(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $e("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return hr(e,"POST","/v2/accounts:revokeToken",dr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;Zn(t,this,"argument-error"),this.redirectPersistenceManager=await Vr.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let a=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Zn(i,this,"internal-error"),i.then(()=>{a||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{a=!0,s()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Zn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Hn.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Hn.warn("Auth (".concat(Tn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ns(e){return it(e)}class rs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new st(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Zn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ss={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function as(e){return ss.loadJS(e)}function is(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class os{constructor(e){this.type="recaptcha-enterprise",this.auth=ns(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;br(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{xr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new wr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&br(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ss.recaptchaEnterpriseScript;0!==t.length&&(t+=s),as(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ls(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new os(e);let a;try{a=await s.verify(n)}catch(o){a=await s.verify(n,!0)}const i=Object.assign({},t);return r?Object.assign(i,{captchaResp:a}):Object.assign(i,{captchaResponse:a}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function cs(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ls(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await ls(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function us(e,t,n){const r=ns(e);Zn(r._canInitEmulator,r,"emulator-config-failed"),Zn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ds(t),{host:i,port:o}=function(e){const t=ds(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:hs(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:hs(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(a,"//").concat(i).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ds(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hs(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ps{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,t){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function ms(e,t){return hr(e,"POST","/v1/accounts:signUp",t)}async function fs(e,t){return mr(e,"POST","/v1/accounts:signInWithPassword",dr(e,t))}class gs extends ps{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new gs(e,t,"password")}static _fromEmailAndCode(e,t){return new gs(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return cs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fs);case"emailLink":return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithEmailLink",dr(e,t))}(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return cs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ms);case"emailLink":return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithEmailLink",dr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vs(e,t){return mr(e,"POST","/v1/accounts:signInWithIdp",dr(e,t))}class ys extends ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=zn(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new ys(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return vs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,vs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tt(t)}return e}}const bs={USER_NOT_FOUND:"user-not-found"};class ws extends ps{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ws({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ws({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithPhoneNumber",dr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await mr(e,"POST","/v1/accounts:signInWithPhoneNumber",dr(e,t));if(n.temporaryProof)throw yr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithPhoneNumber",dr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),bs)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new ws({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class xs{constructor(e){var t,n,r,s,a,i;const o=nt(rt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Zn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(a=o.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(i=o.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=nt(rt(e)).link,n=t?nt(rt(t)).deep_link_id:null,r=nt(rt(e)).deep_link_id;return(r?nt(rt(r)).link:null)||r||n||t||e}(e);try{return new xs(t)}catch(n){return null}}}class Ns{constructor(){this.providerId=Ns.PROVIDER_ID}static credential(e,t){return gs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xs.parseLink(t);return Zn(n,"argument-error"),gs._fromEmailAndCode(e,n.code,n.tenantId)}}Ns.PROVIDER_ID="password",Ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ks{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class js extends ks{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Es extends js{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Es.credential(t.oauthAccessToken)}catch(n){return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com",Es.PROVIDER_ID="facebook.com";class Ss extends js{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ys._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ss.credential(n,r)}catch(s){return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com",Ss.PROVIDER_ID="google.com";class Ts extends js{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ts.credential(t.oauthAccessToken)}catch(n){return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com",Ts.PROVIDER_ID="github.com";class Cs extends js{constructor(){super("twitter.com")}static credential(e,t){return ys._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Cs.credential(n,r)}catch(s){return null}}}async function _s(e,t){return mr(e,"POST","/v1/accounts:signUp",dr(e,t))}Cs.TWITTER_SIGN_IN_METHOD="twitter.com",Cs.PROVIDER_ID="twitter.com";class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Dr._fromIdTokenResponse(e,n,r),a=Ps(n);return new Is({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ps(n);return new Is({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ps(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class As extends Xe{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,As.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new As(e,t,n,r)}}function Rs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw As._fromErrorAndOperation(e,n,t,r);throw n})}async function Ds(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Tr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Is._forOperation(e,"link",r)}async function Os(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(jn(r.app))return Promise.reject(Xn(r));const s="reauthenticate";try{const a=await Tr(e,Rs(r,s,t,e),n);Zn(a.idToken,r,"internal-error");const i=Er(a.idToken);Zn(i,r,"internal-error");const{sub:o}=i;return Zn(e.uid===o,r,"user-mismatch"),Is._forOperation(e,s,a)}catch(tj){throw(null===tj||void 0===tj?void 0:tj.code)==="auth/".concat("user-not-found")&&Kn(r,"user-mismatch"),tj}}async function Ls(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(jn(e.app))return Promise.reject(Xn(e));const r="signIn",s=await Rs(e,r,t),a=await Is._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(a.user),a}async function Ms(e,t){return Ls(ns(e),t)}async function Us(e){const t=ns(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Fs(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=it(e),a={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},i=await Tr(s,async function(e,t){return hr(e,"POST","/v1/accounts:update",t)}(s.auth,a));s.displayName=i.displayName||null,s.photoURL=i.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(i)}function Vs(e,t,n,r){return it(e).onAuthStateChanged(t,n,r)}new WeakMap;const zs="__sak";class Bs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zs,"1"),this.storage.removeItem(zs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ws extends Bs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$r(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Xr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ws.type="LOCAL";const qs=Ws;class Hs extends Bs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hs.type="SESSION";const Gs=Hs;class Ks{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ks(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,a=this.handlersMap[r];if(!(null===a||void 0===a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(a).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Qs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ks.receivers=[];class Ys{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((i,o)=>{const l=Qs("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),i(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Xs(){return window}function $s(){return"undefined"!==typeof Xs().WorkerGlobalScope&&"function"===typeof Xs().importScripts}const Js="firebaseLocalStorageDb",Zs="firebaseLocalStorage",ea="fbase_key";class ta{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function na(e,t){return e.transaction([Zs],t?"readwrite":"readonly").objectStore(Zs)}function ra(){const e=indexedDB.open(Js,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Zs,{keyPath:ea})}catch(tj){n(tj)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Zs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Js);return new ta(e).toPromise()}(),t(await ra()))})})}async function sa(e,t,n){const r=na(e,!0).put({[ea]:t,value:n});return new ta(r).toPromise()}function aa(e,t){const n=na(e,!0).delete(t);return new ta(n).toPromise()}class ia{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ra()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(tj){if(t++>3)throw tj;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $s()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ks._getInstance($s()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ys(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ra();return await sa(e,zs,"1"),await aa(e,zs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>sa(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=na(e,!1).get(t),r=await new ta(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>aa(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=na(e,!1).getAll();return new ta(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ia.type="LOCAL";const oa=ia;is("rcb"),new ir(3e4,6e4);const la="recaptcha";async function ca(e,t,n){var r;const s=await n.verify();try{let a;if(Zn("string"===typeof s,e,"argument-error"),Zn(n.type===la,e,"argument-error"),a="string"===typeof t?{phoneNumber:t}:t,"session"in a){const t=a.session;if("phoneNumber"in a){Zn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return hr(e,"POST","/v2/accounts/mfaEnrollment:start",dr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Zn("signin"===t.type,e,"internal-error");const n=(null===(r=a.multiFactorHint)||void 0===r?void 0:r.uid)||a.multiFactorUid;Zn(n,e,"missing-multi-factor-info");const i=await function(e,t){return hr(e,"POST","/v2/accounts/mfaSignIn:start",dr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return hr(e,"POST","/v1/accounts:sendVerificationCode",dr(e,t))}(e,{phoneNumber:a.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class ua{constructor(e){this.providerId=ua.PROVIDER_ID,this.auth=ns(e)}verifyPhoneNumber(e,t){return ca(this.auth,e,it(t))}static credential(e,t){return ws._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ua.credentialFromTaggedObject(t)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ws._fromTokenResponse(n,r):null}}function da(e,t){return t?Lr(t):(Zn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ua.PROVIDER_ID="phone",ua.PHONE_SIGN_IN_METHOD="phone";class ha extends ps{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pa(e){return Ls(e.auth,new ha(e),e.bypassAuthState)}function ma(e){const{auth:t,user:n}=e;return Zn(n,t,"internal-error"),Os(n,new ha(e),e.bypassAuthState)}async function fa(e){const{auth:t,user:n}=e;return Zn(n,t,"internal-error"),Ds(n,new ha(e),e.bypassAuthState)}class ga{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(tj){this.reject(tj)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:a,type:i}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(tj){this.reject(tj)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pa;case"linkViaPopup":case"linkViaRedirect":return fa;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:Kn(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const va=new ir(2e3,1e4);class ya extends ga{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,ya.currentPopupAction&&ya.currentPopupAction.cancel(),ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Zn(e,this.auth,"internal-error"),e}async onExecution(){tr(1===this.filter.length,"Popup operations only handle one event");const e=Qs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,va.get())};e()}}ya.currentPopupAction=null;const ba=new Map;class wa extends ga{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ba.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ka(t),r=Na(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(tj){e=()=>Promise.reject(tj)}ba.set(this.auth._key(),e)}return this.bypassAuthState||ba.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function xa(e,t){ba.set(e._key(),t)}function Na(e){return Lr(e._redirectPersistence)}function ka(e){return Fr("pendingRedirect",e.config.apiKey,e.name)}async function ja(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(jn(e.app))return Promise.reject(Xn(e));const r=ns(e),s=da(r,t),a=new wa(r,s,n),i=await a.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class Ea{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ta(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ta(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Qn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sa(e))}saveEventToCache(e){this.cachedEventUids.add(Sa(e)),this.lastProcessedEventTime=Date.now()}}function Sa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ta(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ca=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_a=/^https?/;async function Ia(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return hr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Pa(r))return}catch(n){}Kn(e,"unauthorized-domain")}function Pa(e){const t=nr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!_a.test(n))return!1;if(Ca.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Aa=new ir(3e4,6e4);function Ra(){const e=Xs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Da(e){return new Promise((t,n)=>{var r,s,a;function i(){Ra(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ra(),n(Qn(e,"network-request-failed"))},timeout:Aa.get()})}if(null===(s=null===(r=Xs().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Xs().gapi)||void 0===a?void 0:a.load)){const t=is("iframefcb");return Xs()[t]=()=>{gapi.load?i():n(Qn(e,"network-request-failed"))},as("".concat(ss.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw Oa=null,e})}let Oa=null;const La=new ir(5e3,15e3),Ma={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ua=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fa(e){const t=e.config;Zn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?or(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Tn},s=Ua.get(e.config.apiHost);s&&(r.eid=s);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(tt(r).slice(1))}async function Va(e){const t=await function(e){return Oa=Oa||Da(e),Oa}(e),n=Xs().gapi;return Zn(n,e,"internal-error"),t.open({where:document.body,url:Fa(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ma,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Qn(e,"network-request-failed"),a=Xs().setTimeout(()=>{r(s)},La.get());function i(){Xs().clearTimeout(a),n(t)}t.ping(i).then(i,()=>{r(s)})}))}const za={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ba{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(tj){}}}function Wa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},za),{width:r.toString(),height:s.toString(),top:a,left:i}),c=Ke().toLowerCase();n&&(o=qr(c)?"_blank":n),Br(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Yr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Ba(null);const d=window.open(t||"",o,u);Zn(d,e,"popup-blocked");try{d.focus()}catch(tj){}return new Ba(d)}const qa="__/auth/handler",Ha="emulator/auth/handler",Ga=encodeURIComponent("fac");async function Ka(e,t,n,r,s,a){Zn(e.config.authDomain,e,"auth-domain-config-required"),Zn(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tn,eventId:s};if(t instanceof ks){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))i[e]=t}if(t instanceof js){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ga,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(qa);return or(t,Ha)}(e),"?").concat(tt(o).slice(1)).concat(c)}const Qa="webStorageSupport";const Ya=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gs,this._completeRedirectFn=ja,this._overrideRedirectResult=xa}async _openPopup(e,t,n,r){var s;tr(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Wa(e,await Ka(e,t,n,nr(),r),Qs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Xs().location.href=e}(await Ka(e,t,n,nr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(tr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Va(e),n=new Ea(e);return t.register("authEvent",t=>{Zn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qa,{type:Qa},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Qa];void 0!==s&&t(!!s),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ia(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $r()||Wr()||Yr()}};var Xa="@firebase/auth",$a="1.7.9";class Ja{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Zn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Za=He("authIdTokenMaxAge")||300;let ei=null;var ti;ss={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Qn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ti="Browser",Nn(new ot("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;Zn(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:ti,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jr(ti)},c=new ts(r,s,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Nn(new ot("auth-internal",e=>(e=>new Ja(e))(ns(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),In(Xa,$a,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ti)),In(Xa,$a,"esm2017");var ni,ri,si="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ai={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var a=e.g[3],i=t+(a^n&(s^a))+r[0]+3614090360&4294967295;i=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=n+(i<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^a&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^a)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((a=(t=n+((i=t+(s^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=a+((i=s+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var a=0|e[s];r&&a==t||(n[s]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,a=this.h,i=0;i<t;){if(0==a)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(s[a++]=e.charCodeAt(i++),a==this.blockSize){n(this,s),a=0;break}}else for(;i<t;)if(s[a++]=e[i++],a==this.blockSize){n(this,s),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function a(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(i(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new f(o,o);if(d(e))return t=g(h(e),t),new f(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new f(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var s=y(n,1),a=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=a.add(r);0>=c.l(e)&&(s=s.add(n),a=c),r=y(r,1),n=y(n,1)}return t=p(e,s.j(t)),new f(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=i(n)).j(t);d(c)||0<c.l(e);)c=(a=i(n-=r)).j(t);u(a)&&(a=l),s=s.add(a),e=p(e,c)}return new f(s,e)}function v(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,a=[],i=0;i<s;i++)a[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=i(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,a=((0<(n=p(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,a=0;a<=t;a++){var i=s+(65535&this.i(a))+(65535&e.i(a)),o=(i>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);s=o>>>16,i&=65535,o&=65535,n[a]=o<<16|i}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return i(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<e.g.length;a++){var l=this.i(s)>>>16,p=65535&this.i(s),f=e.i(a)>>>16,g=65535&e.i(a);n[2*s+2*a]+=p*g,m(n,2*s+2*a),n[2*s+2*a+1]+=l*g,m(n,2*s+2*a+1),n[2*s+2*a+1]+=p*f,m(n,2*s+2*a+1),n[2*s+2*a+2]+=l*f,m(n,2*s+2*a+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ri=ai.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=i(Math.pow(n,8)),s=o,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=i(Math.pow(n,l)),s=s.j(l).add(i(c))):s=(s=s.j(r)).add(i(c))}return s},ni=ai.Integer=r}).apply("undefined"!==typeof si?si:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ii,oi,li,ci,ui,di,hi,pi,mi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},fi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof mi&&mi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var i=e[a];if(!(i in s))break e;s=s[i]}(r=r(a=s[e=e[e.length-1]]))!=a&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=f().indexOf("Gecko")&&!(-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge"))&&!(-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE"))&&-1==f().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout(()=>{throw e},0)}function j(){var e=_;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new S,e=>e.reset());class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,_=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);T=()=>{e.then(P)}};var P=()=>{for(var e;e=j();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function A(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var s=!0;break e}catch(a){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],a=Array.prototype.indexOf.call(s,t,void 0);(r=0<=a)&&Array.prototype.splice.call(s,a,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var s=0;s<e.length;++s){var a=e[s];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var i=W(e,t,r,s);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new F(t,this.src,a,!!r,s)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function G(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var a=0;a<t.length;a++)G(e,t[a],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,i(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,a){if(!t)throw Error("Invalid event type");var o=i(s)?!!s.capture:!!s,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Q(e,t[a],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,i(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)Y(e,t[a],n,r,s);else r=i(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(a=e.g[t],n,r,s))&&(V(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function $(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;x(t=new R(r,e),s)}if(s=!0,n)for(var a=n.length-1;0<=a;a--){var i=t.g=n[a];s=se(i,r,!0,t)&&s}if(s=se(i=t.g=e,r,!0,t)&&s,s=se(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)s=se(i=t.g=n[a],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,a=0;a<t.length;++a){var i=t[a];if(i&&!i.da&&i.capture==n){var o=i.listener,l=i.ha||i.src;i.fa&&B(e.i,i),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ae(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ie(e){e.g=ae(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,A),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}d(le,A);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,pe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function fe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function be(){R.call(this,"c")}d(ye,R),d(be,R);var we={},xe=null;function Ne(){return xe=xe||new ne}function ke(e){R.call(this,we.La,e)}function je(e){const t=Ne();re(t,new ke(t))}function Ee(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function Se(e){const t=Ne();re(t,new Ee(t,e))}function Te(e,t){R.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function _e(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var i=1;i<s.length;i++)s[i]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(ke,R),we.STAT_EVENT="statevent",d(Ee,R),we.Ma="timingevent",d(Te,R),_e.prototype.xa=function(){this.g=!1},_e.prototype.info=function(){};var Pe,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,me),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Pe=new De;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(it(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),We(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var a=0;a<s.length;a++){var i=G(n,s[a],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),je(),function(e,t,n,r,s,a){e.info(function(){if(e.g)if(a)for(var i="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");i=2<=d.length&&"type"==d[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Xt(n)}rn(n),Se(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(et(a,a.h),a.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),i.K){tt(r.h,i);var o=i,l=r.L;l&&(o.I=l),o.B&&(He(o),We(o)),r.g=i}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}je()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=h||7==t||je(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Gt(this.g);e="";var a=r.length,i=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),Ge(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,a,i){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+a+" "+i})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),Ke(this),Ge(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Ue){4==h&&(this.s=4,Se(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Se(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,Se(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),Ge(this)}else Ie(this.i,this.l,o,null),Qe(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[s]||[];t[s]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Ke(this),Ge(this)}}}catch(gi){}},Oe.prototype.cancel=function(){this.J=!0,Ke(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(je(),Se(17)),Ke(this),this.s=2,Ge(this)):qe(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function at(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof at){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function it(e){return new at(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}at.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,wt)),e.join("")};var ft,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var a=e[n].substring(0,r);s=e[n].substring(r+1)}else a=e[n];t(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function kt(e,t){Nt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function jt(e,t){return Nt(e),t=St(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(a){}}function Ct(){this.g=new pe}function _t(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;i(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(tj){throw t.push(r+"type="+encodeURIComponent("_badmap")),tj}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){Nt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)jt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,jt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var s=a;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),e.push(s)}}return this.i=e.join("&")},d(It,me),It.prototype.g=function(){return new Pt(this.l,this.j)},It.prototype.i=(ft={},function(){return ft}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Wt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var i=String(e.D).match(st)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),a=!Ut.test(i?i.toLowerCase():"")}n=a}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{Wt(e)}}}function Wt(e,t){if(e.g){qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(tj){}}}function qt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(bi){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new _e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if($t(e),3==e.G){var t=e.U++,n=it(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(it(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}dn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function $t(e){Xt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Jt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||I(),C||(T(),C=!0),_.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let i=0;i<n;i++){let n=s[i].g;const o=s[i].map;if(n-=t,0>n)t=Math.max(0,s[i].g-100),a=!1;else try{_t(o,e,"req"+n+"_")}catch(gi){r&&r(o)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||I(),C||(T(),C=!0),_.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(it(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Te(r,n)),Jt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new at(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new _e;if(s.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),dn(e),$t(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof at?it(n):new at(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var a=s.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new at(null);r&&ot(i,r),t&&(i.g=t),a&&lt(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new It({eb:n})):new Mt(e.pa)).Ha(e.J),t}function mn(){}function fn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?fe(this.o):fe(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void Vt(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),a=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(i){Vt(this,i)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Wt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(ft){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(ft){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let a=this.o;if(this.S&&(a?(a=b(a),x(a,this.S)):a=this.S),null!==this.m||this.O||(s.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=it(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(Ot(a)))+"&"+t:this.m&&Lt(n,this.m,a)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Fe(s,n,null)):Fe(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,mn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,pi=fi.createWebChannelTransport=function(){return new fn},hi=fi.getStatEventTarget=function(){return Ne()},di=fi.Event=we,ui=fi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,ci=fi.ErrorCode=Ae,Re.COMPLETE="complete",li=fi.EventType=Re,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,oi=fi.WebChannel=ge,fi.FetchXmlHttpFactory=It,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,ii=fi.XhrIo=Mt}).apply("undefined"!==typeof mi?mi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const gi="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let yi="10.14.0";const bi=new vt("@firebase/firestore");function wi(){return bi.logLevel}function xi(e){if(bi.logLevel<=ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ji);bi.debug("Firestore (".concat(yi,"): ").concat(e),...s)}}function Ni(e){if(bi.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ji);bi.error("Firestore (".concat(yi,"): ").concat(e),...s)}}function ki(e){if(bi.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ji);bi.warn("Firestore (".concat(yi,"): ").concat(e),...s)}}function ji(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(yi,") INTERNAL ASSERTION FAILED: ")+e;throw Ni(t),new Error(t)}function Si(e,t){e||Ei()}function Ti(e,t){return e}const Ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _i extends Xe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ai{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class Ri{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Di{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Si(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ii,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},i=e=>{xi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>i(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(xi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ii)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(xi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Si("string"==typeof t.accessToken),new Pi(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Si(null===e||"string"==typeof e),new vi(e)}}class Oi{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Li{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Oi(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ui{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Si(void 0===this.o);const n=e=>{null!=e.error&&xi("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,xi("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{xi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):xi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Si("string"==typeof e.token),this.R=e.token,new Mi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Fi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Vi{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Fi(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function zi(e,t){return e<t?-1:e>t?1:0}function Bi(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Wi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _i(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _i(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _i(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _i(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wi.fromMillis(Date.now())}static fromDate(e){return Wi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Wi(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zi(this.nanoseconds,e.nanoseconds):zi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qi{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qi(e)}static min(){return new qi(new Wi(0,0))}static max(){return new qi(new Wi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hi{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ei(),void 0===n?n=e.length-t:n>e.length-t&&Ei(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Hi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gi extends Hi{construct(e,t,n){return new Gi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new _i(Ci.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Gi(e)}static emptyPath(){return new Gi([])}}const Ki=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qi extends Hi{construct(e,t,n){return new Qi(e,t,n)}static isValidIdentifier(e){return Ki.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qi(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new _i(Ci.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new _i(Ci.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new _i(Ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(s(),r++)}if(s(),a)throw new _i(Ci.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qi(t)}static emptyPath(){return new Qi([])}}class Yi{constructor(e){this.path=e}static fromPath(e){return new Yi(Gi.fromString(e))}static fromName(e){return new Yi(Gi.fromString(e).popFirst(5))}static empty(){return new Yi(Gi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yi(new Gi(e.slice()))}}class Xi{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Xi.UNKNOWN_ID=-1;function $i(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=qi.fromTimestamp(1e9===r?new Wi(n+1,0):new Wi(n,r));return new Zi(s,Yi.empty(),t)}function Ji(e){return new Zi(e.readTime,e.key,-1)}class Zi{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Zi(qi.min(),Yi.empty(),-1)}static max(){return new Zi(qi.max(),Yi.empty(),-1)}}function eo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Yi.comparator(e.documentKey,t.documentKey),0!==n?n:zi(e.largestBatchId,t.largestBatchId))}const to="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class no{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ro(e){if(e.code!==Ci.FAILED_PRECONDITION||e.message!==to)throw e;xi("LocalStore","Unexpectedly lost primary lease")}class so{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ei(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new so((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof so?t:so.resolve(t)}catch(e){return so.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):so.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):so.reject(t)}static resolve(e){return new so((t,n)=>{t(e)})}static reject(e){return new so((t,n)=>{n(e)})}static waitFor(e){return new so((t,n)=>{let r=0,s=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++s,a&&s===r&&t()},e=>n(e))}),a=!0,s===r&&t()})}static or(e){let t=so.resolve(!1);for(const n of e)t=t.next(e=>e?so.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new so((n,r)=>{const s=e.length,a=new Array(s);let i=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{a[l]=e,++i,i===s&&n(a)},e=>r(e))}})}static doWhile(e,t){return new so((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function ao(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(e){return"IndexedDbTransactionError"===e.name}class oo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function lo(e){return null==e}function co(e){return 0===e&&1/e==-1/0}function uo(e){return"number"==typeof e&&Number.isInteger(e)&&!co(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}oo.oe=-1;const ho=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],po=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mo=po,fo=[...mo,"indexConfiguration","indexState","indexEntries"];function go(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class bo{constructor(e,t){this.comparator=e,this.root=t||xo.EMPTY}insert(e,t){return new bo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xo.BLACK,null,null))}remove(e){return new bo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wo(this.root,e,this.comparator,!0)}}class wo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xo{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:xo.RED,this.left=null!=r?r:xo.EMPTY,this.right=null!=s?s:xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new xo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return xo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ei();if(this.right.isRed())throw Ei();const e=this.left.check();if(e!==this.right.check())throw Ei();return e+(this.isRed()?0:1)}}xo.EMPTY=null,xo.RED=!0,xo.BLACK=!1,xo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ei()}get value(){throw Ei()}get color(){throw Ei()}get left(){throw Ei()}get right(){throw Ei()}copy(e,t,n,r,s){return this}insert(e,t,n){return new xo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class No{constructor(e){this.comparator=e,this.data=new bo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ko(this.data.getIterator())}getIteratorFrom(e){return new ko(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof No))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new No(this.comparator);return t.data=e,t}}class ko{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jo{constructor(e){this.fields=e,e.sort(Qi.comparator)}static empty(){return new jo([])}unionWith(e){let t=new No(Qi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new jo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bi(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Eo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class So{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Eo("Invalid base64 string: "+e):e}}(e);return new So(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new So(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}So.EMPTY_BYTE_STRING=new So("");const To=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(e){if(Si(!!e),"string"==typeof e){let t=0;const n=To.exec(e);if(Si(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_o(e.seconds),nanos:_o(e.nanos)}}function _o(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Io(e){return"string"==typeof e?So.fromBase64String(e):So.fromUint8Array(e)}function Po(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ao(e){const t=e.mapValue.fields.__previous_value__;return Po(t)?Ao(t):t}function Ro(e){const t=Co(e.mapValue.fields.__local_write_time__.timestampValue);return new Wi(t.seconds,t.nanos)}class Do{constructor(e,t,n,r,s,a,i,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=i,this.longPollingOptions=o,this.useFetchStreams=l}}class Oo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}const Lo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Mo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Po(e)?4:Zo(e)?9007199254740991:$o(e)?10:11:Ei()}function Uo(e,t){if(e===t)return!0;const n=Mo(e);if(n!==Mo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ro(e).isEqual(Ro(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Co(e.timestampValue),r=Co(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Io(e.bytesValue).isEqual(Io(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _o(e.geoPointValue.latitude)===_o(t.geoPointValue.latitude)&&_o(e.geoPointValue.longitude)===_o(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _o(e.integerValue)===_o(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=_o(e.doubleValue),r=_o(t.doubleValue);return n===r?co(n)===co(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bi(e.arrayValue.values||[],t.arrayValue.values||[],Uo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(go(n)!==go(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Uo(n[s],r[s])))return!1;return!0}(e,t);default:return Ei()}}function Fo(e,t){return void 0!==(e.values||[]).find(e=>Uo(e,t))}function Vo(e,t){if(e===t)return 0;const n=Mo(e),r=Mo(t);if(n!==r)return zi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=_o(e.integerValue||e.doubleValue),r=_o(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zo(e.timestampValue,t.timestampValue);case 4:return zo(Ro(e),Ro(t));case 5:return zi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Io(e),r=Io(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=zi(n[s],r[s]);if(0!==e)return e}return zi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=zi(_o(e.latitude),_o(t.latitude));return 0!==n?n:zi(_o(e.longitude),_o(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Bo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,a;const i=e.fields||{},o=t.fields||{},l=null===(n=i.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=zi((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Bo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Lo.mapValue&&t===Lo.mapValue)return 0;if(e===Lo.mapValue)return 1;if(t===Lo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},a=Object.keys(s);r.sort(),a.sort();for(let i=0;i<r.length&&i<a.length;++i){const e=zi(r[i],a[i]);if(0!==e)return e;const t=Vo(n[r[i]],s[a[i]]);if(0!==t)return t}return zi(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ei()}}function zo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zi(e,t);const n=Co(e),r=Co(t),s=zi(n.seconds,r.seconds);return 0!==s?s:zi(n.nanos,r.nanos)}function Bo(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Vo(n[s],r[s]);if(e)return e}return zi(n.length,r.length)}function Wo(e){return qo(e)}function qo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Co(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Io(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Yi.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=qo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(qo(e.fields[s]));return n+"}"}(e.mapValue):Ei()}function Ho(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Go(e){return!!e&&"integerValue"in e}function Ko(e){return!!e&&"arrayValue"in e}function Qo(e){return!!e&&"nullValue"in e}function Yo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xo(e){return!!e&&"mapValue"in e}function $o(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Jo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Zo(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class el{constructor(e){this.value=e}static empty(){return new el({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(t)}setAll(e){let t=Qi.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Jo(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Xo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){vo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new el(Jo(this.value))}}function tl(e){const t=[];return vo(e.fields,(e,n)=>{const r=new Qi([e]);if(Xo(n)){const e=tl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new jo(t)}class nl{constructor(e,t,n,r,s,a,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=a,this.documentState=i}static newInvalidDocument(e){return new nl(e,0,qi.min(),qi.min(),qi.min(),el.empty(),0)}static newFoundDocument(e,t,n,r){return new nl(e,1,t,qi.min(),n,r,0)}static newNoDocument(e,t){return new nl(e,2,t,qi.min(),qi.min(),el.empty(),0)}static newUnknownDocument(e,t){return new nl(e,3,t,qi.min(),qi.min(),el.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=el.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=el.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class rl{constructor(e,t){this.position=e,this.inclusive=t}}function sl(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const a=t[s],i=e.position[s];if(r=a.field.isKeyField()?Yi.comparator(Yi.fromName(i.referenceValue),n.key):Vo(i,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function al(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Uo(e.position[n],t.position[n]))return!1;return!0}class il{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ol(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ll{}class cl extends ll{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vl(e,t,n):"array-contains"===t?new xl(e,n):"in"===t?new Nl(e,n):"not-in"===t?new kl(e,n):"array-contains-any"===t?new jl(e,n):new cl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yl(e,n):new bl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vo(t,this.value)):null!==t&&Mo(this.value)===Mo(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ei()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ul extends ll{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ul(e,t)}matches(e){return dl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dl(e){return"and"===e.op}function hl(e){return pl(e)&&dl(e)}function pl(e){for(const t of e.filters)if(t instanceof ul)return!1;return!0}function ml(e){if(e instanceof cl)return e.field.canonicalString()+e.op.toString()+Wo(e.value);if(hl(e))return e.filters.map(e=>ml(e)).join(",");{const t=e.filters.map(e=>ml(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function fl(e,t){return e instanceof cl?function(e,t){return t instanceof cl&&e.op===t.op&&e.field.isEqual(t.field)&&Uo(e.value,t.value)}(e,t):e instanceof ul?function(e,t){return t instanceof ul&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&fl(n,t.filters[r]),!0)}(e,t):void Ei()}function gl(e){return e instanceof cl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Wo(e.value))}(e):e instanceof ul?function(e){return e.op.toString()+" {"+e.getFilters().map(gl).join(" ,")+"}"}(e):"Filter"}class vl extends cl{constructor(e,t,n){super(e,t,n),this.key=Yi.fromName(n.referenceValue)}matches(e){const t=Yi.comparator(e.key,this.key);return this.matchesComparison(t)}}class yl extends cl{constructor(e,t){super(e,"in",t),this.keys=wl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bl extends cl{constructor(e,t){super(e,"not-in",t),this.keys=wl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Yi.fromName(e.referenceValue))}class xl extends cl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ko(t)&&Fo(t.arrayValue,this.value)}}class Nl extends cl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fo(this.value.arrayValue,t)}}class kl extends cl{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fo(this.value.arrayValue,t)}}class jl extends cl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ko(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Fo(this.value.arrayValue,e))}}class El{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=a,this.endAt=i,this.ue=null}}function Sl(e){return new El(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Tl(e){const t=Ti(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ml(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),lo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Wo(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Wo(e)).join(",")),t.ue=e}return t.ue}function Cl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ol(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!fl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!al(e.startAt,t.startAt)&&al(e.endAt,t.endAt)}function _l(e){return Yi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Il{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=i,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Pl(e,t,n,r,s,a,i,o){return new Il(e,t,n,r,s,a,i,o)}function Al(e){return new Il(e)}function Rl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Dl(e){return null!==e.collectionGroup}function Ol(e){const t=Ti(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new No(Qi.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new il(r,n))}),e.has(Qi.keyField().canonicalString())||t.ce.push(new il(Qi.keyField(),n))}return t.ce}function Ll(e){const t=Ti(e);return t.le||(t.le=Ml(t,Ol(e))),t.le}function Ml(e,t){if("F"===e.limitType)return Sl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new il(e.field,t)});const n=e.endAt?new rl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new rl(e.startAt.position,e.startAt.inclusive):null;return Sl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ul(e,t){const n=e.filters.concat([t]);return new Il(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Fl(e,t,n){return new Il(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vl(e,t){return Cl(Ll(e),Ll(t))&&e.limitType===t.limitType}function zl(e){return"".concat(Tl(Ll(e)),"|lt:").concat(e.limitType)}function Bl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>gl(e)).join(", "),"]")),lo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Wo(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Wo(e)).join(",")),"Target(".concat(t,")")}(Ll(e)),"; limitType=").concat(e.limitType,")")}function Wl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ol(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ol(e),t))&&!(e.endAt&&!function(e,t,n){const r=sl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ol(e),t))}(e,t)}function ql(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hl(e){return(t,n)=>{let r=!1;for(const s of Ol(e)){const e=Gl(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Gl(e,t,n){const r=e.field.isKeyField()?Yi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Vo(r,s):Ei()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ei()}}class Kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return yo(this.inner)}size(){return this.innerSize}}const Ql=new bo(Yi.comparator);function Yl(){return Ql}const Xl=new bo(Yi.comparator);function $l(){let e=Xl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Jl(e){let t=Xl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Zl(){return tc()}function ec(){return tc()}function tc(){return new Kl(e=>e.toString(),(e,t)=>e.isEqual(t))}const nc=new bo(Yi.comparator),rc=new No(Yi.comparator);function sc(){let e=rc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const ac=new No(zi);function ic(){return ac}function oc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:co(t)?"-0":t}}function lc(e){return{integerValue:""+e}}function cc(e,t){return uo(t)?lc(t):oc(e,t)}class uc{constructor(){this._=void 0}}function dc(e,t,n){return e instanceof mc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Po(t)&&(t=Ao(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof fc?gc(e,t):e instanceof vc?yc(e,t):function(e,t){const n=pc(e,t),r=wc(n)+wc(e.Pe);return Go(n)&&Go(e.Pe)?lc(r):oc(e.serializer,r)}(e,t)}function hc(e,t,n){return e instanceof fc?gc(e,t):e instanceof vc?yc(e,t):n}function pc(e,t){return e instanceof bc?function(e){return Go(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class mc extends uc{}class fc extends uc{constructor(e){super(),this.elements=e}}function gc(e,t){const n=xc(t);for(const r of e.elements)n.some(e=>Uo(e,r))||n.push(r);return{arrayValue:{values:n}}}class vc extends uc{constructor(e){super(),this.elements=e}}function yc(e,t){let n=xc(t);for(const r of e.elements)n=n.filter(e=>!Uo(e,r));return{arrayValue:{values:n}}}class bc extends uc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function wc(e){return _o(e.integerValue||e.doubleValue)}function xc(e){return Ko(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Nc{constructor(e,t){this.field=e,this.transform=t}}class kc{constructor(e,t){this.version=e,this.transformResults=t}}class jc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jc}static exists(e){return new jc(void 0,e)}static updateTime(e){return new jc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Sc{}function Tc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Mc(e.key,jc.none()):new Ac(e.key,e.data,jc.none());{const n=e.data,r=el.empty();let s=new No(Qi.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Rc(e.key,r,new jo(s.toArray()),jc.none())}}function Cc(e,t,n){e instanceof Ac?function(e,t,n){const r=e.value.clone(),s=Oc(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rc?function(e,t,n){if(!Ec(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Oc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Dc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function _c(e,t,n,r){return e instanceof Ac?function(e,t,n,r){if(!Ec(e.precondition,t))return n;const s=e.value.clone(),a=Lc(e.fieldTransforms,r,t);return s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rc?function(e,t,n,r){if(!Ec(e.precondition,t))return n;const s=Lc(e.fieldTransforms,r,t),a=t.data;return a.setAll(Dc(e)),a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ec(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ic(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=pc(r.transform,e||null);null!=s&&(null===n&&(n=el.empty()),n.set(r.field,s))}return n||null}function Pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Bi(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fc&&t instanceof fc||e instanceof vc&&t instanceof vc?Bi(e.elements,t.elements,Uo):e instanceof bc&&t instanceof bc?Uo(e.Pe,t.Pe):e instanceof mc&&t instanceof mc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ac extends Sc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rc extends Sc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Dc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Oc(e,t,n){const r=new Map;Si(e.length===n.length);for(let s=0;s<n.length;s++){const a=e[s],i=a.transform,o=t.data.field(a.field);r.set(a.field,hc(i,o,n[s]))}return r}function Lc(e,t,n){const r=new Map;for(const s of e){const e=s.transform,a=n.data.field(s.field);r.set(s.field,dc(e,a,t))}return r}class Mc extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uc extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Cc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=_c(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=_c(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ec();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let i=this.applyToLocalView(a,s.mutatedFields);i=t.has(r.key)?null:i;const o=Tc(a,i);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(qi.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sc())}isEqual(e){return this.batchId===e.batchId&&Bi(this.mutations,e.mutations,(e,t)=>Pc(e,t))&&Bi(this.baseMutations,e.baseMutations,(e,t)=>Pc(e,t))}}class Vc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Si(e.mutations.length===n.length);let r=nc;const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,n[a].version);return new Vc(e,t,n,r)}}class zc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Bc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Wc,qc;function Hc(e){switch(e){default:return Ei();case Ci.CANCELLED:case Ci.UNKNOWN:case Ci.DEADLINE_EXCEEDED:case Ci.RESOURCE_EXHAUSTED:case Ci.INTERNAL:case Ci.UNAVAILABLE:case Ci.UNAUTHENTICATED:return!1;case Ci.INVALID_ARGUMENT:case Ci.NOT_FOUND:case Ci.ALREADY_EXISTS:case Ci.PERMISSION_DENIED:case Ci.FAILED_PRECONDITION:case Ci.ABORTED:case Ci.OUT_OF_RANGE:case Ci.UNIMPLEMENTED:case Ci.DATA_LOSS:return!0}}function Gc(e){if(void 0===e)return Ni("GRPC error has no .code"),Ci.UNKNOWN;switch(e){case Wc.OK:return Ci.OK;case Wc.CANCELLED:return Ci.CANCELLED;case Wc.UNKNOWN:return Ci.UNKNOWN;case Wc.DEADLINE_EXCEEDED:return Ci.DEADLINE_EXCEEDED;case Wc.RESOURCE_EXHAUSTED:return Ci.RESOURCE_EXHAUSTED;case Wc.INTERNAL:return Ci.INTERNAL;case Wc.UNAVAILABLE:return Ci.UNAVAILABLE;case Wc.UNAUTHENTICATED:return Ci.UNAUTHENTICATED;case Wc.INVALID_ARGUMENT:return Ci.INVALID_ARGUMENT;case Wc.NOT_FOUND:return Ci.NOT_FOUND;case Wc.ALREADY_EXISTS:return Ci.ALREADY_EXISTS;case Wc.PERMISSION_DENIED:return Ci.PERMISSION_DENIED;case Wc.FAILED_PRECONDITION:return Ci.FAILED_PRECONDITION;case Wc.ABORTED:return Ci.ABORTED;case Wc.OUT_OF_RANGE:return Ci.OUT_OF_RANGE;case Wc.UNIMPLEMENTED:return Ci.UNIMPLEMENTED;case Wc.DATA_LOSS:return Ci.DATA_LOSS;default:return Ei()}}(qc=Wc||(Wc={}))[qc.OK=0]="OK",qc[qc.CANCELLED=1]="CANCELLED",qc[qc.UNKNOWN=2]="UNKNOWN",qc[qc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qc[qc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qc[qc.NOT_FOUND=5]="NOT_FOUND",qc[qc.ALREADY_EXISTS=6]="ALREADY_EXISTS",qc[qc.PERMISSION_DENIED=7]="PERMISSION_DENIED",qc[qc.UNAUTHENTICATED=16]="UNAUTHENTICATED",qc[qc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qc[qc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qc[qc.ABORTED=10]="ABORTED",qc[qc.OUT_OF_RANGE=11]="OUT_OF_RANGE",qc[qc.UNIMPLEMENTED=12]="UNIMPLEMENTED",qc[qc.INTERNAL=13]="INTERNAL",qc[qc.UNAVAILABLE=14]="UNAVAILABLE",qc[qc.DATA_LOSS=15]="DATA_LOSS";let Kc=null;function Qc(){return new TextEncoder}const Yc=new ni([4294967295,4294967295],0);function Xc(e){const t=Qc().encode(e),n=new ri;return n.update(t),new Uint8Array(n.digest())}function $c(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ni([n,r],0),new ni([s,a],0)]}class Jc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Zc("Invalid padding: ".concat(t));if(n<0)throw new Zc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Zc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Zc("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=ni.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ni.fromNumber(n)));return 1===r.compare(Yc)&&(r=new ni([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Xc(e),[n,r]=$c(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Jc(s,r,t);return n.forEach(e=>a.insert(e)),a}insert(e){if(0===this.Ie)return;const t=Xc(e),[n,r]=$c(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class eu{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new eu(qi.min(),r,new bo(zi),Yl(),sc())}}class tu{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new tu(n,t,sc(),sc(),sc())}}class nu{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class ru{constructor(e,t){this.targetId=e,this.me=t}}class su{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:So.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class au{constructor(){this.fe=0,this.ge=lu(),this.pe=So.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=sc(),t=sc(),n=sc();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ei()}}),new tu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=lu()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Si(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class iu{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yl(),this.qe=ou(),this.Qe=new bo(zi)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ei()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(_l(s))if(0===n){const e=new Yi(s.path);this.Ue(t,e,nl.newNoDocument(e,qi.min()))}else Si(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Kc||Kc.et(function(e,t,n,r,s){var a,i,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(l=null===(o=null===(i=null==h?void 0:h.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let a,i;try{a=Io(n).toUint8Array()}catch(e){if(e instanceof Eo)return ki("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Jc(a,r,s)}catch(e){return ki(e instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.Ie?null:i}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),a="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&_l(s.target)){const t=new Yi(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,nl.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=sc();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new eu(e,t,this.Qe,this.ke,n);return this.ke=Yl(),this.qe=ou(),this.Qe=new bo(zi),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new au,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new No(zi),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||xi("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new au),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ou(){return new bo(Yi.comparator)}function lu(){return new bo(Yi.comparator)}const cu={asc:"ASCENDING",desc:"DESCENDING"},uu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},du={and:"AND",or:"OR"};class hu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pu(e,t){return e.useProto3Json||lo(t)?t:{value:t}}function mu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gu(e,t){return mu(e,t.toTimestamp())}function vu(e){return Si(!!e),qi.fromTimestamp(function(e){const t=Co(e);return new Wi(t.seconds,t.nanos)}(e))}function yu(e,t){return bu(e,t).canonicalString()}function bu(e,t){const n=function(e){return new Gi(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function wu(e){const t=Gi.fromString(e);return Si(Vu(t)),t}function xu(e,t){return yu(e.databaseId,t.path)}function Nu(e,t){const n=wu(t);if(n.get(1)!==e.databaseId.projectId)throw new _i(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _i(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yi(Su(n))}function ku(e,t){return yu(e.databaseId,t)}function ju(e){const t=wu(e);return 4===t.length?Gi.emptyPath():Su(t)}function Eu(e){return new Gi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Su(e){return Si(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Tu(e,t,n){return{name:xu(e,t),fields:n.value.mapValue.fields}}function Cu(e,t){let n;if(t instanceof Ac)n={update:Tu(e,t.key,t.value)};else if(t instanceof Mc)n={delete:xu(e,t.key)};else if(t instanceof Rc)n={update:Tu(e,t.key,t.data),updateMask:Fu(t.fieldMask)};else{if(!(t instanceof Uc))return Ei();n={verify:xu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof mc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ei()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ei()}(e,t.precondition)),n}function _u(e,t){return{documents:[ku(e,t.path)]}}function Iu(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ku(e,s);const a=function(e){if(0!==e.length)return Uu(ul.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Lu(e.field),direction:Ru(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=pu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Pu(e){let t=ju(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Si(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=Au(e);return t instanceof ul&&hl(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map(e=>function(e){return new il(Mu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,lo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new rl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new rl(n,t)}(n.endAt)),Pl(t,s,i,a,o,"F",l,c)}function Au(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Mu(e.unaryFilter.field);return cl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Mu(e.unaryFilter.field);return cl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Mu(e.unaryFilter.field);return cl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Mu(e.unaryFilter.field);return cl.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ei()}}(e):void 0!==e.fieldFilter?function(e){return cl.create(Mu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ei()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ul.create(e.compositeFilter.filters.map(e=>Au(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ei()}}(e.compositeFilter.op))}(e):Ei()}function Ru(e){return cu[e]}function Du(e){return uu[e]}function Ou(e){return du[e]}function Lu(e){return{fieldPath:e.canonicalString()}}function Mu(e){return Qi.fromServerFormat(e.fieldPath)}function Uu(e){return e instanceof cl?function(e){if("=="===e.op){if(Yo(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NAN"}};if(Qo(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yo(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NAN"}};if(Qo(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(e.field),op:Du(e.op),value:e.value}}}(e):e instanceof ul?function(e){const t=e.getFilters().map(e=>Uu(e));return 1===t.length?t[0]:{compositeFilter:{op:Ou(e.op),filters:t}}}(e):Ei()}function Fu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Vu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class zu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qi.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qi.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:So.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=i,this.expectedCount=o}withSequenceNumber(e){return new zu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Bu{constructor(e){this.ct=e}}function Wu(e){const t=Pu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fl(t,t.limit,"L"):t}class qu{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(_o(e.integerValue));else if("doubleValue"in e){const n=_o(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),co(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Co(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Io(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Zo(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$o(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ei()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const a="value",i=(null===(r=null===(n=s[a].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(_o(i)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Yi.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}qu.vt=new qu;class Hu{constructor(){this.un=new Gu}addToCollectionParentIndex(e,t){return this.un.add(t),so.resolve()}getCollectionParents(e,t){return so.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return so.resolve()}deleteFieldIndex(e,t){return so.resolve()}deleteAllFieldIndexes(e){return so.resolve()}createTargetIndexes(e,t){return so.resolve()}getDocumentsMatchingTarget(e,t){return so.resolve(null)}getIndexType(e,t){return so.resolve(0)}getFieldIndexes(e,t){return so.resolve([])}getNextCollectionGroupToUpdate(e){return so.resolve(null)}getMinOffset(e,t){return so.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,t){return so.resolve(Zi.min())}updateCollectionGroup(e,t,n){return so.resolve()}updateIndexEntries(e,t){return so.resolve()}}class Gu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new No(Gi.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new No(Gi.comparator)).toArray()}}new Uint8Array(0);class Ku{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ku(e,Ku.DEFAULT_COLLECTION_PERCENTILE,Ku.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Ku.DEFAULT_COLLECTION_PERCENTILE=10,Ku.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ku.DEFAULT=new Ku(41943040,Ku.DEFAULT_COLLECTION_PERCENTILE,Ku.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ku.DISABLED=new Ku(-1,0,0);class Qu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qu(0)}static kn(){return new Qu(-1)}}class Yu{constructor(){this.changes=new Kl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?so.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $u{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&_c(n.mutation,e,jo.empty(),Wi.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,sc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sc();const r=Zl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=$l();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Zl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,sc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Yl();const a=tc(),i=tc();return t.forEach((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof Rc)?s=s.insert(t.key,t):void 0!==i?(a.set(t.key,i.mutation.getFieldMask()),_c(i.mutation,t,i.mutation.getFieldMask(),Wi.now())):a.set(t.key,jo.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return i.set(e,new Xu(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),i))}recalculateAndSaveOverlays(e,t){const n=tc();let r=new bo((e,t)=>e-t),s=sc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let i=n.get(e)||jo.empty();i=s.applyToLocalView(a,i),n.set(e,i);const o=(r.get(s.batchId)||sc()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const a=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=ec();l.forEach(e=>{if(!s.has(e)){const r=Tc(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return so.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Yi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):so.resolve(Zl());let i=-1,o=s;return a.next(t=>so.forEach(t,(t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?so.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,sc())).next(e=>({batchId:i,changes:Jl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yi(t)).next(e=>{let t=$l();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let a=$l();return this.indexManager.getCollectionParents(e,s).next(i=>so.forEach(i,i=>{const o=function(e,t){return new Il(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,nl.newInvalidDocument(r)))});let n=$l();return e.forEach((e,r)=>{const a=s.get(e);void 0!==a&&_c(a.mutation,r,jo.empty(),Wi.now()),Wl(t,r)&&(n=n.insert(e,r))}),n})}}class Ju{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return so.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:vu(e.createTime)}}(t)),so.resolve()}getNamedQuery(e,t){return so.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Wu(e.bundledQuery),readTime:vu(e.readTime)}}(t)),so.resolve()}}class Zu{constructor(){this.overlays=new bo(Yi.comparator),this.Ir=new Map}getOverlay(e,t){return so.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Zl();return so.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),so.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),so.resolve()}getOverlaysForCollection(e,t,n){const r=Zl(),s=t.length+1,a=new Yi(t.child("")),i=this.overlays.getIteratorFrom(a);for(;i.hasNext();){const e=i.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return so.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new bo((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Zl(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Zl(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>i.set(e,t)),!(i.size()>=r)););return so.resolve(i)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new zc(t,n));let s=this.Ir.get(t);void 0===s&&(s=sc(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class ed{constructor(){this.sessionToken=So.EMPTY_BYTE_STRING}getSessionToken(e){return so.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,so.resolve()}}class td{constructor(){this.Tr=new No(nd.Er),this.dr=new No(nd.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new nd(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new nd(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Yi(new Gi([])),n=new nd(t,e),r=new nd(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Yi(new Gi([])),n=new nd(t,e),r=new nd(t,e+1);let s=sc();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new nd(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class nd{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Yi.comparator(e.key,t.key)||zi(e.wr,t.wr)}static Ar(e,t){return zi(e.wr,t.wr)||Yi.comparator(e.key,t.key)}}class rd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new No(nd.Er)}checkEmpty(e){return so.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Fc(s,t,n,r);this.mutationQueue.push(a);for(const i of r)this.br=this.br.add(new nd(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return so.resolve(a)}lookupMutationBatch(e,t){return so.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return so.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return so.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return so.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new nd(t,0),r=new nd(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),so.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new No(zi);return t.forEach(e=>{const t=new nd(e,0),r=new nd(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),so.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Yi.isDocumentKey(s)||(s=s.child(""));const a=new nd(new Yi(s),0);let i=new No(zi);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.wr)),!0)},a),so.resolve(this.Cr(i))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Si(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return so.forEach(t.mutations,r=>{const s=new nd(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new nd(t,0),r=this.br.firstAfterOrEqual(n);return so.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,so.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sd{constructor(e){this.Mr=e,this.docs=new bo(Yi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,a=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return so.resolve(n?n.document.mutableCopy():nl.newInvalidDocument(t))}getEntries(e,t){let n=Yl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():nl.newInvalidDocument(e))}),so.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Yl();const a=t.path,i=new Yi(a.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||eo(Ji(i),n)<=0||(r.has(i.key)||Wl(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return so.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Ei()}Or(e,t){return so.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ad(this)}getSize(e){return so.resolve(this.size)}}class ad extends Yu{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),so.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class id{constructor(e){this.persistence=e,this.Nr=new Kl(e=>Tl(e),Cl),this.lastRemoteSnapshotVersion=qi.min(),this.highestTargetId=0,this.Lr=0,this.Br=new td,this.targetCount=0,this.kr=Qu.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),so.resolve()}getLastRemoteSnapshotVersion(e){return so.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return so.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),so.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),so.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Qu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,so.resolve()}updateTargetData(e,t){return this.Kn(t),so.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,so.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((a,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)}),so.waitFor(s).next(()=>r)}getTargetCount(e){return so.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return so.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),so.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),so.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),so.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return so.resolve(n)}containsKey(e,t){return so.resolve(this.Br.containsKey(t))}}class od{constructor(e,t){this.qr={},this.overlays={},this.Qr=new oo(0),this.Kr=!1,this.Kr=!0,this.$r=new ed,this.referenceDelegate=e(this),this.Ur=new id(this),this.indexManager=new Hu,this.remoteDocumentCache=function(e){return new sd(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Bu(t),this.Gr=new Ju(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new rd(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){xi("MemoryPersistence","Starting transaction:",e);const r=new ld(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return so.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class ld extends no{constructor(e){super(),this.currentSequenceNumber=e}}class cd{constructor(e){this.persistence=e,this.Jr=new td,this.Yr=null}static Zr(e){return new cd(e)}get Xr(){if(this.Yr)return this.Yr;throw Ei()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),so.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),so.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),so.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return so.forEach(this.Xr,n=>{const r=Yi.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,qi.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return so.or([()=>so.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class ud{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=sc(),r=sc();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ud(e,t.fromCache,n,r)}}class dd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hd{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Qe()?8:ao(Ke())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new dd;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(wi()<=ht.DEBUG&&xi("QueryEngine","SDK will not create cache indexes for query:",Bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),so.resolve()):(wi()<=ht.DEBUG&&xi("QueryEngine","Query:",Bl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(wi()<=ht.DEBUG&&xi("QueryEngine","The SDK decides to create cache indexes for query:",Bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ll(t))):so.resolve())}Yi(e,t){if(Rl(t))return so.resolve(null);let n=Ll(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Fl(t,null,"F"),n=Ll(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=sc(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.ts(t,r);return this.ns(t,a,s,n.readTime)?this.Yi(e,Fl(t,null,"F")):this.rs(e,a,t,n)}))})))}Zi(e,t,n,r){return Rl(t)||r.isEqual(qi.min())?so.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const a=this.ts(t,s);return this.ns(t,a,n,r)?so.resolve(null):(wi()<=ht.DEBUG&&xi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bl(t)),this.rs(e,a,t,$i(r,-1)).next(e=>e))})}ts(e,t){let n=new No(Hl(e));return t.forEach((t,r)=>{Wl(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return wi()<=ht.DEBUG&&xi("QueryEngine","Using full collection scan to execute query:",Bl(t)),this.Ji.getDocumentsMatchingQuery(e,t,Zi.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class pd{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new bo(zi),this._s=new Kl(e=>Tl(e),Cl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $u(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function md(e,t,n,r){return new pd(e,t,n,r)}async function fd(e,t){const n=Ti(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],a=[];let i=sc();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:a}))})})}function gd(e){const t=Ti(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function vd(e,t,n){let r=sc(),s=sc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Yl();return n.forEach((n,a)=>{const i=e.get(n);a.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),a.isNoDocument()&&a.version.isEqual(qi.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):xi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)}),{Ps:r,Is:s}})}function yd(e,t){const n=Ti(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function bd(e,t){const n=Ti(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,so.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new zu(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function wd(e,t,n){const r=Ti(e),s=r.os.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!io(e))throw e;xi("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function xd(e,t,n){const r=Ti(e);let s=qi.min(),a=sc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ti(e),s=r._s.get(n);return void 0!==s?so.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,Ll(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{a=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:qi.min(),n?a:sc())).next(e=>(Nd(r,ql(t),e),{documents:e,Ts:a})))}function Nd(e,t,n){let r=e.us.get(t)||qi.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class kd{constructor(){this.activeTargetIds=ic()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jd{constructor(){this.so=new kd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ed{_o(e){}shutdown(){}}class Sd{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){xi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){xi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Td=null;function Cd(){return null===Td?Td=268435456+Math.round(2147483648*Math.random()):Td++,"0x"+Td.toString(16)}const _d={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Id{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Pd="WebChannelConnection";class Ad extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const a=Cd(),i=this.xo(e,t.toUriEncodedString());xi("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),i,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,i,o,n).then(t=>(xi("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw ki("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",i,"request:",n),t})}Lo(e,t,n,r,s,a){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+yi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=_d[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=Cd();return new Promise((a,i)=>{const o=new ii;o.setWithCredentials(!0),o.listenOnce(li.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case ci.NO_ERROR:const t=o.getResponseJson();xi(Pd,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),a(t);break;case ci.TIMEOUT:xi(Pd,"RPC '".concat(e,"' ").concat(s," timed out")),i(new _i(Ci.DEADLINE_EXCEEDED,"Request time out"));break;case ci.HTTP_ERROR:const n=o.getStatus();if(xi(Pd,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ci).indexOf(t)>=0?t:Ci.UNKNOWN}(t.status);i(new _i(e,t.message))}else i(new _i(Ci.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new _i(Ci.UNAVAILABLE,"Connection failed."));break;default:Ei()}}finally{xi(Pd,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);xi(Pd,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Cd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=pi(),i=hi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");xi(Pd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=a.createWebChannel(c,o);let d=!1,h=!1;const p=new Id({Io:t=>{h?xi(Pd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(xi(Pd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),xi(Pd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,oi.EventType.OPEN,()=>{h||(xi(Pd,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.yo())}),m(u,oi.EventType.CLOSE,()=>{h||(h=!0,xi(Pd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.So())}),m(u,oi.EventType.ERROR,t=>{h||(h=!0,ki(Pd,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),p.So(new _i(Ci.UNAVAILABLE,"The operation could not be completed")))}),m(u,oi.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Si(!!s);const a=s,i=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(i){xi(Pd,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=Wc[e];if(void 0!==t)return Gc(t)}(t),s=i.message;void 0===n&&(n=Ci.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),h=!0,p.So(new _i(n,s)),u.close()}else xi(Pd,"RPC '".concat(e,"' stream ").concat(r," received:"),s),p.bo(s)}}),m(i,di.STAT_EVENT,t=>{t.stat===ui.PROXY?xi(Pd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ui.NOPROXY&&xi(Pd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.wo()},0),p}}function Rd(){return"undefined"!=typeof document?document:null}function Dd(e){return new hu(e,!0)}class Od{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&xi("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ld{constructor(e,t,n,r,s,a,i,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Od(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Ci.RESOURCE_EXHAUSTED?(Ni(t.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ci.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new _i(Ci.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return xi("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(xi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Md extends Ld{constructor(e,t,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ei()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Si(void 0===t||"string"==typeof t),So.fromBase64String(t||"")):(Si(void 0===t||t instanceof Buffer||t instanceof Uint8Array),So.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?Ci.UNKNOWN:Gc(e.code);return new _i(t,e.message||"")}(i);n=new su(r,s,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nu(e,r.document.name),a=vu(r.document.updateTime),i=r.document.createTime?vu(r.document.createTime):qi.min(),o=new el({mapValue:{fields:r.document.fields}}),l=nl.newFoundDocument(s,a,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new nu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Nu(e,r.document),a=r.readTime?vu(r.readTime):qi.min(),i=nl.newNoDocument(s,a),o=r.removedTargetIds||[];n=new nu([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Nu(e,r.document),a=r.removedTargetIds||[];n=new nu([],a,s,null)}else{if(!("filter"in t))return Ei();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,a=new Bc(r,s),i=e.targetId;n=new ru(i,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return qi.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?qi.min():t.readTime?vu(t.readTime):qi.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Eu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=_l(r)?{documents:_u(e,r)}:{query:Iu(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=fu(e,t.resumeToken);const r=pu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(qi.min())>0){n.readTime=mu(e,t.snapshotVersion.toTimestamp());const r=pu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ei()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Eu(this.serializer),t.removeTarget=e,this.a_(t)}}class Ud extends Ld{constructor(e,t,n,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Si(!!e.streamToken),this.lastStreamToken=e.streamToken,Si(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Si(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Si(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?vu(e.updateTime):vu(t);return n.isEqual(qi.min())&&(n=vu(t)),new kc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=vu(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Eu(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Cu(this.serializer,e))};this.a_(t)}}class Fd extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new _i(Ci.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,i]=s;return this.connection.Mo(e,bu(t,n),r,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _i(Ci.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[i,o]=a;return this.connection.Lo(e,bu(t,n),r,i,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _i(Ci.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Vd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Ni(t),this.D_=!1):xi("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class zd{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{Xd(this)&&(xi("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ti(e);t.L_.add(4),await Wd(t),t.q_.set("Unknown"),t.L_.delete(4),await Bd(t)}(this))})}),this.q_=new Vd(n,r)}}async function Bd(e){if(Xd(e))for(const t of e.B_)await t(!0)}async function Wd(e){for(const t of e.B_)await t(!1)}function qd(e,t){const n=Ti(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Yd(n)?Qd(n):fh(n).r_()&&Gd(n,t))}function Hd(e,t){const n=Ti(e),r=fh(n);n.N_.delete(t),r.r_()&&Kd(n,t),0===n.N_.size&&(r.r_()?r.o_():Xd(n)&&n.q_.set("Unknown"))}function Gd(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(qi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fh(e).A_(t)}function Kd(e,t){e.Q_.xe(t),fh(e).R_(t)}function Qd(e){e.Q_=new iu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),fh(e).start(),e.q_.v_()}function Yd(e){return Xd(e)&&!fh(e).n_()&&e.N_.size>0}function Xd(e){return 0===Ti(e).L_.size}function $d(e){e.Q_=void 0}async function Jd(e){e.q_.set("Online")}async function Zd(e){e.N_.forEach((t,n)=>{Gd(e,t)})}async function eh(e,t){$d(e),Yd(e)?(e.q_.M_(t),Qd(e)):e.q_.set("Unknown")}async function th(e,t,n){if(e.q_.set("Online"),t instanceof su&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){xi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await nh(e,n)}else if(t instanceof nu?e.Q_.Ke(t):t instanceof ru?e.Q_.He(t):e.Q_.We(t),!n.isEqual(qi.min()))try{const t=await gd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(So.EMPTY_BYTE_STRING,r.snapshotVersion)),Kd(e,t);const s=new zu(r.target,t,n,r.sequenceNumber);Gd(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){xi("RemoteStore","Failed to raise snapshot:",t),await nh(e,t)}}async function nh(e,t,n){if(!io(t))throw t;e.L_.add(1),await Wd(e),e.q_.set("Offline"),n||(n=()=>gd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{xi("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Bd(e)})}function rh(e,t){return t().catch(n=>nh(e,n,t))}async function sh(e){const t=Ti(e),n=gh(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;ah(t);)try{const e=await yd(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,ih(t,e)}catch(e){await nh(t,e)}oh(t)&&lh(t)}function ah(e){return Xd(e)&&e.O_.length<10}function ih(e,t){e.O_.push(t);const n=gh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function oh(e){return Xd(e)&&!gh(e).n_()&&e.O_.length>0}function lh(e){gh(e).start()}async function ch(e){gh(e).p_()}async function uh(e){const t=gh(e);for(const n of e.O_)t.m_(n.mutations)}async function dh(e,t,n){const r=e.O_.shift(),s=Vc.from(r,t,n);await rh(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await sh(e)}async function hh(e,t){t&&gh(e).V_&&await async function(e,t){if(function(e){return Hc(e)&&e!==Ci.ABORTED}(t.code)){const n=e.O_.shift();gh(e).s_(),await rh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await sh(e)}}(e,t),oh(e)&&lh(e)}async function ph(e,t){const n=Ti(e);n.asyncQueue.verifyOperationInProgress(),xi("RemoteStore","RemoteStore received new credentials");const r=Xd(n);n.L_.add(3),await Wd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Bd(n)}async function mh(e,t){const n=Ti(e);t?(n.L_.delete(2),await Bd(n)):t||(n.L_.add(2),await Wd(n),n.q_.set("Unknown"))}function fh(e){return e.K_||(e.K_=function(e,t,n){const r=Ti(e);return r.w_(),new Md(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Jd.bind(null,e),Ro:Zd.bind(null,e),mo:eh.bind(null,e),d_:th.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Yd(e)?Qd(e):e.q_.set("Unknown")):(await e.K_.stop(),$d(e))})),e.K_}function gh(e){return e.U_||(e.U_=function(e,t,n){const r=Ti(e);return r.w_(),new Ud(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ch.bind(null,e),mo:hh.bind(null,e),f_:uh.bind(null,e),g_:dh.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await sh(e)):(await e.U_.stop(),e.O_.length>0&&(xi("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class vh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const a=Date.now()+n,i=new vh(e,t,a,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _i(Ci.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yh(e,t){if(Ni("AsyncQueue","".concat(t,": ").concat(e)),io(e))return new _i(Ci.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class bh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Yi.comparator(t.key,n.key):(e,t)=>Yi.comparator(e.key,t.key),this.keyedMap=$l(),this.sortedSet=new bo(this.comparator)}static emptySet(e){return new bh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new bh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class wh{constructor(){this.W_=new bo(Yi.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ei():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class xh{constructor(e,t,n,r,s,a,i,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=i,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new xh(e,t,bh.emptySet(t),a,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Nh{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kh{constructor(){this.queries=jh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Ti(e),r=n.queries;n.queries=jh(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new _i(Ci.ABORTED,"Firestore shutting down"))}}function jh(){return new Kl(e=>zl(e),Vl)}async function Eh(e,t){const n=Ti(e);let r=3;const s=t.query;let a=n.queries.get(s);a?!a.H_()&&t.J_()&&(r=2):(a=new Nh,r=t.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=yh(e,"Initialization of query '".concat(Bl(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,a),a.j_.push(t),t.Z_(n.onlineState),a.z_&&t.X_(a.z_)&&_h(n)}async function Sh(e,t){const n=Ti(e),r=t.query;let s=3;const a=n.queries.get(r);if(a){const e=a.j_.indexOf(t);e>=0&&(a.j_.splice(e,1),0===a.j_.length?s=t.J_()?0:1:!a.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Th(e,t){const n=Ti(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&_h(n)}function Ch(e,t,n){const r=Ti(e),s=r.queries.get(t);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(t)}function _h(e){e.Y_.forEach(e=>{e.next()})}var Ih,Ph;(Ph=Ih||(Ih={})).ea="default",Ph.Cache="cache";class Ah{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new xh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=xh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ih.Cache}}class Rh{constructor(e){this.key=e}}class Dh{constructor(e){this.key=e}}class Oh{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=sc(),this.mutatedKeys=sc(),this.Aa=Hl(e),this.Ra=new bh(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new wh,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=r,i=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Wl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.ga(c,u)||(n.track({type:2,doc:u}),p=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(o||l)&&(i=!0)),p&&(u?(a=a.add(u),s=h?s.add(e):s.delete(e)):(a=a.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:a,fa:n,ns:i,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ei()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const i=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==a.length||l?{snapshot:new xh(this.query,e.Ra,s,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:i}:{wa:i}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=sc(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Dh(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Rh(n))}),t}ba(e){this.Ta=e.Ts,this.da=sc();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Lh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Mh{constructor(e){this.key=e,this.va=!1}}class Uh{constructor(e,t,n,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Kl(e=>zl(e),Vl),this.Ma=new Map,this.xa=new Set,this.Oa=new bo(Yi.comparator),this.Na=new Map,this.La=new td,this.Ba={},this.ka=new Map,this.qa=Qu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Fh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ip(e);let s;const a=r.Fa.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await zh(r,t,n,!0),s}async function Vh(e,t){const n=ip(e);await zh(n,t,!0,!1)}async function zh(e,t,n,r){const s=await bd(e.localStore,Ll(t)),a=s.targetId,i=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await Bh(e,t,a,"current"===i,s.resumeToken)),e.isPrimaryClient&&n&&qd(e.remoteStore,s),o}async function Bh(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await xd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const a=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,a,i);return ep(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const a=await xd(e.localStore,t,!0),i=new Oh(t,a.Ts),o=i.ma(a.documents),l=tu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=i.applyChanges(o,e.isPrimaryClient,l);ep(e,n,c.wa);const u=new Lh(t,n,i);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Wh(e,t,n){const r=Ti(e),s=r.Fa.get(t),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(e=>!Vl(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hd(r.remoteStore,s.targetId),Jh(r,s.targetId)}).catch(ro)):(Jh(r,s.targetId),await wd(r.localStore,s.targetId,!0))}async function qh(e,t){const n=Ti(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hd(n.remoteStore,r.targetId))}async function Hh(e,t){const n=Ti(e);try{const e=await function(e,t){const n=Ti(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const i=[];t.targetChanges.forEach((a,o)=>{const l=s.get(o);if(!l)return;i.push(n.Ur.removeMatchingKeys(e,a.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,a.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(So.EMPTY_BYTE_STRING,qi.min()).withLastLimboFreeSnapshotVersion(qi.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,a)&&i.push(n.Ur.updateTargetData(e,c))});let o=Yl(),l=sc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),i.push(vd(e,a,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(qi.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));i.push(t)}return so.waitFor(i).next(()=>a.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Si(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Si(r.va):e.removedDocuments.size>0&&(Si(r.va),r.va=!1))}),await rp(n,e,t)}catch(e){await ro(e)}}function Gh(e,t,n){const r=Ti(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Ti(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&_h(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Kh(e,t,n){const r=Ti(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),a=s&&s.key;if(a){let e=new bo(Yi.comparator);e=e.insert(a,nl.newNoDocument(a,qi.min()));const n=sc().add(a),s=new eu(qi.min(),new Map,new bo(zi),e,n);await Hh(r,s),r.Oa=r.Oa.remove(a),r.Na.delete(t),np(r)}else await wd(r.localStore,t,!1).then(()=>Jh(r,t,n)).catch(ro)}async function Qh(e,t){const n=Ti(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ti(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,a=s.keys();let i=so.resolve();return a.forEach(e=>{i=i.next(()=>r.getEntry(t,e)).next(t=>{const a=n.docVersions.get(e);Si(null!==a),t.version.compareTo(a)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),i.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=sc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);$h(n,r,null),Xh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rp(n,e)}catch(e){await ro(e)}}async function Yh(e,t,n){const r=Ti(e);try{const e=await function(e,t){const n=Ti(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Si(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);$h(r,t,n),Xh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await rp(r,e)}catch(n){await ro(n)}}function Xh(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function $h(e,t,n){const r=Ti(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function Jh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Zh(e,t)})}function Zh(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Hd(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),np(e))}function ep(e,t,n){for(const r of n)r instanceof Rh?(e.La.addReference(r.key,t),tp(e,r)):r instanceof Dh?(xi("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Zh(e,r.key)):Ei()}function tp(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(xi("SyncEngine","New document in limbo: "+n),e.xa.add(r),np(e))}function np(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Yi(Gi.fromString(t)),r=e.qa.next();e.Na.set(r,new Mh(n)),e.Oa=e.Oa.insert(n,r),qd(e.remoteStore,new zu(Ll(Al(n.path)),r,"TargetPurposeLimboResolution",oo.oe))}}async function rp(e,t,n){const r=Ti(e),s=[],a=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{i.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=ud.Wi(o.targetId,e);a.push(t)}}))}),await Promise.all(i),r.Ca.d_(s),await async function(e,t){const n=Ti(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>so.forEach(t,t=>so.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>so.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!io(e))throw e;xi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,a))}async function sp(e,t){const n=Ti(e);if(!n.currentUser.isEqual(t)){xi("SyncEngine","User change. New user:",t.toKey());const e=await fd(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new _i(Ci.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await rp(n,e.hs)}}function ap(e,t){const n=Ti(e),r=n.Na.get(t);if(r&&r.va)return sc().add(r.key);{let e=sc();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function ip(e){const t=Ti(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ap.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kh.bind(null,t),t.Ca.d_=Th.bind(null,t.eventManager),t.Ca.$a=Ch.bind(null,t.eventManager),t}function op(e){const t=Ti(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Yh.bind(null,t),t}class lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return md(this.persistence,new hd,e.initialUser,this.serializer)}Ga(e){return new od(cd.Zr,this.serializer)}Wa(e){return new jd}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lp.provider={build:()=>new lp};class cp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Gh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=sp.bind(null,this.syncEngine),await mh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new kh}createDatastore(e){const t=Dd(e.databaseInfo.databaseId),n=function(e){return new Ad(e)}(e.databaseInfo);return function(e,t,n,r){return new Fd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new zd(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Gh(this.syncEngine,e,0),Sd.D()?new Sd:new Ed)}createSyncEngine(e,t){return function(e,t,n,r,s,a,i){const o=new Uh(e,t,n,r,s,a);return i&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ti(e);xi("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Wd(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}cp.provider={build:()=>new cp};class up{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class dp{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=vi.UNAUTHENTICATED,this.clientId=Vi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{xi("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(xi("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=yh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hp(e,t){e.asyncQueue.verifyOperationInProgress(),xi("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await fd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function pp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mp(e);xi("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>ph(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>ph(t.remoteStore,n)),e._onlineComponents=t}async function mp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xi("FirestoreClient","Using user provided OfflineComponentProvider");try{await hp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ci.FAILED_PRECONDITION||e.code===Ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ki("Error using user provided cache. Falling back to memory cache: "+n),await hp(e,new lp)}}else xi("FirestoreClient","Using default OfflineComponentProvider"),await hp(e,new lp);return e._offlineComponents}async function fp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xi("FirestoreClient","Using user provided OnlineComponentProvider"),await pp(e,e._uninitializedComponentsProvider._online)):(xi("FirestoreClient","Using default OnlineComponentProvider"),await pp(e,new cp))),e._onlineComponents}function gp(e){return fp(e).then(e=>e.syncEngine)}async function vp(e){const t=await fp(e),n=t.eventManager;return n.onListen=Fh.bind(null,t.syncEngine),n.onUnlisten=Wh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Vh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=qh.bind(null,t.syncEngine),n}function yp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ii;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const a=new up({next:o=>{a.Za(),t.enqueueAndForget(()=>Sh(e,i));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new _i(Ci.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new _i(Ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),i=new Ah(Al(n.path),a,{includeMetadataChanges:!0,_a:!0});return Eh(e,i)}(await vp(e),e.asyncQueue,t,n,r)),r.promise}function bp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ii;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const a=new up({next:n=>{a.Za(),t.enqueueAndForget(()=>Sh(e,i)),n.fromCache&&"server"===r.source?s.reject(new _i(Ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new Ah(n,a,{includeMetadataChanges:!0,_a:!0});return Eh(e,i)}(await vp(e),e.asyncQueue,t,n,r)),r.promise}function wp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const xp=new Map;function Np(e,t,n){if(!n)throw new _i(Ci.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function kp(e){if(!Yi.isDocumentKey(e))throw new _i(Ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function jp(e){if(Yi.isDocumentKey(e))throw new _i(Ci.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ep(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ei()}function Sp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _i(Ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ep(e);throw new _i(Ci.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Tp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new _i(Ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _i(Ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new _i(Ci.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new _i(Ci.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new _i(Ci.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new _i(Ci.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _i(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _i(Ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ai;switch(e.type){case"firstParty":return new Li(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new _i(Ci.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xp.get(e);t&&(xi("ComponentProvider","Removing Datastore"),xp.delete(e),t.terminate())}(this),Promise.resolve()}}function _p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const a=(e=Sp(e,Cp))._getSettings(),i="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==i&&ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:i,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=vi.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new _i(Ci.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new vi(a)}e._authCredentials=new Ri(new Pi(t,n))}}class Ip{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ip(this.firestore,e,this._query)}}class Pp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ap(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pp(this.firestore,e,this._key)}}class Ap extends Ip{constructor(e,t,n){super(e,t,Al(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pp(this.firestore,null,new Yi(e))}withConverter(e){return new Ap(this.firestore,e,this._path)}}function Rp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=it(e),Np("collection","path",t),e instanceof Cp){const n=Gi.fromString(t,...r);return jp(n),new Ap(e,null,n)}{if(!(e instanceof Pp||e instanceof Ap))throw new _i(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Gi.fromString(t,...r));return jp(n),new Ap(e.firestore,null,n)}}function Dp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=it(e),1===arguments.length&&(t=Vi.newId()),Np("doc","path",t),e instanceof Cp){const n=Gi.fromString(t,...r);return kp(n),new Pp(e,null,new Yi(n))}{if(!(e instanceof Pp||e instanceof Ap))throw new _i(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Gi.fromString(t,...r));return kp(n),new Pp(e.firestore,e instanceof Ap?e.converter:null,new Yi(n))}}class Op{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Od(this,"async_queue_retry"),this.Vu=()=>{const e=Rd();e&&xi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Rd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Rd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(tj){if(!io(tj))throw tj;xi("AsyncQueue","Operation failed with retryable error: "+tj)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ni("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=vh.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Ei()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Lp extends Cp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Op,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Op(e),this._firestoreClient=void 0,await e}}}function Mp(e){if(e._terminated)throw new _i(Ci.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Up(e),e._firestoreClient}function Up(e){var t,n,r;const s=e._freezeSettings(),a=function(e,t,n,r){return new Do(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new dp(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Fp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fp(So.fromBase64String(e))}catch(e){throw new _i(Ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Fp(So.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new _i(Ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qi(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zp{constructor(e){this._methodName=e}}class Bp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _i(Ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _i(Ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zi(this._lat,e._lat)||zi(this._long,e._long)}}class Wp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const qp=/^__.*__$/;class Hp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ac(e,this.data,t,this.fieldTransforms)}}class Gp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ei()}}class Qp{constructor(e,t,n,r,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Kp(this.Cu)&&qp.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Yp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Dd(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Qp({Cu:e,methodName:t,qu:n,path:Qi.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xp(e){const t=e._freezeSettings(),n=Dd(e._databaseId);return new Yp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $p(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.Qu(a.merge||a.mergeFields?2:0,t,n,s);cm("Data must be an object, but it was:",i,r);const o=om(r,i);let l,c;if(a.merge)l=new jo(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const s=um(t,r,n);if(!i.contains(s))throw new _i(Ci.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));mm(e,s)||e.push(s)}l=new jo(e),c=i.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=i.fieldTransforms;return new Hp(new el(o),l,c)}class Jp extends zp{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jp}}function Zp(e,t,n){return new Qp({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class em extends zp{_toFieldTransform(e){return new Nc(e.path,new mc)}isEqual(e){return e instanceof em}}class tm extends zp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Zp(this,e,!0),n=this.Ku.map(e=>im(e,t)),r=new fc(n);return new Nc(e.path,r)}isEqual(e){return e instanceof tm&&Ze(this.Ku,e.Ku)}}class nm extends zp{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new bc(e.serializer,cc(e.serializer,this.$u));return new Nc(e.path,t)}isEqual(e){return e instanceof nm&&this.$u===e.$u}}function rm(e,t,n,r){const s=e.Qu(1,t,n);cm("Data must be an object, but it was:",s,r);const a=[],i=el.empty();vo(r,(e,r)=>{const o=hm(t,e,n);r=it(r);const l=s.Nu(o);if(r instanceof Jp)a.push(o);else{const e=im(r,l);null!=e&&(a.push(o),i.set(o,e))}});const o=new jo(a);return new Gp(i,o,s.fieldTransforms)}function sm(e,t,n,r,s,a){const i=e.Qu(1,t,n),o=[um(t,r,n)],l=[s];if(a.length%2!=0)throw new _i(Ci.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<a.length;h+=2)o.push(um(t,a[h])),l.push(a[h+1]);const c=[],u=el.empty();for(let h=o.length-1;h>=0;--h)if(!mm(c,o[h])){const e=o[h];let t=l[h];t=it(t);const n=i.Nu(e);if(t instanceof Jp)c.push(e);else{const r=im(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new jo(c);return new Gp(u,d,i.fieldTransforms)}function am(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return im(n,e.Qu(r?4:3,t))}function im(e,t){if(lm(e=it(e)))return cm("Unsupported field value:",t,e),om(e,t);if(e instanceof zp)return function(e,t){if(!Kp(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=im(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=it(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return cc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Wi.fromDate(e);return{timestampValue:mu(t.serializer,n)}}if(e instanceof Wi){const n=new Wi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mu(t.serializer,n)}}if(e instanceof Bp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fp)return{bytesValue:fu(t.serializer,e._byteString)};if(e instanceof Pp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:yu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Wp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return oc(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Ep(e)))}(e,t)}function om(e,t){const n={};return yo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vo(e,(e,r)=>{const s=im(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function lm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Wi||e instanceof Bp||e instanceof Fp||e instanceof Pp||e instanceof zp||e instanceof Wp)}function cm(e,t,n){if(!lm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ep(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function um(e,t,n){if((t=it(t))instanceof Vp)return t._internalPath;if("string"==typeof t)return hm(e,t);throw pm("Field path arguments must be of type string or ",e,!1,void 0,n)}const dm=new RegExp("[~\\*/\\[\\]]");function hm(e,t,n){if(t.search(dm)>=0)throw pm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Vp(...t.split("."))._internalPath}catch(r){throw pm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function pm(e,t,n,r,s){const a=r&&!r.isEmpty(),i=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=" in field ".concat(r)),i&&(l+=" in document ".concat(s)),l+=")"),new _i(Ci.INVALID_ARGUMENT,o+e+l)}function mm(e,t){return e.some(e=>e.isEqual(t))}class fm{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gm extends fm{data(){return super.data()}}function vm(e,t){return"string"==typeof t?hm(e,t):t instanceof Vp?t._internalPath:t._delegate._internalPath}function ym(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _i(Ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bm{}class wm extends bm{}function xm(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];t instanceof bm&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof jm).length,n=e.filter(e=>e instanceof Nm).length;if(t>1||t>0&&n>0)throw new _i(Ci.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e}class Nm extends wm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Nm(e,t,n)}_apply(e){const t=this._parse(e);return _m(e._query,t),new Ip(e.firestore,e.converter,Ul(e._query,t))}_parse(e){const t=Xp(e.firestore),n=function(e,t,n,r,s,a,i){let o;if(s.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new _i(Ci.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Cm(i,a);const t=[];for(const n of i)t.push(Tm(r,e,n));o={arrayValue:{values:t}}}else o=Tm(r,e,i)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Cm(i,a),o=am(n,t,i,"in"===a||"not-in"===a);return cl.create(s,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function km(e,t,n){const r=t,s=vm("where",e);return Nm._create(s,r,n)}class jm extends bm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ul.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)_m(n,s),n=Ul(n,s)}(e._query,t),new Ip(e.firestore,e.converter,Ul(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Em extends wm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Em(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new _i(Ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _i(Ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new il(t,n)}(e._query,this._field,this._direction);return new Ip(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Il(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Sm(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=vm("orderBy",e);return Em._create(n,t)}function Tm(e,t,n){if("string"==typeof(n=it(n))){if(""===n)throw new _i(Ci.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dl(t)&&-1!==n.indexOf("/"))throw new _i(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Gi.fromString(n));if(!Yi.isDocumentKey(r))throw new _i(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ho(e,new Yi(r))}if(n instanceof Pp)return Ho(e,n._key);throw new _i(Ci.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ep(n),"."))}function Cm(e,t){if(!Array.isArray(e)||0===e.length)throw new _i(Ci.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function _m(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new _i(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new _i(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Im{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _o(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ei()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return vo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>_o(e.doubleValue));return new Wp(s)}convertGeoPoint(e){return new Bp(_o(e.latitude),_o(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ao(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ro(e));default:return null}}convertTimestamp(e){const t=Co(e);return new Wi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Gi.fromString(e);Si(Vu(n));const r=new Oo(n.get(1),n.get(3)),s=new Yi(n.popFirst(5));return r.isEqual(t)||Ni("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Pm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Am{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rm extends fm{constructor(e,t,n,r,s,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Dm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Dm extends Rm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Om{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Am(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Dm(this._firestore,this._userDataWriter,n.key,n,new Am(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _i(Ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Dm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Am(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Dm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Am(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,a=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Lm(t.type),doc:r,oldIndex:s,newIndex:a}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Lm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ei()}}function Mm(e){e=Sp(e,Pp);const t=Sp(e.firestore,Lp);return yp(Mp(t),e._key).then(n=>Wm(t,e,n))}class Um extends Im{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pp(this.firestore,null,t)}}function Fm(e){e=Sp(e,Ip);const t=Sp(e.firestore,Lp),n=Mp(t),r=new Um(t);return ym(e._query),bp(n,e._query).then(n=>new Om(t,r,e,n))}function Vm(e,t,n){e=Sp(e,Pp);const r=Sp(e.firestore,Lp),s=Pm(e.converter,t,n);return Bm(r,[$p(Xp(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,jc.none())])}function zm(e,t,n){e=Sp(e,Pp);const r=Sp(e.firestore,Lp),s=Xp(r);let a;for(var i=arguments.length,o=new Array(i>3?i-3:0),l=3;l<i;l++)o[l-3]=arguments[l];return a="string"==typeof(t=it(t))||t instanceof Vp?sm(s,"updateDoc",e._key,t,n,o):rm(s,"updateDoc",e._key,t),Bm(r,[a.toMutation(e._key,jc.exists(!0))])}function Bm(e,t){return function(e,t){const n=new Ii;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=op(e);try{const e=await function(e,t){const n=Ti(e),r=Wi.now(),s=t.reduce((e,t)=>e.add(t.key),sc());let a,i;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Yl(),l=sc();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{a=s;const i=[];for(const e of t){const t=Ic(e,a.get(e.key).overlayedDocument);null!=t&&i.push(new Rc(e.key,t,tl(t.value.mapValue),jc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)}).next(t=>{i=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:i.batchId,changes:Jl(a)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new bo(zi)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await rp(r,e.changes),await sh(r.remoteStore)}catch(e){const t=yh(e,"Failed to persist write");n.reject(t)}}(await gp(e),t,n)),n.promise}(Mp(e),t)}function Wm(e,t,n){const r=n.docs.get(t._key),s=new Um(e);return new Rm(e,s,t._key,r,new Am(n.hasPendingWrites,n.fromCache),t.converter)}function qm(){return new em("serverTimestamp")}function Hm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tm("arrayUnion",t)}function Gm(e){return new nm("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){yi=e}(Tn),Nn(new ot("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const a=e.getProvider("app").getImmediate(),i=new Lp(new Di(e.getProvider("auth-internal")),new Ui(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _i(Ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(e.options.projectId,t)}(a,r),a);return s=Object.assign({useFetchStreams:t},s),i._setSettings(s),i},"PUBLIC").setMultipleInstances(!0)),In(gi,"4.7.3",e),In(gi,"4.7.3","esm2017")}();const Km=Cn({apiKey:"AIzaSyCifrqszkwPzpbMA9sy3RhKjGSPCS-wVDo",authDomain:"squashclub-e8a0c.firebaseapp.com",projectId:"squashclub-e8a0c",storageBucket:"squashclub-e8a0c.firebasestorage.app",messagingSenderId:"397341468790",appId:"1:397341468790:web:5fce36506579b808a91757"}),Qm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n();const t=kn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=kn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ze(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Kn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ya,persistence:[oa,qs,Gs]}),r=He("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Za)return;const r=null===t||void 0===t?void 0:t.token;ei!==r&&(ei=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){it(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){it(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const a=We("auth");return a&&us(n,"http://".concat(a)),n}(Km),Ym=function(e,t){const n="string"==typeof e?e:t||"(default)",r=kn("object"==typeof e?e:_n(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=We(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&_p(r,...e)}return r}(Km),Xm=new Ss;Xm.addScope("profile"),Xm.addScope("email"),Xm.setCustomParameters({prompt:"select_account"});const $m=async(e,t)=>{try{console.log("createUserProfile called for:",e),console.log("Profile data:",t);const n=Dp(Ym,"users",e),r=Nt(Nt({},t),{},{elo:1200,matchesPlayed:0,matchesWon:0,tournamentsPlayed:0,tournaments:[],createdAt:qm(),updatedAt:qm()});return console.log("Writing user data to Firestore:",r),await Vm(n,r),console.log("\u2705 User profile created successfully"),{success:!0}}catch(n){return console.error("Error creating user profile:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),{success:!1,error:n.message}}},Jm=async e=>{try{console.log("getUserProfile called for:",e);const t=Dp(Ym,"users",e),n=await Mm(t);return n.exists()?(console.log("\u2705 User profile found"),Nt({id:n.id},n.data())):(console.log("\u274c User profile not found"),null)}catch(t){return console.error("Error getting user profile:",t),null}},Zm=async()=>{try{const e=xm(Rp(Ym,"users"),Sm("createdAt","desc")),t=await Fm(e),n=[];return t.forEach(e=>{n.push(Nt({id:e.id},e.data()))}),n}catch(e){return console.error("Error getting all users:",e),[]}},ef=async e=>{try{const n=Dp(Ym,"users",e);return await(t=n,Bm(Sp(t.firestore,Lp),[new Mc(t._key,jc.none())])),console.log("User removed successfully:",e),{success:!0}}catch(n){return console.error("Error removing user:",n),{success:!1,error:n.message}}var t},tf=async(e,t)=>{if("completed"===t.status&&t.completedAt)return"completed";const n=(e=>{if("completed"===e.status&&e.completedAt)return"completed";if(!e.date||!e.time)return e.status;const t=new Date,n=new Date(e.date),[r,s]=e.time.split(":").map(Number),a=new Date(n);a.setHours(r,s,0,0);const i=new Date(n);return i.setDate(i.getDate()+1),i.setHours(0,0,0,0),t<a?"upcoming":t>=a&&t<i?"active":"completed"})(t);if(n!==t.status)try{const t=Dp(Ym,"tournaments",e);return await zm(t,{status:n,updatedAt:qm()}),n}catch(r){return console.error("Error updating tournament status:",r),t.status}return t.status},nf=async e=>{try{const t=Dp(Ym,"tournaments",e),n=await Mm(t);if(n.exists()){const t=Nt({id:n.id},n.data()),r=await tf(e,t);return t.status=r,t}return null}catch(t){return console.error("Error getting tournament:",t),null}},rf=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t;const n=[];e.date&&n.push(km("date","==",e.date)),n.push(Sm("date","desc")),t=xm(Rp(Ym,"tournaments"),...n);const r=await Fm(t),s=[];for(const a of r.docs){const t=Nt({id:a.id},a.data());t.status=await tf(a.id,t),e.status&&t.status!==e.status||s.push(t)}return s}catch(t){return console.error("Error getting tournaments:",t),[]}},sf=async(e,t,n)=>{try{const r=Dp(Ym,"tournaments",e);await zm(r,{participants:Hm({userId:t,name:"".concat(n.firstName," ").concat(n.lastName),elo:n.elo||1200,joinedAt:(new Date).toISOString()}),updatedAt:qm()});const s=Dp(Ym,"users",t);return await zm(s,{tournaments:Hm(e),updatedAt:qm()}),{success:!0}}catch(r){return console.error("Error joining tournament:",r),{success:!1,error:r.message}}},af=function(e,t,n){let r=32;(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)<30?r=40:e>=2400&&(r=20);const s=1/(1+Math.pow(10,(t-e)/400)),a=n?1:0;return Math.round(r*(a-s))},of=async(e,t)=>{try{const n=Qm.currentUser;if(!n)throw new Error("User not authenticated");const r=Dp(Rp(Ym,"matches")),s=r.id;if(await Vm(r,Nt(Nt({},e),{},{id:s,format:t,players:[e.player1Id,e.player2Id],createdBy:n.uid,status:"pending",scores:[],winner:null,createdAt:qm(),updatedAt:qm()})),e.tournamentId){const t=Dp(Ym,"tournaments",e.tournamentId);await zm(t,{matches:Hm(s),updatedAt:qm()})}return console.log("Match created successfully:",s),{success:!0,matchId:s}}catch(n){return console.error("Error creating match:",n),{success:!1,error:n.message}}},lf=async e=>{try{const t=xm(Rp(Ym,"matches"),km("tournamentId","==",e),Sm("createdAt","desc")),n=await Fm(t),r=[];return n.forEach(e=>{r.push(Nt({id:e.id},e.data()))}),r}catch(t){return console.error("Error getting matches:",t),[]}},cf=async e=>{try{const t=xm(Rp(Ym,"matches"),km("players","array-contains",e),Sm("createdAt","desc")),n=await Fm(t),r=[];return n.forEach(e=>{r.push(Nt({id:e.id},e.data()))}),r}catch(t){return console.error("Error getting player matches:",t),[]}},uf=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{const t=xm(Rp(Ym,"users"),km("role","==","player"),Sm("elo","desc")),n=await Fm(t),r=[];let s=1;return n.forEach(t=>{if(s<=e){const e=t.data();r.push({id:t.id,rank:s,name:"".concat(e.firstName," ").concat(e.lastName),elo:e.elo,matchesPlayed:e.matchesPlayed,matchesWon:e.matchesWon,winRate:e.matchesPlayed>0?Math.round(e.matchesWon/e.matchesPlayed*100):0}),s++}}),r}catch(t){return console.error("Error getting leaderboard:",t),[]}},df=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!e||0===e.length)return[];const n=[...e].sort((e,t)=>(t.elo||1200)-(e.elo||1200)),r=n.length;if(r<=t)return[n];let s=Math.floor(r/t);for(0===s&&(s=1);s<r;){if(Math.ceil(r/s)<=t+1)break;s++}console.log("Generating ".concat(s," groups for ").concat(r," participants (target size: ").concat(t,")"));const a=Math.floor(r/s),i=r%s,o=Array.from({length:s},()=>[]);let l=0;for(let c=0;c<s;c++){const e=c<i?a+1:a;for(let t=0;t<e&&l<r;t++)o[c].push(n[l]),l++}return console.log("Group sizes:",o.map(e=>e.length).join(", ")),console.log("Group ELO ranges:",o.map((e,t)=>{var n,r;const s=(null===(n=e[0])||void 0===n?void 0:n.elo)||0,a=(null===(r=e[e.length-1])||void 0===r?void 0:r.elo)||0;return"Group ".concat(String.fromCharCode(65+t),": ").concat(s,"-").concat(a)}).join(", ")),o},hf=async(e,t,n,r)=>{const s=[];for(let a=0;a<n.length;a++)for(let i=a+1;i<n.length;i++){const o={tournamentId:e,player1Id:n[a].userId,player1Name:n[a].name,player2Id:n[i].userId,player2Name:n[i].name,groupName:r},l=await of(o,t);l.success&&s.push(l.matchId)}return s},pf=async e=>{try{const t=xm(Rp(Ym,"individualMatches"),km("players","array-contains",e),Sm("createdAt","desc")),n=await Fm(t),r=[];return n.forEach(e=>{r.push(Nt({id:e.id},e.data()))}),r}catch(t){return console.error("Error getting individual matches:",t),[]}},mf="undefined"!==typeof document,ff=mf?s.useLayoutEffect:s.useEffect;function gf(){const e=(0,s.useRef)(!1);return ff(()=>(e.current=!0,()=>{e.current=!1}),[]),e}const vf=e=>e;class yf{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const bf=["prepare","read","update","preRender","render","postRender"];const{schedule:wf,cancel:xf,state:Nf,steps:kf}=function(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=bf.reduce((e,t)=>(e[t]=function(e){let t=new yf,n=new yf,r=0,s=!1,a=!1;const i=new WeakSet,o={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s,o=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),o.add(e)&&a&&s&&(r=t.order.length),e},cancel:e=>{n.remove(e),i.delete(e)},process:l=>{if(s)a=!0;else{if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),i.has(r)&&(o.schedule(r),e())}s=!1,a&&(a=!1,o.process(l))}}};return o}(()=>n=!0),e),{}),i=e=>a[e].process(s),o=()=>{const a=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(a-s.timestamp,40),1),s.timestamp=a,s.isProcessing=!0,bf.forEach(i),s.isProcessing=!1,n&&t&&(r=!1,e(o))},l=bf.reduce((t,i)=>{const l=a[i];return t[i]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,s.isProcessing||e(o)),l.schedule(t,a,i)},t},{});return{schedule:l,cancel:e=>bf.forEach(t=>a[t].cancel(e)),state:s,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:vf,!0);const jf=(0,s.createContext)(null);function Ef(e){const t=(0,s.useRef)(null);return null===t.current&&(t.current=e()),t.current}class Sf extends s.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Tf(e){let{children:t,isPresent:n}=e;const r=(0,s.useId)(),a=(0,s.useRef)(null),i=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)(()=>{const{width:e,height:t,top:s,left:o}=i.current;if(n||!a.current||!e||!t)return;a.current.dataset.motionPopId=r;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(o,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}},[n]),s.createElement(Sf,{isPresent:n,childRef:a,sizeRef:i},s.cloneElement(t,{ref:a}))}const Cf=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:o,mode:l}=e;const c=Ef(_f),u=(0,s.useId)(),d=(0,s.useMemo)(()=>({id:u,initial:n,isPresent:r,custom:i,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;a&&a()},register:e=>(c.set(e,!1),()=>c.delete(e))}),o?void 0:[r]);return(0,s.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[r]),s.useEffect(()=>{!r&&!c.size&&a&&a()},[r]),"popLayout"===l&&(t=s.createElement(Tf,{isPresent:r},t)),s.createElement(jf.Provider,{value:d},t)};function _f(){return new Map}const If=(0,s.createContext)({});let Pf=vf,Af=vf;const Rf=e=>e.key||"";const Df=e=>{let{children:t,custom:n,initial:r=!0,onExitComplete:a,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:l="sync"}=e;Af(!i,"Replace exitBeforeEnter with mode='wait'");const c=(0,s.useContext)(If).forceRender||function(){const e=gf(),[t,n]=(0,s.useState)(0),r=(0,s.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,s.useCallback)(()=>wf.postRender(r),[r]),t]}()[0],u=gf(),d=function(e){const t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}(t);let h=d;const p=(0,s.useRef)(new Map).current,m=(0,s.useRef)(h),f=(0,s.useRef)(new Map).current,g=(0,s.useRef)(!0);if(ff(()=>{g.current=!1,function(e,t){e.forEach(e=>{const n=Rf(e);t.set(n,e)})}(d,f),m.current=h}),function(e){(0,s.useEffect)(()=>()=>e(),[])}(()=>{g.current=!0,f.clear(),p.clear()}),g.current)return s.createElement(s.Fragment,null,h.map(e=>s.createElement(Cf,{key:Rf(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:o,mode:l},e)));h=[...h];const v=m.current.map(Rf),y=d.map(Rf),b=v.length;for(let s=0;s<b;s++){const e=v[s];-1!==y.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===l&&p.size&&(h=[]),p.forEach((e,t)=>{if(-1!==y.indexOf(t))return;const r=f.get(t);if(!r)return;const i=v.indexOf(t);let g=e;if(!g){const e=()=>{p.delete(t);const e=Array.from(f.keys()).filter(e=>!y.includes(e));if(e.forEach(e=>f.delete(e)),m.current=d.filter(n=>{const r=Rf(n);return r===t||e.includes(r)}),!p.size){if(!1===u.current)return;c(),a&&a()}};g=s.createElement(Cf,{key:Rf(r),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:o,mode:l},r),p.set(t,g)}h.splice(i,0,g)}),h=h.map(e=>{const t=e.key;return p.has(t)?e:s.createElement(Cf,{key:Rf(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)}),s.createElement(s.Fragment,null,p.size?h:h.map(e=>(0,s.cloneElement)(e)))},Of=(0,s.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Lf=(0,s.createContext)({}),Mf=(0,s.createContext)({strict:!1}),Uf=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Ff="data-"+Uf("framerAppearId");function Vf(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function zf(e){return"string"===typeof e||Array.isArray(e)}function Bf(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const Wf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qf=["initial",...Wf];function Hf(e){return Bf(e.animate)||qf.some(t=>zf(e[t]))}function Gf(e){return Boolean(Hf(e)||e.variants)}function Kf(e){const{initial:t,animate:n}=function(e,t){if(Hf(e)){const{initial:t,animate:n}=e;return{initial:!1===t||zf(t)?t:void 0,animate:zf(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,s.useContext)(Lf));return(0,s.useMemo)(()=>({initial:t,animate:n}),[Qf(t),Qf(n)])}function Qf(e){return Array.isArray(e)?e.join(" "):e}const Yf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xf={};for(const rj in Yf)Xf[rj]={isEnabled:e=>Yf[rj].some(t=>!!e[t])};const $f=(0,s.createContext)({}),Jf=Symbol.for("motionComponentSymbol");function Zf(e){let{preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:a,Component:i}=e;t&&function(e){for(const t in e)Xf[t]=Nt(Nt({},Xf[t]),e[t])}(t);const o=(0,s.forwardRef)(function(e,o){let l;const c=Nt(Nt(Nt({},(0,s.useContext)(Of)),e),{},{layoutId:eg(e)}),{isStatic:u}=c,d=Kf(e),h=a(e,u);if(!u&&mf){d.visualElement=function(e,t,n,r){const{visualElement:a}=(0,s.useContext)(Lf),i=(0,s.useContext)(Mf),o=(0,s.useContext)(jf),l=(0,s.useContext)(Of).reducedMotion,c=(0,s.useRef)();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:a,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const u=c.current;(0,s.useInsertionEffect)(()=>{u&&u.update(n,o)});const d=(0,s.useRef)(Boolean(n[Ff]&&!window.HandoffComplete));return ff(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),(0,s.useEffect)(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}(i,h,c,n);const e=(0,s.useContext)($f),r=(0,s.useContext)(Mf).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,r,t,e))}return s.createElement(Lf.Provider,{value:d},l&&d.visualElement?s.createElement(l,Nt({visualElement:d.visualElement},c)):null,r(i,e,function(e,t,n){return(0,s.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):Vf(n)&&(n.current=r))},[t])}(h,d.visualElement,o),h,u,d.visualElement))});return o[Jf]=i,o}function eg(e){let{layoutId:t}=e;const n=(0,s.useContext)(If).id;return n&&void 0!==t?n+"-"+t:t}function tg(e){function t(t){return Zf(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const ng=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rg(e){return"string"===typeof e&&!e.includes("-")&&!!(ng.indexOf(e)>-1||/[A-Z]/.test(e))}const sg={};const ag=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ig=new Set(ag);function og(e,t){let{layout:n,layoutId:r}=t;return ig.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!sg[e]||"opacity"===e)}const lg=e=>Boolean(e&&e.getVelocity),cg={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ug=ag.length;const dg=e=>t=>"string"===typeof t&&t.startsWith(e),hg=dg("--"),pg=dg("var(--"),mg=(e,t)=>t&&"number"===typeof e?t.transform(e):e,fg=(e,t,n)=>Math.min(Math.max(n,e),t),gg={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},vg=Nt(Nt({},gg),{},{transform:e=>fg(0,1,e)}),yg=Nt(Nt({},gg),{},{default:1}),bg=e=>Math.round(1e5*e)/1e5,wg=/(-)?([\d]*\.?[\d])+/g,xg=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Ng=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function kg(e){return"string"===typeof e}const jg=e=>({test:t=>kg(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Eg=jg("deg"),Sg=jg("%"),Tg=jg("px"),Cg=jg("vh"),_g=jg("vw"),Ig=Nt(Nt({},Sg),{},{parse:e=>Sg.parse(e)/100,transform:e=>Sg.transform(100*e)}),Pg=Nt(Nt({},gg),{},{transform:Math.round}),Ag={borderWidth:Tg,borderTopWidth:Tg,borderRightWidth:Tg,borderBottomWidth:Tg,borderLeftWidth:Tg,borderRadius:Tg,radius:Tg,borderTopLeftRadius:Tg,borderTopRightRadius:Tg,borderBottomRightRadius:Tg,borderBottomLeftRadius:Tg,width:Tg,maxWidth:Tg,height:Tg,maxHeight:Tg,size:Tg,top:Tg,right:Tg,bottom:Tg,left:Tg,padding:Tg,paddingTop:Tg,paddingRight:Tg,paddingBottom:Tg,paddingLeft:Tg,margin:Tg,marginTop:Tg,marginRight:Tg,marginBottom:Tg,marginLeft:Tg,rotate:Eg,rotateX:Eg,rotateY:Eg,rotateZ:Eg,scale:yg,scaleX:yg,scaleY:yg,scaleZ:yg,skew:Eg,skewX:Eg,skewY:Eg,distance:Tg,translateX:Tg,translateY:Tg,translateZ:Tg,x:Tg,y:Tg,z:Tg,perspective:Tg,transformPerspective:Tg,opacity:vg,originX:Ig,originY:Ig,originZ:Tg,zIndex:Pg,fillOpacity:vg,strokeOpacity:vg,numOctaves:Pg};function Rg(e,t,n,r){const{style:s,vars:a,transform:i,transformOrigin:o}=e;let l=!1,c=!1,u=!0;for(const d in t){const e=t[d];if(hg(d)){a[d]=e;continue}const n=Ag[d],r=mg(e,n);if(ig.has(d)){if(l=!0,i[d]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,o[d]=r):s[d]=r}if(t.transform||(l||r?s.transform=function(e,t,n,r){let{enableHardwareAcceleration:s=!0,allowTransformNone:a=!0}=t,i="";for(let o=0;o<ug;o++){const t=ag[o];void 0!==e[t]&&(i+="".concat(cg[t]||t,"(").concat(e[t],") "))}return s&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,n?"":i):a&&n&&(i="none"),i}(e.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;s.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const Dg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Og(e,t,n){for(const r in t)lg(t[r])||og(r,n)||(e[r]=t[r])}function Lg(e,t,n){const r={};return Og(r,e.style||{},e),Object.assign(r,function(e,t,n){let{transformTemplate:r}=e;return(0,s.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Rg(e,t,{enableHardwareAcceleration:!n},r),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(r):r}function Mg(e,t,n){const r={},s=Lg(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const Ug=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fg(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ug.has(e)}let Vg=e=>!Fg(e);try{(zg=require("@emotion/is-prop-valid").default)&&(Vg=e=>e.startsWith("on")?!Fg(e):zg(e))}catch(nj){}var zg;function Bg(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Wg(e,t,n){return"string"===typeof e?e:Tg.transform(t+n*e)}const qg={offset:"stroke-dashoffset",array:"stroke-dasharray"},Hg={offset:"strokeDashoffset",array:"strokeDasharray"};const Gg=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Kg(e,t,n,r,s){let{attrX:a,attrY:i,attrScale:o,originX:l,originY:c,pathLength:u,pathSpacing:d=1,pathOffset:h=0}=t;if(Rg(e,Bg(t,Gg),n,s),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:m,dimensions:f}=e;p.transform&&(f&&(m.transform=p.transform),delete p.transform),f&&(void 0!==l||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){const r=Wg(t,e.x,e.width),s=Wg(n,e.y,e.height);return"".concat(r," ").concat(s)}(f,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==a&&(p.x=a),void 0!==i&&(p.y=i),void 0!==o&&(p.scale=o),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=s?qg:Hg;e[a.offset]=Tg.transform(-r);const i=Tg.transform(t),o=Tg.transform(n);e[a.array]="".concat(i," ").concat(o)}(p,u,d,h,!1)}const Qg=()=>Nt(Nt({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Yg=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Xg(e,t,n,r){const a=(0,s.useMemo)(()=>{const n=Qg();return Kg(n,t,{enableHardwareAcceleration:!1},Yg(r),e.transformTemplate),Nt(Nt({},n.attrs),{},{style:Nt({},n.style)})},[t]);if(e.style){const t={};Og(t,e.style,e),a.style=Nt(Nt({},t),a.style)}return a}function $g(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,r,a,i)=>{let{latestValues:o}=a;const l=(rg(t)?Xg:Mg)(n,o,i,t),c=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"===typeof e.values||(Vg(s)||!0===n&&Fg(s)||!t&&!Fg(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"===typeof t,e),u=Nt(Nt(Nt({},c),l),{},{ref:r}),{children:d}=n,h=(0,s.useMemo)(()=>lg(d)?d.get():d,[d]);return(0,s.createElement)(t,Nt(Nt({},u),{},{children:h}))}}function Jg(e,t,n,r){let{style:s,vars:a}=t;Object.assign(e.style,s,r&&r.getProjectionStyles(n));for(const i in a)e.style.setProperty(i,a[i])}const Zg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ev(e,t,n,r){Jg(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Zg.has(s)?s:Uf(s),t.attrs[s])}function tv(e,t){const{style:n}=e,r={};for(const s in n)(lg(n[s])||t.style&&lg(t.style[s])||og(s,e))&&(r[s]=n[s]);return r}function nv(e,t){const n=tv(e,t);for(const r in e)if(lg(e[r])||lg(t[r])){n[-1!==ag.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function rv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),t}const sv=e=>Array.isArray(e),av=e=>sv(e)?e[e.length-1]||0:e;function iv(e){const t=lg(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const ov=["transitionEnd","transition"];const lv=e=>(t,n)=>{const r=(0,s.useContext)(Lf),a=(0,s.useContext)(jf),i=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:s,createRenderState:a,onMount:i}=e;const o={latestValues:cv(t,n,r,s),renderState:a()};return i&&(o.mount=e=>i(t,e,o)),o}(e,t,r,a);return n?i():Ef(i)};function cv(e,t,n,r){const s={},a=r(e,{});for(const h in a)s[h]=iv(a[h]);let{initial:i,animate:o}=e;const l=Hf(e),c=Gf(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===i;const d=u?o:i;if(d&&"boolean"!==typeof d&&!Bf(d)){(Array.isArray(d)?d:[d]).forEach(t=>{const n=rv(e,t);if(!n)return;const{transitionEnd:r,transition:a}=n,i=Bg(n,ov);for(const e in i){let t=i[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(s[e]=t)}for(const e in r)s[e]=r[e]})}return s}const uv={useVisualState:lv({scrapeMotionValuesFromProps:nv,createRenderState:Qg,onMount:(e,t,n)=>{let{renderState:r,latestValues:s}=n;wf.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(tj){r.dimensions={x:0,y:0,width:0,height:0}}}),wf.render(()=>{Kg(r,s,{enableHardwareAcceleration:!1},Yg(t.tagName),e.transformTemplate),ev(t,r)})}})},dv={useVisualState:lv({scrapeMotionValuesFromProps:tv,createRenderState:Dg})};function hv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const pv=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function mv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function fv(e,t,n,r){return hv(e,t,(e=>t=>pv(t)&&e(t,mv(t)))(n),r)}const gv=(e,t)=>n=>t(e(n)),vv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(gv)};function yv(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const bv=yv("dragHorizontal"),wv=yv("dragVertical");function xv(e){let t=!1;if("y"===e)t=wv();else if("x"===e)t=bv();else{const e=bv(),n=wv();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function Nv(){const e=xv(!0);return!e||(e(),!1)}class kv{constructor(e){this.isMounted=!1,this.node=e}update(){}}function jv(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return fv(e.current,n,(n,s)=>{if("touch"===n.pointerType||Nv())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&wf.update(()=>a[r](n,s))},{passive:!e.getProps()[r]})}const Ev=(e,t)=>!!t&&(e===t||Ev(e,t.parentElement));function Sv(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,mv(n))}const Tv=["root"],Cv=new WeakMap,_v=new WeakMap,Iv=e=>{const t=Cv.get(e.target);t&&t(e)},Pv=e=>{e.forEach(Iv)};function Av(e,t,n){const r=function(e){let{root:t}=e,n=Bg(e,Tv);const r=t||document;_v.has(r)||_v.set(r,{});const s=_v.get(r),a=JSON.stringify(n);return s[a]||(s[a]=new IntersectionObserver(Pv,Nt({root:t},n))),s[a]}(t);return Cv.set(e,n),r.observe(e),()=>{Cv.delete(e),r.unobserve(e)}}const Rv={some:0,all:1};const Dv={inView:{Feature:class extends kv{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Rv[r]};return Av(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends kv{constructor(){super(...arguments),this.removeStartListeners=vf,this.removeEndListeners=vf,this.removeAccessibleListeners=vf,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=fv(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:s}=this.node.getProps();wf.update(()=>{s||Ev(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),s=fv(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=vv(r,s),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=hv(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=hv(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Sv("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&wf.update(()=>n(e,t))})}),Sv("down",(e,t)=>{this.startPress(e,t)})}),t=hv(this.node.current,"blur",()=>{this.isPressing&&Sv("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=vv(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&wf.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Nv()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&wf.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=fv(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=hv(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=vv(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends kv{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(tj){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vv(hv(this.node.current,"focus",()=>this.onFocus()),hv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends kv{mount(){this.unmount=vv(jv(this.node,!0),jv(this.node,!1))}unmount(){}}}};function Ov(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Lv(e,t,n){const r=e.getProps();return rv(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}const Mv=e=>1e3*e,Uv=e=>e/1e3,Fv=!1,Vv=e=>Array.isArray(e)&&"number"===typeof e[0];function zv(e){return Boolean(!e||"string"===typeof e&&Wv[e]||Vv(e)||Array.isArray(e)&&e.every(zv))}const Bv=e=>{let[t,n,r,s]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(s,")")},Wv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bv([0,.65,.55,1]),circOut:Bv([.55,0,1,.45]),backIn:Bv([.31,.01,.66,-.59]),backOut:Bv([.33,1.53,.69,.99])};function qv(e){if(e)return Vv(e)?Bv(e):Array.isArray(e)?e.map(qv):Wv[e]}const Hv=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Gv(e,t,n,r){if(e===t&&n===r)return vf;const s=t=>function(e,t,n,r,s){let a,i,o=0;do{i=t+(n-t)/2,a=Hv(i,r,s)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:Hv(s(e),t,r)}const Kv=Gv(.42,0,1,1),Qv=Gv(0,0,.58,1),Yv=Gv(.42,0,.58,1),Xv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$v=e=>t=>1-e(1-t),Jv=e=>1-Math.sin(Math.acos(e)),Zv=$v(Jv),ey=Xv(Jv),ty=Gv(.33,1.53,.69,.99),ny=$v(ty),ry=Xv(ny),sy={linear:vf,easeIn:Kv,easeInOut:Yv,easeOut:Qv,circIn:Jv,circInOut:ey,circOut:Zv,backIn:ny,backInOut:ry,backOut:ty,anticipate:e=>(e*=2)<1?.5*ny(e):.5*(2-Math.pow(2,-10*(e-1)))},ay=e=>{if(Array.isArray(e)){Af(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,s]=e;return Gv(t,n,r,s)}return"string"===typeof e?(Af(void 0!==sy[e],"Invalid easing type '".concat(e,"'")),sy[e]):e},iy=(e,t)=>n=>Boolean(kg(n)&&Ng.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),oy=(e,t,n)=>r=>{if(!kg(r))return r;const[s,a,i,o]=r.match(wg);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},ly=Nt(Nt({},gg),{},{transform:e=>Math.round((e=>fg(0,255,e))(e))}),cy={test:iy("rgb","red"),parse:oy("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:s=1}=e;return"rgba("+ly.transform(t)+", "+ly.transform(n)+", "+ly.transform(r)+", "+bg(vg.transform(s))+")"}};const uy={test:iy("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:cy.transform},dy={test:iy("hsl","hue"),parse:oy("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+Sg.transform(bg(n))+", "+Sg.transform(bg(r))+", "+bg(vg.transform(s))+")"}},hy={test:e=>cy.test(e)||uy.test(e)||dy.test(e),parse:e=>cy.test(e)?cy.parse(e):dy.test(e)?dy.parse(e):uy.parse(e),transform:e=>kg(e)?e:e.hasOwnProperty("red")?cy.transform(e):dy.transform(e)},py=(e,t,n)=>-n*e+n*t+e;function my(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const fy=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},gy=[uy,cy,dy];function vy(e){const t=(e=>gy.find(t=>t.test(e)))(e);Af(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let n=t.parse(e);return t===dy&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:s}=e;t/=360,n/=100,r/=100;let a=0,i=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,s=2*r-e;a=my(s,e,t+1/3),i=my(s,e,t),o=my(s,e,t-1/3)}else a=i=o=r;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*o),alpha:s}}(n)),n}const yy=(e,t)=>{const n=vy(e),r=vy(t),s=Nt({},n);return e=>(s.red=fy(n.red,r.red,e),s.green=fy(n.green,r.green,e),s.blue=fy(n.blue,r.blue,e),s.alpha=py(n.alpha,r.alpha,e),cy.transform(s))};const by={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:vf},wy={regex:xg,countKey:"Colors",token:"${c}",parse:hy.parse},xy={regex:wg,countKey:"Numbers",token:"${n}",parse:gg.parse};function Ny(e,t){let{regex:n,countKey:r,token:s,parse:a}=t;const i=e.tokenised.match(n);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(n,s),e.values.push(...i.map(a)))}function ky(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Ny(n,by),Ny(n,wy),Ny(n,xy),n}function jy(e){return ky(e).values}function Ey(e){const{values:t,numColors:n,numVars:r,tokenised:s}=ky(e),a=t.length;return e=>{let t=s;for(let s=0;s<a;s++)t=s<r?t.replace(by.token,e[s]):s<r+n?t.replace(wy.token,hy.transform(e[s])):t.replace(xy.token,bg(e[s]));return t}}const Sy=e=>"number"===typeof e?0:e;const Ty={test:function(e){var t,n;return isNaN(e)&&kg(e)&&((null===(t=e.match(wg))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(xg))||void 0===n?void 0:n.length)||0)>0},parse:jy,createTransformer:Ey,getAnimatableNone:function(e){const t=jy(e);return Ey(e)(t.map(Sy))}},Cy=(e,t)=>n=>"".concat(n>0?t:e);function _y(e,t){return"number"===typeof e?n=>py(e,t,n):hy.test(e)?yy(e,t):e.startsWith("var(")?Cy(e,t):Ay(e,t)}const Iy=(e,t)=>{const n=[...e],r=n.length,s=e.map((e,n)=>_y(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}},Py=(e,t)=>{const n=Nt(Nt({},e),t),r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=_y(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}},Ay=(e,t)=>{const n=Ty.createTransformer(t),r=ky(e),s=ky(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?vv(Iy(r.values,s.values),n):(Pf(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Cy(e,t))},Ry=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},Dy=(e,t)=>n=>py(e,t,n);function Oy(e,t,n){const r=[],s=n||function(e){return"number"===typeof e?Dy:"string"===typeof e?hy.test(e)?yy:Ay:Array.isArray(e)?Iy:"object"===typeof e?Py:Dy}(e[0]),a=e.length-1;for(let i=0;i<a;i++){let n=s(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||vf:t;n=vv(e,n)}r.push(n)}return r}function Ly(e,t){let{clamp:n=!0,ease:r,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(Af(a===t.length,"Both input and output ranges must be the same length"),1===a)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Oy(t,r,s),o=i.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=Ry(e[n],e[n+1],t);return i[n](r)};return n?t=>l(fg(e[0],e[a-1],t)):l}function My(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ry(0,t,r);e.push(py(n,1,s))}}(t,e.length-1),t}function Uy(e){let{duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(s)?s.map(ay):ay(s),i={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:My(n),t),l=Ly(o,n,{ease:Array.isArray(a)?a:(c=n,u=a,c.map(()=>u||Yv).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}function Fy(e,t){return t?e*(1e3/t):0}function Vy(e,t,n){const r=Math.max(t-5,0);return Fy(n-e(r),t-r)}const zy=.001;function By(e){let t,n,{duration:r=800,bounce:s=.25,velocity:a=0,mass:i=1}=e;Pf(r<=Mv(10),"Spring duration must be 10 seconds or less");let o=1-s;o=fg(.05,1,o),r=fg(.01,10,Uv(r)),o<1?(t=e=>{const t=e*o,n=t*r,s=t-a,i=qy(e,o),l=Math.exp(-n);return zy-s/i*l},n=e=>{const n=e*o*r,s=n*a+a,i=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=qy(Math.pow(e,2),o);return(-t(e)+zy>0?-1:1)*((s-i)*l)/c}):(t=e=>Math.exp(-e*r)*((e-a)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(a-e)));const l=function(e,t,n){let r=n;for(let s=1;s<Wy;s++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Mv(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:r}}}const Wy=12;function qy(e,t){return e*Math.sqrt(1-t*t)}const Hy=["keyframes","restDelta","restSpeed"],Gy=["duration","bounce"],Ky=["stiffness","damping","mass"];function Qy(e,t){return t.some(t=>void 0!==e[t])}function Yy(e){let{keyframes:t,restDelta:n,restSpeed:r}=e,s=Bg(e,Hy);const a=t[0],i=t[t.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t=Nt({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Qy(e,Ky)&&Qy(e,Gy)){const n=By(e);t=Nt(Nt(Nt({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}(Nt(Nt({},s),{},{velocity:-Uv(s.velocity||0)})),m=h||0,f=c/(2*Math.sqrt(l*u)),g=i-a,v=Uv(Math.sqrt(l/u)),y=Math.abs(g)<5;let b;if(r||(r=y?.01:2),n||(n=y?.005:.5),f<1){const e=qy(v,f);b=t=>{const n=Math.exp(-f*v*t);return i-n*((m+f*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)b=e=>i-Math.exp(-v*e)*(g+(m+v*g)*e);else{const e=v*Math.sqrt(f*f-1);b=t=>{const n=Math.exp(-f*v*t),r=Math.min(e*t,300);return i-n*((m+f*v*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:p&&d||null,next:e=>{const t=b(e);if(p)o.done=e>=d;else{let s=m;0!==e&&(s=f<1?Vy(b,e,t):0);const a=Math.abs(s)<=r,l=Math.abs(i-t)<=n;o.done=a&&l}return o.value=o.done?i:t,o}}}function Xy(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},m=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=r*n;const g=h+f,v=void 0===o?g:o(g);v!==g&&(f=v-h);const y=e=>-f*Math.exp(-e/s),b=e=>v+y(e),w=e=>{const t=y(e),n=b(e);p.done=Math.abs(t)<=u,p.value=p.done?v:n};let x,N;const k=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(p.value)&&(x=e,N=Yy({keyframes:[p.value,m(p.value)],velocity:Vy(b,e,p.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return N||void 0!==x||(t=!0,w(e),k(e)),void 0!==x&&e>x?N.next(e-x):(!t&&w(e),p)}}}const $y=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>wf.update(t,!0),stop:()=>xf(t),now:()=>Nf.isProcessing?Nf.timestamp:performance.now()}};function Jy(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const Zy=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],eb={decay:Xy,inertia:Xy,tween:Uy,keyframes:Uy,spring:Yy};function tb(e){let t,n,{autoplay:r=!0,delay:s=0,driver:a=$y,keyframes:i,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:p,onUpdate:m}=e,f=Bg(e,Zy),g=1,v=!1;const y=()=>{n=new Promise(e=>{t=e})};let b;y();const w=eb[o]||Uy;let x;w!==Uy&&"number"!==typeof i[0]&&(x=Ly([0,100],i,{clamp:!1}),i=[0,100]);const N=w(Nt(Nt({},f),{},{keyframes:i}));let k;"mirror"===u&&(k=w(Nt(Nt({},f),{},{keyframes:[...i].reverse(),velocity:-(f.velocity||0)})));let j="idle",E=null,S=null,T=null;null===N.calculatedDuration&&l&&(N.calculatedDuration=Jy(N));const{calculatedDuration:C}=N;let _=1/0,I=1/0;null!==C&&(_=C+c,I=_*(l+1)-c);let P=0;const A=e=>{if(null===S)return;g>0&&(S=Math.min(S,e)),g<0&&(S=Math.min(e-I/g,S)),P=null!==E?E:Math.round(e-S)*g;const t=P-s*(g>=0?1:-1),n=g>=0?t<0:t>I;P=Math.max(t,0),"finished"===j&&null===E&&(P=I);let r=P,a=N;if(l){const e=Math.min(P,I)/_;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===u?(n=1-n,c&&(n-=c/_)):"mirror"===u&&(a=k)),r=fg(0,1,n)*_}const o=n?{done:!1,value:i[0]}:a.next(r);x&&(o.value=x(o.value));let{done:d}=o;n||null===C||(d=g>=0?P>=I:P<=0);const h=null===E&&("finished"===j||"running"===j&&d);return m&&m(o.value),h&&O(),o},R=()=>{b&&b.stop(),b=void 0},D=()=>{j="idle",R(),t(),y(),S=T=null},O=()=>{j="finished",p&&p(),R(),t()},L=()=>{if(v)return;b||(b=a(A));const e=b.now();d&&d(),null!==E?S=e-E:S&&"finished"!==j||(S=e),"finished"===j&&y(),T=S,E=null,j="running",b.start()};r&&L();const M={then:(e,t)=>n.then(e,t),get time(){return Uv(P)},set time(e){e=Mv(e),P=e,null===E&&b&&0!==g?S=b.now()-e/g:E=e},get duration(){const e=null===N.calculatedDuration?Jy(N):N.calculatedDuration;return Uv(e)},get speed(){return g},set speed(e){e!==g&&b&&(g=e,M.time=Uv(P))},get state(){return j},play:L,pause:()=>{j="paused",E=P},stop:()=>{v=!0,"idle"!==j&&(j="idle",h&&h(),D())},cancel:()=>{null!==T&&A(T),D()},complete:()=>{j="finished"},sample:e=>(S=0,A(e))};return M}const nb=["onUpdate","onComplete"],rb=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sb=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function ab(e,t,n){let{onUpdate:r,onComplete:s}=n,a=Bg(n,nb);if(!(rb()&&sb.has(t)&&!a.repeatDelay&&"mirror"!==a.repeatType&&0!==a.damping&&"inertia"!==a.type))return!1;let i,o,l=!1,c=!1;const u=()=>{o=new Promise(e=>{i=e})};u();let{keyframes:d,duration:h=300,ease:p,times:m}=a;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!zv(t.ease))(t,a)){const e=tb(Nt(Nt({},a),{},{repeat:0,delay:0}));let t={done:!1,value:d[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;m=void 0,d=n,h=r-10,p="linear"}const f=function(e,t,n){let{delay:r=0,duration:s,repeat:a=0,repeatType:i="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=qv(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"})}(e.owner.current,t,d,Nt(Nt({},a),{},{duration:h,ease:p,times:m})),g=()=>{c=!1,f.cancel()},v=()=>{c=!0,wf.update(g),i(),u()};f.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(d,a)),s&&s(),v())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(f.timeline=e,f.onfinish=null,vf),get time(){return Uv(f.currentTime||0)},set time(e){f.currentTime=Mv(e)},get speed(){return f.playbackRate},set speed(e){f.playbackRate=e},get duration(){return Uv(h)},play:()=>{l||(f.play(),xf(g))},pause:()=>f.pause(),stop:()=>{if(l=!0,"idle"===f.playState)return;const{currentTime:t}=f;if(t){const n=tb(Nt(Nt({},a),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}v()},complete:()=>{c||f.finish()},cancel:v}}const ib={type:"spring",stiffness:500,damping:25,restSpeed:10},ob={type:"keyframes",duration:.8},lb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cb=(e,t)=>{let{keyframes:n}=t;return n.length>2?ob:ig.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:ib:lb},ub=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Ty.test(t)&&"0"!==t||t.startsWith("url("))),db=new Set(["brightness","contrast","saturate","opacity"]);function hb(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(wg)||[];if(!r)return e;const s=n.replace(r,"");let a=db.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const pb=/([a-z-]*)\(.*?\)/g,mb=Nt(Nt({},Ty),{},{getAnimatableNone:e=>{const t=e.match(pb);return t?t.map(hb).join(" "):e}}),fb=Nt(Nt({},Ag),{},{color:hy,backgroundColor:hy,outlineColor:hy,fill:hy,stroke:hy,borderColor:hy,borderTopColor:hy,borderRightColor:hy,borderBottomColor:hy,borderLeftColor:hy,filter:mb,WebkitFilter:mb}),gb=e=>fb[e];function vb(e,t){let n=gb(e);return n!==mb&&(n=Ty),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const yb=e=>/^0[^.\s]+$/.test(e);function bb(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||yb(e):void 0}const wb=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function xb(e,t){return e[t]||e.default||e}const Nb=!1,kb=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s=>{const a=xb(r,e)||{},i=a.delay||r.delay||0;let{elapsed:o=0}=r;o-=Mv(i);const l=function(e,t,n,r){const s=ub(t,n);let a;a=Array.isArray(n)?[...n]:[null,n];const i=void 0!==r.from?r.from:e.get();let o;const l=[];for(let c=0;c<a.length;c++)null===a[c]&&(a[c]=0===c?i:a[c-1]),bb(a[c])&&l.push(c),"string"===typeof a[c]&&"none"!==a[c]&&"0"!==a[c]&&(o=a[c]);if(s&&l.length&&o)for(let c=0;c<l.length;c++)a[l[c]]=vb(t,o);return a}(t,e,n,a),c=l[0],u=l[l.length-1],d=ub(e,c),h=ub(e,u);Pf(d===h,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(u,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(u," via the `style` property."));let p=Nt(Nt({keyframes:l,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-o,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{s(),a.onComplete&&a.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u}=e,d=Bg(e,wb);return!!Object.keys(d).length}(a)||(p=Nt(Nt({},p),cb(e,p))),p.duration&&(p.duration=Mv(p.duration)),p.repeatDelay&&(p.repeatDelay=Mv(p.repeatDelay)),!d||!h||Fv||!1===a.type||Nb)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:s}=e;const a=()=>(r&&r(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:vf,pause:vf,stop:vf,then:e=>(e(),Promise.resolve()),cancel:vf,complete:vf});return n?tb({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(Fv?Nt(Nt({},p),{},{delay:0}):p);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=ab(t,e,p);if(n)return n}return tb(p)}};function jb(e){return Boolean(lg(e)&&e.add)}const Eb=e=>/^\-?\d*\.?\d+$/.test(e);function Sb(e,t){-1===e.indexOf(t)&&e.push(t)}function Tb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Cb{constructor(){this.subscriptions=[]}add(e){return Sb(this.subscriptions,e),()=>Tb(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _b={current:void 0};class Ib{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:s}=Nf;t.lastUpdated!==s&&(t.timeDelta=r,t.lastUpdated=s,wf.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>wf.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Cb);const n=this.events[e].add(t);return"change"===e?()=>{n(),wf.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return _b.current&&_b.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Fy(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pb(e,t){return new Ib(e,t)}const Ab=e=>t=>t.test(e),Rb=[gg,Tg,Sg,Eg,_g,Cg,{test:e=>"auto"===e,parse:e=>e}],Db=e=>Rb.find(Ab(e)),Ob=[...Rb,hy,Ty],Lb=e=>Ob.find(Ab(e)),Mb=["transitionEnd","transition"];function Ub(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Pb(n))}function Fb(e,t){const n=Lv(e,t);let r=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:s={},transition:a={}}=r,i=Bg(r,Mb);i=Nt(Nt({},i),s);for(const o in i){Ub(e,o,av(i[o]))}}function Vb(e,t){if(!t)return;return(t[e]||t.default||t).from}const zb=["transition","transitionEnd"];function Bb(e,t){let{protectedKeys:n,needsAnimating:r}=e;const s=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,s}function Wb(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function qb(e,t){let{delay:n=0,transitionOverride:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.makeTargetAnimatable(t),{transition:i=e.getDefaultTransition(),transitionEnd:o}=a,l=Bg(a,zb);const c=e.getValue("willChange");r&&(i=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const t=e.getValue(h),r=l[h];if(!t||void 0===r||d&&Bb(d,h))continue;const s=Nt({delay:n,elapsed:0},xb(i||{},h));if(window.HandoffAppearAnimations){const n=e.getProps()[Ff];if(n){const e=window.HandoffAppearAnimations(n,h,t,wf);null!==e&&(s.elapsed=e,s.isHandoff=!0)}}let a=!s.isHandoff&&!Wb(t,r);if("spring"===s.type&&(t.getVelocity()||s.velocity)&&(a=!1),t.animation&&(a=!1),a)continue;t.start(kb(h,t,r,e.shouldReduceMotion&&ig.has(h)?{type:!1}:s));const o=t.animation;jb(c)&&(c.add(h),o.then(()=>c.remove(h))),u.push(o)}return o&&Promise.all(u).then(()=>{o&&Fb(e,o)}),u}function Hb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Lv(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(qb(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*r,l=1===s?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(Gb).forEach((e,r)=>{e.notify("AnimationStart",t),i.push(Hb(e,t,Nt(Nt({},a),{},{delay:n+l(r)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,a+r,i,o,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[e,t]="beforeChildren"===o?[a,i]:[i,a];return e().then(()=>t())}return Promise.all([a(),i(n.delay)])}function Gb(e,t){return e.sortNodePosition(t)}const Kb=["transition","transitionEnd"],Qb=[...Wf].reverse(),Yb=Wf.length;function Xb(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>Hb(e,t,r));n=Promise.all(s)}else if("string"===typeof t)n=Hb(e,t,r);else{const s="function"===typeof t?Lv(e,t,r.custom):t;n=Promise.all(qb(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,r)}))}function $b(e){let t=Xb(e);const n={animate:Zb(!0),whileInView:Zb(),whileHover:Zb(),whileTap:Zb(),whileDrag:Zb(),whileFocus:Zb(),exit:Zb()};let r=!0;const s=(t,n)=>{const r=Lv(e,n);if(r){const{transition:e,transitionEnd:n}=r,s=Bg(r,Kb);t=Nt(Nt(Nt({},t),s),n)}return t};function a(a,i){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let d={},h=1/0;for(let t=0;t<Yb;t++){const p=Qb[t],m=n[p],f=void 0!==o[p]?o[p]:l[p],g=zf(f),v=p===i?m.isActive:null;!1===v&&(h=t);let y=f===l[p]&&f!==o[p]&&g;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),m.protectedKeys=Nt({},d),!m.isActive&&null===v||!f&&!m.prevProp||Bf(f)||"boolean"===typeof f)continue;let b=Jb(m.prevProp,f)||p===i&&m.isActive&&!y&&g||t>h&&g,w=!1;const x=Array.isArray(f)?f:[f];let N=x.reduce(s,{});!1===v&&(N={});const{prevResolvedValues:k={}}=m,j=Nt(Nt({},k),N),E=e=>{b=!0,u.has(e)&&(w=!0,u.delete(e)),m.needsAnimating[e]=!0};for(const e in j){const t=N[e],n=k[e];if(d.hasOwnProperty(e))continue;let r=!1;r=sv(t)&&sv(n)?!Ov(t,n):t!==n,r?void 0!==t?E(e):u.add(e):void 0!==t&&u.has(e)?E(e):m.protectedKeys[e]=!0}m.prevProp=f,m.prevResolvedValues=N,m.isActive&&(d=Nt(Nt({},d),N)),r&&e.blockInitialAnimation&&(b=!1),!b||y&&!w||c.push(...x.map(e=>({animation:e,options:Nt({type:p},a)})))}if(u.size){const t={};u.forEach(n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)}),c.push({animation:t})}let p=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(p=!1),r=!1,p?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,r,s){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const o=a(s,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Jb(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Ov(t,e)}function Zb(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let ew=0;const tw={animation:{Feature:class extends kv{constructor(e){super(e),e.animationState||(e.animationState=$b(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Bf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends kv{constructor(){super(...arguments),this.id=ew++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},nw=(e,t)=>Math.abs(e-t);class rw{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=iw(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=nw(e.x,t.x),r=nw(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=Nf;this.history.push(Nt(Nt({},r),{},{timestamp:s}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=sw(t,this.transformPagePoint),wf.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=iw("pointercancel"===e.type?this.lastMoveEventInfo:sw(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!pv(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const a=sw(mv(e),this.transformPagePoint),{point:i}=a,{timestamp:o}=Nf;this.history=[Nt(Nt({},i),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,iw(a,this.history)),this.removeListeners=vv(fv(this.contextWindow,"pointermove",this.handlePointerMove),fv(this.contextWindow,"pointerup",this.handlePointerUp),fv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xf(this.updatePoint)}}function sw(e,t){return t?{point:t(e.point)}:e}function aw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function iw(e,t){let{point:n}=e;return{point:n,delta:aw(n,lw(t)),offset:aw(n,ow(t)),velocity:cw(t,.1)}}function ow(e){return e[0]}function lw(e){return e[e.length-1]}function cw(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=lw(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Mv(t)));)n--;if(!r)return{x:0,y:0};const a=Uv(s.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function uw(e){return e.max-e.min}function dw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function hw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=py(t.min,t.max,e.origin),e.scale=uw(n)/uw(t),(dw(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=py(n.min,n.max,e.origin)-e.originPoint,(dw(e.translate)||isNaN(e.translate))&&(e.translate=0)}function pw(e,t,n,r){hw(e.x,t.x,n.x,r?r.originX:void 0),hw(e.y,t.y,n.y,r?r.originY:void 0)}function mw(e,t,n){e.min=n.min+t.min,e.max=e.min+uw(t)}function fw(e,t,n){e.min=t.min-n.min,e.max=e.min+uw(t)}function gw(e,t,n){fw(e.x,t.x,n.x),fw(e.y,t.y,n.y)}function vw(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function yw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const bw=.35;function ww(e,t,n){return{min:xw(e,t),max:xw(e,n)}}function xw(e,t){return"number"===typeof e?e:e[t]||0}const Nw=()=>({x:{min:0,max:0},y:{min:0,max:0}});function kw(e){return[e("x"),e("y")]}function jw(e){let{top:t,left:n,right:r,bottom:s}=e;return{x:{min:n,max:r},y:{min:t,max:s}}}function Ew(e){return void 0===e||1===e}function Sw(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Ew(t)||!Ew(n)||!Ew(r)}function Tw(e){return Sw(e)||Cw(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Cw(e){return _w(e.x)||_w(e.y)}function _w(e){return e&&"0%"!==e}function Iw(e,t,n){return n+t*(e-n)}function Pw(e,t,n,r,s){return void 0!==s&&(e=Iw(e,s,r)),Iw(e,n,r)+t}function Aw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=Pw(e.min,t,n,r,s),e.max=Pw(e.max,t,n,r,s)}function Rw(e,t){let{x:n,y:r}=t;Aw(e.x,n.translate,n.scale,n.originPoint),Aw(e.y,r.translate,r.scale,r.originPoint)}function Dw(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ow(e,t){e.min=e.min+t,e.max=e.max+t}function Lw(e,t,n){let[r,s,a]=n;const i=void 0!==t[a]?t[a]:.5,o=py(e.min,e.max,i);Aw(e,t[r],t[s],o,t.scale)}const Mw=["x","scaleX","originX"],Uw=["y","scaleY","originY"];function Fw(e,t){Lw(e.x,t,Mw),Lw(e.y,t,Uw)}function Vw(e,t){return jw(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const zw=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Bw=new WeakMap;class Ww{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new rw(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(mv(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=xv(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kw(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Sg.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=uw(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&wf.update(()=>s(e,t),!1,!0);const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:a}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>kw(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:zw(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&wf.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!qw(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){let{min:r,max:s}=t;return void 0!==r&&e<r?e=n?py(r,e,n.min):Math.max(e,r):void 0!==s&&e>s&&(e=n?py(s,e,n.max):Math.min(e,s)),e}(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,s=this.constraints;t&&Vf(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:s,right:a}=t;return{x:vw(e.x,r,a),y:vw(e.y,n,s)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bw;return!1===e?e=0:!0===e&&(e=bw),{x:ww(e,"left","right"),y:ww(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kw(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Vf(e))return!1;const n=e.current;Af(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=Vw(e,n),{scroll:s}=t;return s&&(Ow(r.x,s.offset.x),Ow(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:yw(e.x,t.x),y:yw(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=jw(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=kw(i=>{if(!qw(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d=Nt(Nt({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},s),l);return this.startAxisValueAnimation(i,d)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(kb(e,n,0,t))}stopAnimation(){kw(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kw(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){kw(t=>{const{drag:n}=this.getProps();if(!qw(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];s.set(e[t]-py(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Vf(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};kw(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=uw(e),s=uw(t);return s>r?n=Ry(t.min,t.max-r,e.min):r>s&&(n=Ry(e.min,e.max-s,t.min)),fg(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),kw(t=>{if(!qw(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:a}=this.constraints[t];n.set(py(s,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;Bw.set(this.visualElement,this);const e=fv(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Vf(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const s=hv(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(kw(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=bw,dragMomentum:i=!0}=e;return Nt(Nt({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:i})}}function qw(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Hw=e=>(t,n)=>{e&&wf.update(()=>e(t,n))};const Gw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kw(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Qw={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Tg.test(e))return e;e=parseFloat(e)}const n=Kw(e,t.target.x),r=Kw(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Yw={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const s=e,a=Ty.parse(e);if(a.length>5)return s;const i=Ty.createTransformer(e),o="number"!==typeof a[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;a[0+o]/=l,a[1+o]/=c;const u=py(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=u),"number"===typeof a[3+o]&&(a[3+o]/=u),i(a)}};class Xw extends s.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;var a;a=Jw,Object.assign(sg,a),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions(Nt(Nt({},s.options),{},{onExitComplete:()=>this.safeToRemove()}))),Gw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,a=n.projection;return a?(a.isPresent=s,r||e.layoutDependency!==t||void 0===t?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||wf.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $w(e){const[t,n]=function(){const e=(0,s.useContext)(jf);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,a=(0,s.useId)();return(0,s.useEffect)(()=>r(a),[]),!t&&n?[!1,()=>n&&n(a)]:[!0]}(),r=(0,s.useContext)(If);return s.createElement(Xw,Nt(Nt({},e),{},{layoutGroup:r,switchLayoutGroup:(0,s.useContext)($f),isPresent:t,safeToRemove:n}))}const Jw={borderRadius:Nt(Nt({},Qw),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Qw,borderTopRightRadius:Qw,borderBottomLeftRadius:Qw,borderBottomRightRadius:Qw,boxShadow:Yw},Zw=["TopLeft","TopRight","BottomLeft","BottomRight"],ex=Zw.length,tx=e=>"string"===typeof e?parseFloat(e):e,nx=e=>"number"===typeof e||Tg.test(e);function rx(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const sx=ix(0,.5,Zv),ax=ix(.5,.95,vf);function ix(e,t,n){return r=>r<e?0:r>t?1:n(Ry(e,t,r))}function ox(e,t){e.min=t.min,e.max=t.max}function lx(e,t){ox(e.x,t.x),ox(e.y,t.y)}function cx(e,t,n,r,s){return e=Iw(e-=t,1/n,r),void 0!==s&&(e=Iw(e,1/s,r)),e}function ux(e,t,n,r,s){let[a,i,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Sg.test(t)&&(t=parseFloat(t),t=py(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=py(a.min,a.max,r);e===a&&(o-=t),e.min=cx(e.min,t,n,o,s),e.max=cx(e.max,t,n,o,s)}(e,t[a],t[i],t[o],t.scale,r,s)}const dx=["x","scaleX","originX"],hx=["y","scaleY","originY"];function px(e,t,n,r){ux(e.x,t,dx,n?n.x:void 0,r?r.x:void 0),ux(e.y,t,hx,n?n.y:void 0,r?r.y:void 0)}function mx(e){return 0===e.translate&&1===e.scale}function fx(e){return mx(e.x)&&mx(e.y)}function gx(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function vx(e){return uw(e.x)/uw(e.y)}class yx{constructor(){this.members=[]}add(e){Sb(this.members,e),e.scheduleRender()}remove(e){if(Tb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bx(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y;if((s||a)&&(r="translate3d(".concat(s,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:s}=n;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) "))}const i=e.x.scale*t.x,o=e.y.scale*t.y;return 1===i&&1===o||(r+="scale(".concat(i,", ").concat(o,")")),r||"none"}const wx=(e,t)=>e.depth-t.depth;class xx{constructor(){this.children=[],this.isDirty=!1}add(e){Sb(this.children,e),this.isDirty=!0}remove(e){Tb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wx),this.isDirty=!1,this.children.forEach(e)}}const Nx=["","X","Y","Z"],kx={visibility:"hidden"};let jx=0;const Ex={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Sx(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=jx++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ex.totalNodes=Ex.resolvedTargetDeltas=Ex.recalculatedProjection=0,this.nodes.forEach(_x),this.nodes.forEach(Lx),this.nodes.forEach(Mx),this.nodes.forEach(Ix),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(Ex)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new xx)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Cb),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:s,layout:a,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(a||s)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=s=>{let{timestamp:a}=s;const i=a-n;i>=t&&(xf(r),e(i-t))};return wf.read(r,!0),()=>xf(r)}(r,250),Gw.hasAnimatedSinceResize&&(Gw.hasAnimatedSinceResize=!1,this.nodes.forEach(Ox))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&i&&(s||a)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:s}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||i.getDefaultTransition()||Wx,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!gx(this.targetLayout,s)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e=Nt(Nt({},xb(a,"layout")),{},{onPlay:o,onComplete:l});(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||Ox(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,xf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ux),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Ax);this.isUpdating||this.nodes.forEach(Rx),this.isUpdating=!1,this.nodes.forEach(Dx),this.nodes.forEach(Tx),this.nodes.forEach(Cx),this.clearAllSnapshots();const e=performance.now();Nf.delta=fg(0,1e3/60,e-Nf.timestamp),Nf.timestamp=e,Nf.isProcessing=!0,kf.update.process(Nf),kf.preRender.process(Nf),kf.render.process(Nf),Nf.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Px),this.sharedNodes.forEach(Fx)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wf.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wf.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!fx(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&(t||Tw(this.latestValues)||s)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Gx((r=n).x),Gx(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Ow(t.x,n.offset.x),Ow(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};lx(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:a}=r;if(r!==this.root&&s&&a.layoutScroll){if(s.isRoot){lx(t,e);const{scroll:n}=this.root;n&&(Ow(t.x,-n.offset.x),Ow(t.y,-n.offset.y))}Ow(t.x,s.offset.x),Ow(t.y,s.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};lx(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Fw(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Tw(e.latestValues)&&Fw(n,e.latestValues)}return Tw(this.latestValues)&&Fw(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};lx(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Tw(e.latestValues))continue;Sw(e.latestValues)&&e.updateSnapshot();const r=Nw();lx(r,e.measurePageBox()),px(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Tw(this.latestValues)&&px(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=Nt(Nt(Nt({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nf.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:s,layoutId:a}=this.options;if(this.layout&&(s||a)){if(this.resolvedRelativeTargetAt=Nf.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},gw(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),lx(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,mw(i.x,o.x,l.x),mw(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):lx(this.target,this.layout.layoutBox),Rw(this.target,this.targetDelta)):lx(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},gw(this.relativeTargetOrigin,this.target,e.target),lx(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ex.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Sw(this.parent.latestValues)&&!Cw(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Nf.timestamp&&(r=!1),r)return;const{layout:s,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!a)return;lx(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let a,i;t.x=t.y=1;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const s=a.instance;s&&s.style&&"contents"===s.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fw(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Rw(e,i)),r&&Tw(a.latestValues)&&Fw(e,a.latestValues))}t.x=Dw(t.x),t.y=Dw(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;pw(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=bx(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===i&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ex.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},s=Nt({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Bx));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;Vx(a.x,e.x,n),Vx(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gw(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){zx(e.x,t.x,n.x,r),zx(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,i,n),d&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),lx(d,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,a){s?(e.opacity=py(0,void 0!==n.opacity?n.opacity:1,sx(r)),e.opacityExit=py(void 0!==t.opacity?t.opacity:1,0,ax(r))):a&&(e.opacity=py(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let i=0;i<ex;i++){const s="border".concat(Zw[i],"Radius");let a=rx(t,s),o=rx(n,s);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||nx(a)===nx(o)?(e[s]=Math.max(py(tx(a),tx(o),r),0),(Sg.test(o)||Sg.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=py(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(xf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wf.update(()=>{Gw.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=lg(e)?e:Pb(e);return r.start(kb("",r,t,n)),r.animation}(0,1e3,Nt(Nt({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Kx(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=uw(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=uw(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}lx(t,n),Fw(t,s),pw(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new yx);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let s=0;s<Nx.length;s++){const t="rotate"+Nx[s];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const s in r)e.setStaticValue(s,r[s]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return kx;const r={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=iv(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=s?s(this.latestValues,""):"none",r;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=iv(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Tw(this.latestValues)&&(t.transform=s?s({},""):"none",this.hasProjected=!1),t}const i=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=bx(this.projectionDeltaWithTransform,this.treeScale,i),s&&(r.transform=s(i,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?r.opacity=a===this?null!==(n=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:r.opacity=a===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in sg){if(void 0===i[c])continue;const{correct:e,applyTo:t}=sg[c],n="none"===r.transform?i[c]:e(i[c],a);if(t){const e=t.length;for(let s=0;s<e;s++)r[t[s]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=a===this?iv(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Ax),this.root.sharedNodes.clear()}}}function Tx(e){e.updateLayout()}function Cx(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,a=n.source!==e.layout.source;"size"===s?kw(e=>{const r=a?n.measuredBox[e]:n.layoutBox[e],s=uw(r);r.min=t[e].min,r.max=r.min+s}):Kx(s,n.layoutBox,t)&&kw(r=>{const s=a?n.measuredBox[r]:n.layoutBox[r],i=uw(t[r]);s.max=s.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};pw(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?pw(o,e.applyTransform(r,!0),n.measuredBox):pw(o,t,n.layoutBox);const l=!fx(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:a}=r;if(s&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};gw(i,n.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};gw(o,t,a.layoutBox),gx(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function _x(e){Ex.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Ix(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Px(e){e.clearSnapshot()}function Ax(e){e.clearMeasurements()}function Rx(e){e.isLayoutDirty=!1}function Dx(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ox(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Lx(e){e.resolveTargetDelta()}function Mx(e){e.calcProjection()}function Ux(e){e.resetRotation()}function Fx(e){e.removeLeadSnapshot()}function Vx(e,t,n){e.translate=py(t.translate,0,n),e.scale=py(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function zx(e,t,n,r){e.min=py(t.min,n.min,r),e.max=py(t.max,n.max,r)}function Bx(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Wx={duration:.45,ease:[.4,0,.1,1]},qx=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),Hx=qx("applewebkit/")&&!qx("chrome/")?Math.round:vf;function Gx(e){e.min=Hx(e.min),e.max=Hx(e.max)}function Kx(e,t,n){return"position"===e||"preserve-aspect"===e&&!dw(vx(t),vx(n),.2)}const Qx=Sx({attachResizeListener:(e,t)=>hv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yx={current:void 0},Xx=Sx({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Yx.current){const e=new Qx({});e.mount(window),e.setOptions({layoutScroll:!0}),Yx.current=e}return Yx.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),$x={pan:{Feature:class extends kv{constructor(){super(...arguments),this.removePointerDownListener=vf}onPointerDown(e){this.session=new rw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zw(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Hw(e),onStart:Hw(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&wf.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=fv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends kv{constructor(e){super(e),this.removeGroupControls=vf,this.removeListeners=vf,this.controls=new Ww(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vf}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Xx,MeasureLayout:$w}};const Jx=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Zx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Af(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,s]=function(e){const t=Jx.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return Eb(e)?parseFloat(e):e}return pg(s)?Zx(s,t,n+1):s}function eN(e,t,n){let r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const s=e.current;if(!(s instanceof Element))return{target:r,transitionEnd:n};n&&(n=Nt({},n)),e.values.forEach(e=>{const t=e.get();if(!pg(t))return;const n=Zx(t,s);n&&e.set(n)});for(const a in r){const e=r[a];if(!pg(e))continue;const t=Zx(e,s);t&&(r[a]=t,n||(n={}),void 0===n[a]&&(n[a]=e))}return{target:r,transitionEnd:n}}const tN=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),nN=e=>tN.has(e),rN=e=>e===gg||e===Tg,sN=(e,t)=>parseFloat(e.split(", ")[t]),aN=(e,t)=>(n,r)=>{let{transform:s}=r;if("none"===s||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/);if(a)return sN(a[1],t);{const t=s.match(/^matrix\((.+)\)$/);return t?sN(t[1],e):0}},iN=new Set(["x","y","z"]),oN=ag.filter(e=>!iN.has(e));const lN={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:aN(4,13),y:aN(5,14)};lN.translateX=lN.x,lN.translateY=lN.y;const cN=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=Nt({},t),r=Nt({},r);const s=Object.keys(t).filter(nN);let a=[],i=!1;const o=[];if(s.forEach(s=>{const l=e.getValue(s);if(!e.hasValue(s))return;let c=n[s],u=Db(c);const d=t[s];let h;if(sv(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=Db(c);for(let n=t;n<e&&null!==d[n];n++)h?Af(Db(d[n])===h,"All keyframes must be of the same type"):(h=Db(d[n]),Af(h===u||rN(u)&&rN(h),"Keyframes must be of the same dimension as the current value"))}else h=Db(d);if(u!==h)if(rN(u)&&rN(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof d?t[s]=parseFloat(d):Array.isArray(d)&&h===Tg&&(t[s]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===d)?0===c?l.set(h.transform(c)):t[s]=u.transform(d):(i||(a=function(e){const t=[];return oN.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),i=!0),o.push(s),r[s]=void 0!==r[s]?r[s]:t[s],l.jump(d))}),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,s=((e,t,n)=>{const r=t.measureViewportBox(),s=t.current,a=getComputedStyle(s),{display:i}=a,o={};"none"===i&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{o[e]=lN[e](r,a)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const r=t.getValue(n);r&&r.jump(o[n]),e[n]=lN[n](l,a)}),e})(t,e,o);return a.length&&a.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),e.render(),mf&&null!==n&&window.scrollTo({top:n}),{target:s,transitionEnd:r}}return{target:t,transitionEnd:r}};function uN(e,t,n,r){return(e=>Object.keys(e).some(nN))(t)?cN(e,t,n,r):{target:t,transitionEnd:r}}const dN={current:null},hN={current:!1};const pN=new WeakMap,mN=["willChange"],fN=["children"],gN=Object.keys(Xf),vN=gN.length,yN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],bN=qf.length;class wN{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>wf.render(this.render,!1,!0);const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget=Nt({},o),this.initialValues=n.initial?Nt({},o):{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=i,this.isControllingVariants=Hf(n),this.isVariantNode=Gf(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const c=this.scrapeMotionValuesFromProps(n,{}),{willChange:u}=c,d=Bg(c,mN);for(const h in d){const e=d[h];void 0!==o[h]&&lg(e)&&(e.set(o[h],!1),jb(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,pN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),hN.current||function(){if(hN.current=!0,mf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>dN.current=e.matches;e.addListener(t),t()}else dN.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||dN.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){pN.delete(this.current),this.projection&&this.projection.unmount(),xf(this.notifyUpdate),xf(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=ig.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&wf.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let s,a,{children:i}=e,o=Bg(e,fN);for(let l=0;l<vN;l++){const e=gN[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:i}=Xf[e];r&&(s=r),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),i&&(a=i))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:a,layoutScroll:i,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||a&&Vf(a),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:i,layoutRoot:l})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<yN.length;n++){const t=yN[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const s in t){const a=t[s],i=n[s];if(lg(a))e.addValue(s,a),jb(r)&&r.add(s);else if(lg(i))e.addValue(s,Pb(a,{owner:e})),jb(r)&&r.remove(s);else if(i!==a)if(e.hasValue(s)){const t=e.getValue(s);!t.hasAnimated&&t.set(a)}else{const t=e.getStaticValue(s);e.addValue(s,Pb(void 0!==t?t:a,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<bN;t++){const n=qf[t],r=this.props[n];(zf(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Pb(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=rv(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||lg(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new Cb),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}const xN=["transition","transitionEnd"];class NN extends wN{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:s}=e,a=Bg(e,xN),{transformValues:i}=t,o=function(e,t,n){const r={};for(const s in e){const e=Vb(s,t);if(void 0!==e)r[s]=e;else{const e=n.getValue(s);e&&(r[s]=e.get())}}return r}(a,r||{},this);if(i&&(s&&(s=i(s)),a&&(a=i(a)),o&&(o=i(o))),n){!function(e,t,n){var r,s;const a=Object.keys(t).filter(t=>!e.hasValue(t)),i=a.length;if(i)for(let o=0;o<i;o++){const i=a[o],l=t[i];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(s=null!==(r=n[i])&&void 0!==r?r:e.readValue(i))&&void 0!==s?s:t[i]),void 0!==c&&null!==c&&("string"===typeof c&&(Eb(c)||yb(c))?c=parseFloat(c):!Lb(c)&&Ty.test(l)&&(c=vb(i,l)),e.addValue(i,Pb(c,{owner:e})),void 0===n[i]&&(n[i]=c),null!==c&&e.setBaseTarget(i,c))}}(this,a,o);const e=((e,t,n,r)=>{const s=eN(e,t,r);return uN(e,t=s.target,n,r=s.transitionEnd)})(this,a,o,s);s=e.transitionEnd,a=e.target}return Nt({transition:r,transitionEnd:s},a)}}class kN extends NN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ig.has(t)){const e=gb(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),s=(hg(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Vw(e,n)}build(e,t,n,r){Rg(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return tv(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;lg(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,r){Jg(e,t,n,r)}}class jN extends NN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ig.has(t)){const e=gb(t);return e&&e.default||0}return t=Zg.has(t)?t:Uf(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return nv(e,t)}build(e,t,n,r){Kg(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){ev(e,t,0,r)}mount(e){this.isSVGTag=Yg(e.tagName),super.mount(e)}}const EN=(e,t)=>rg(e)?new jN(t,{enableHardwareAcceleration:!1}):new kN(t,{enableHardwareAcceleration:!0}),SN={layout:{ProjectionNode:Xx,MeasureLayout:$w}},TN=Nt(Nt(Nt(Nt({},tw),Dv),$x),SN),CN=tg((e,t)=>function(e,t,n,r){let{forwardMotionProps:s=!1}=t;return Nt(Nt({},rg(e)?uv:dv),{},{preloadedFeatures:n,useRender:$g(s),createVisualElement:r,Component:e})}(e,t,TN,EN));var _N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const IN=["color","size","strokeWidth","absoluteStrokeWidth","children"],PN=(e,t)=>{const n=(0,s.forwardRef)((n,r)=>{let{color:a="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=n,u=Bg(n,IN);return(0,s.createElement)("svg",Nt(Nt({ref:r},_N),{},{width:i,height:i,stroke:a,strokeWidth:l?24*Number(o)/Number(i):o,className:"lucide lucide-".concat((d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},u),[...t.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var d});return n.displayName="".concat(e),n},AN=PN("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),RN=PN("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),DN=PN("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ON=PN("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),LN=PN("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),MN=PN("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);var UN=n(579);const FN=()=>{const e=[{icon:(0,UN.jsx)(AN,{className:"w-8 h-8"}),title:"Smart Tournaments",description:"Automatically generate balanced groups based on ELO ratings for fair competition"},{icon:(0,UN.jsx)(RN,{className:"w-8 h-8"}),title:"ELO Rating System",description:"Track your progress with a chess-style rating system that adjusts after every match"},{icon:(0,UN.jsx)(DN,{className:"w-8 h-8"}),title:"Easy Scheduling",description:"Quick tournament setup and WhatsApp invitations for Wednesday socials"},{icon:(0,UN.jsx)(ON,{className:"w-8 h-8"}),title:"All Ages Welcome",description:"Simple, intuitive interface designed for players aged 16 to 75"}];return(0,UN.jsxs)("div",{className:"landing-page",children:[(0,UN.jsx)("section",{className:"hero-section court-pattern",children:(0,UN.jsxs)("div",{className:"container",children:[(0,UN.jsxs)(CN.div,{className:"hero-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,UN.jsx)("h1",{className:"hero-title",children:"SQUASH CLUB TOURNAMENT MANAGER"}),(0,UN.jsx)("p",{className:"hero-subtitle",children:"Transform your Wednesday socials with smart ELO-based matchmaking"}),(0,UN.jsxs)("div",{className:"hero-buttons",children:[(0,UN.jsxs)(Re,{to:"/register",className:"btn btn-primary btn-large",children:["Get Started",(0,UN.jsx)(LN,{className:"w-5 h-5"})]}),(0,UN.jsx)(Re,{to:"/login",className:"btn btn-outline btn-large",children:"Sign In"})]})]}),(0,UN.jsx)(CN.div,{className:"hero-image",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},children:(0,UN.jsxs)("div",{className:"court-visual",children:[(0,UN.jsxs)("div",{className:"court-lines",children:[(0,UN.jsx)("div",{className:"service-box"}),(0,UN.jsx)("div",{className:"front-wall"}),(0,UN.jsx)("div",{className:"tin"})]}),(0,UN.jsx)("div",{className:"elo-display",children:(0,UN.jsx)("span",{className:"elo-badge",children:"ELO 1450"})})]})})]})}),(0,UN.jsx)("section",{className:"features-section",children:(0,UN.jsxs)("div",{className:"container",children:[(0,UN.jsxs)(CN.div,{className:"section-header",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:[(0,UN.jsx)("h2",{children:"Everything Your Club Needs"}),(0,UN.jsx)("p",{children:"Streamline tournament management and enhance player experience"})]}),(0,UN.jsx)("div",{className:"features-grid",children:e.map((e,t)=>(0,UN.jsxs)(CN.div,{className:"feature-card card",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*t},children:[(0,UN.jsx)("div",{className:"feature-icon",children:e.icon}),(0,UN.jsx)("h3",{children:e.title}),(0,UN.jsx)("p",{children:e.description})]},t))})]})}),(0,UN.jsx)("section",{className:"how-it-works-section",children:(0,UN.jsxs)("div",{className:"container",children:[(0,UN.jsxs)(CN.div,{className:"section-header",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:[(0,UN.jsx)("h2",{children:"How It Works"}),(0,UN.jsx)("p",{children:"Get your tournament up and running in minutes"})]}),(0,UN.jsxs)("div",{className:"steps-container",children:[(0,UN.jsxs)(CN.div,{className:"step",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},children:[(0,UN.jsx)("div",{className:"step-number",children:"1"}),(0,UN.jsx)("h3",{children:"Create Tournament"}),(0,UN.jsx)("p",{children:"Set up your Wednesday tournament with custom scoring formats"})]}),(0,UN.jsxs)(CN.div,{className:"step",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.1},children:[(0,UN.jsx)("div",{className:"step-number",children:"2"}),(0,UN.jsx)("h3",{children:"Invite Players"}),(0,UN.jsx)("p",{children:"Send WhatsApp and email invitations with one click"})]}),(0,UN.jsxs)(CN.div,{className:"step",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2},children:[(0,UN.jsx)("div",{className:"step-number",children:"3"}),(0,UN.jsx)("h3",{children:"Play & Track"}),(0,UN.jsx)("p",{children:"Players log scores and ELO ratings update automatically"})]})]})]})}),(0,UN.jsx)("section",{className:"cta-section",children:(0,UN.jsx)(CN.div,{className:"container",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},children:(0,UN.jsxs)("div",{className:"cta-content",children:[(0,UN.jsx)("h2",{children:"Ready to Elevate Your Club?"}),(0,UN.jsx)("p",{children:"Join clubs using smart tournament management"}),(0,UN.jsxs)(Re,{to:"/register",className:"btn btn-primary btn-large",children:["Start Free Today",(0,UN.jsx)(MN,{className:"w-5 h-5"})]})]})})})]})},VN=PN("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),zN=PN("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),BN=PN("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),WN=PN("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),qN={player:"SquashPlayer2024",owner:"SquashOwner2024"},HN=(e,t)=>qN[e]===t,GN=async(e,t,n)=>{try{const r=await async function(e,t,n){if(jn(e.app))return Promise.reject(Xn(e));const r=ns(e),s=cs(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s),a=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Us(e),t}),i=await Is._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(i.user),i}(Qm,e,t),s=r.user;return await Fs(s,{displayName:"".concat(n.firstName," ").concat(n.lastName)}),await $m(s.uid,Nt(Nt({},n),{},{email:s.email,authProvider:"email"})),{success:!0,user:s}}catch(r){console.error("Error registering with email:",r);let e="Registration failed. Please try again.";return"auth/email-already-in-use"===r.code?e="This email is already registered. Please login instead.":"auth/invalid-email"===r.code?e="Please enter a valid email address.":"auth/weak-password"===r.code&&(e="Password is too weak. Please use at least 6 characters."),{success:!1,error:e}}},KN=async(e,t)=>{try{const n=await function(e,t,n){return jn(e.app)?Promise.reject(Xn(e)):Ms(it(e),Ns.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Us(e),t})}(Qm,e,t),r=await Jm(n.user.uid);return{success:!0,user:n.user,profile:r}}catch(n){console.error("Error logging in with email:",n);let e="Login failed. Please try again.";return"auth/user-not-found"===n.code?e="No account found with this email.":"auth/wrong-password"===n.code?e="Incorrect password. Please try again.":"auth/invalid-email"===n.code?e="Please enter a valid email address.":"auth/too-many-requests"===n.code&&(e="Too many failed attempts. Please try again later."),{success:!1,error:e}}},QN=async()=>{try{console.log("loginWithGoogle: Starting Google popup...");const e=(await async function(e,t,n){if(jn(e.app))return Promise.reject(Qn(e,"operation-not-supported-in-this-environment"));const r=ns(e);$n(e,t,ks);const s=da(r,n);return new ya(r,"signInViaPopup",t,s).executeNotNull()}(Qm,Xm)).user;console.log("loginWithGoogle: Popup successful"),console.log("User ID:",e.uid),console.log("User email:",e.email),console.log("User displayName:",e.displayName),console.log("loginWithGoogle: Checking for existing profile...");const t=await Jm(e.uid);return console.log("loginWithGoogle: Profile check result:",t?"FOUND":"NOT FOUND"),t?(console.log("loginWithGoogle: Returning existing user"),{success:!0,user:e,profile:t,isNewUser:!1}):(console.log("loginWithGoogle: Returning NEW user (needs completion)"),{success:!0,user:e,profile:null,isNewUser:!0})}catch(e){console.error("loginWithGoogle: Error occurred"),console.error("Error code:",e.code),console.error("Error message:",e.message);let t="Google sign-in failed. Please try again.";return"auth/popup-closed-by-user"===e.code?t="Sign-in cancelled. Please try again.":"auth/popup-blocked"===e.code?t="Popup was blocked. Please allow popups and try again.":"auth/cancelled-popup-request"===e.code&&(t="Sign-in cancelled. Please try again."),{success:!1,error:t}}},YN=async()=>{try{return await function(e){return it(e).signOut()}(Qm),{success:!0}}catch(e){return console.error("Error logging out:",e),{success:!1,error:e.message}}},XN=()=>{const e=ae(),[t,n]=(0,s.useState)({email:"",password:""}),[r,a]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),l=e=>{n(Nt(Nt({},t),{},{[e.target.name]:e.target.value})),a("")};return(0,UN.jsx)("div",{className:"auth-page",children:(0,UN.jsx)(CN.div,{className:"auth-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,UN.jsxs)("div",{className:"auth-card card",children:[(0,UN.jsxs)("div",{className:"auth-header",children:[(0,UN.jsx)("h2",{children:"Welcome Back!"}),(0,UN.jsx)("p",{children:"Sign in to access your dashboard"})]}),r&&(0,UN.jsxs)(CN.div,{className:"error-message",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:r})]}),(0,UN.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),o(!0),a("");const r=await KN(t.email,t.password);var s;r.success?"owner"===(null===(s=r.profile)||void 0===s?void 0:s.role)?e("/owner-dashboard"):e("/dashboard"):a(r.error);o(!1)},className:"auth-form",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Email Address"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(zN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"email",name:"email",className:"form-input with-icon",placeholder:"your@email.com",value:t.email,onChange:l,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Password"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(BN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"password",name:"password",className:"form-input with-icon",placeholder:"Enter your password",value:t.password,onChange:l,required:!0})]})]}),(0,UN.jsx)("div",{className:"form-actions",children:(0,UN.jsx)(Re,{to:"/forgot-password",className:"forgot-link",children:"Forgot Password?"})}),(0,UN.jsx)("button",{type:"submit",className:"btn btn-primary btn-full",disabled:i,children:i?(0,UN.jsx)("span",{className:"loading-spinner"}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)(WN,{className:"w-5 h-5"}),"Sign In"]})})]}),(0,UN.jsx)("div",{className:"auth-divider",children:(0,UN.jsx)("span",{children:"OR"})}),(0,UN.jsxs)("button",{type:"button",onClick:async()=>{o(!0),a("");const t=await QN();var n;t.success?t.isNewUser?e("/register"):"owner"===(null===(n=t.profile)||void 0===n?void 0:n.role)?e("/owner-dashboard"):e("/dashboard"):a(t.error);o(!1)},className:"btn btn-google btn-full",disabled:i,children:[(0,UN.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[(0,UN.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,UN.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,UN.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,UN.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,UN.jsx)("div",{className:"auth-footer",children:(0,UN.jsxs)("p",{children:["Don't have an account? ",(0,UN.jsx)(Re,{to:"/register",children:"Sign up"})]})})]})})})},$N=PN("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),JN=PN("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ZN=PN("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),ek=PN("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),tk=PN("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),nk=()=>{const e=ae(),[t,n]=(0,s.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",age:"",role:"player",registrationPassword:""}),[r,a]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(!1),[h,p]=(0,s.useState)({firstName:"",lastName:"",age:"",role:"player",registrationPassword:""}),m=e=>{n(Nt(Nt({},t),{},{[e.target.name]:e.target.value})),a("")},f=e=>{p(Nt(Nt({},h),{},{[e.target.name]:e.target.value})),a("")},g=async t=>{if(t.preventDefault(),!HN(h.role,h.registrationPassword))return void a("Invalid registration password for ".concat("owner"===h.role?"Club Owner":"Player"," account"));if(h.age){const e=parseInt(h.age);if(e<16||e>100)return void a("Age must be between 16 and 100")}o(!0),a("");const n=await(async(e,t)=>{try{console.log("=== Starting completeGoogleRegistration ==="),console.log("userId:",e),console.log("profileData:",t);const n=Qm.currentUser;if(console.log("Current user:",n?n.uid:"none"),!n)return console.error("No current user found"),{success:!1,error:"No user logged in. Please try signing in again."};if(n.uid!==e)return console.error("User ID mismatch:",n.uid,"vs",e),{success:!1,error:"User ID mismatch. Please try again."};const r=(n.displayName||"").split(" "),s={firstName:t.firstName||r[0]||"",lastName:t.lastName||r.slice(1).join(" ")||"",email:n.email,role:t.role,age:t.age||null,photoURL:n.photoURL||null,authProvider:"google"};console.log("Final profile data:",s),console.log("Calling createUserProfile...");const a=await $m(e,s);if(!a.success)return console.error("createUserProfile failed:",a.error),{success:!1,error:a.error};console.log("\u2705 createUserProfile succeeded"),await new Promise(e=>setTimeout(e,1e3)),console.log("Fetching created profile...");const i=await Jm(e);if(console.log("Fetched profile:",i),!i)throw console.error("\u274c Profile was not created - getUserProfile returned null"),new Error("Profile creation verification failed");return console.log("=== completeGoogleRegistration SUCCESS ==="),{success:!0,profile:i}}catch(r){return console.error("=== completeGoogleRegistration ERROR ==="),console.error("Error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message),{success:!1,error:"Failed to complete registration: ".concat(r.message)}}})(l.uid,{firstName:h.firstName,lastName:h.lastName,age:h.age?parseInt(h.age):null,role:h.role});n.success?"owner"===h.role?e("/owner-dashboard"):e("/dashboard"):a(n.error),o(!1)};return u&&l?(0,UN.jsxs)("div",{className:"auth-page",children:[(0,UN.jsx)(CN.div,{className:"auth-container auth-container-large",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,UN.jsxs)("div",{className:"auth-card card",children:[(0,UN.jsxs)("div",{className:"auth-header",children:[(0,UN.jsx)("h2",{children:"Complete Your Profile"}),(0,UN.jsx)("p",{children:"Just a few more details to get you started"})]}),(0,UN.jsxs)("div",{className:"google-account-banner",children:[l.photoURL?(0,UN.jsx)("img",{src:l.photoURL,alt:"Profile",className:"google-avatar"}):(0,UN.jsx)("div",{className:"google-avatar-placeholder",children:(0,UN.jsx)($N,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"google-account-details",children:[(0,UN.jsx)("span",{className:"google-name",children:l.displayName}),(0,UN.jsx)("span",{className:"google-email",children:l.email})]}),(0,UN.jsx)(JN,{className:"w-5 h-5 google-verified"})]}),r&&(0,UN.jsxs)(CN.div,{className:"error-message",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:r})]}),(0,UN.jsxs)("form",{onSubmit:g,className:"auth-form",children:[(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"First Name"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)($N,{className:"input-icon"}),(0,UN.jsx)("input",{type:"text",name:"firstName",className:"form-input with-icon",placeholder:"John",value:h.firstName,onChange:f,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Last Name"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)($N,{className:"input-icon"}),(0,UN.jsx)("input",{type:"text",name:"lastName",className:"form-input with-icon",placeholder:"Doe",value:h.lastName,onChange:f,required:!0})]})]})]}),(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Age (Optional)"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(DN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"number",name:"age",className:"form-input with-icon",placeholder:"25",min:"16",max:"100",value:h.age,onChange:f})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Account Type"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(ZN,{className:"input-icon"}),(0,UN.jsxs)("select",{name:"role",className:"form-input form-select with-icon",value:h.role,onChange:f,required:!0,children:[(0,UN.jsx)("option",{value:"player",children:"Player"}),(0,UN.jsx)("option",{value:"owner",children:"Club Owner"})]})]})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:["Registration Password",(0,UN.jsxs)("span",{className:"label-hint",children:["(","owner"===h.role?"Club Owner":"Player"," password)"]})]}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(ek,{className:"input-icon"}),(0,UN.jsx)("input",{type:"password",name:"registrationPassword",className:"form-input with-icon",placeholder:"Enter registration password",value:h.registrationPassword,onChange:f,required:!0})]}),(0,UN.jsx)("p",{className:"form-hint",children:"Contact your club administrator for the registration password"})]}),(0,UN.jsx)("button",{type:"submit",className:"btn btn-primary btn-full",disabled:i,children:i?(0,UN.jsx)("span",{className:"loading-spinner"}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)(tk,{className:"w-5 h-5"}),"Complete Registration"]})})]}),(0,UN.jsx)("div",{className:"auth-footer",children:(0,UN.jsx)("p",{children:(0,UN.jsx)("button",{type:"button",className:"link-button",onClick:()=>{d(!1),c(null),a("")},children:"\u2190 Back to registration options"})})})]})}),(0,UN.jsx)("style",{children:"\n          .auth-page {\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: var(--spacing-xl);\n            background: linear-gradient(135deg, var(--light-gray) 0%, rgba(255, 107, 53, 0.1) 100%);\n          }\n\n          .auth-container-large {\n            max-width: 550px;\n          }\n\n          .auth-card {\n            padding: var(--spacing-2xl);\n          }\n\n          .auth-header {\n            text-align: center;\n            margin-bottom: var(--spacing-2xl);\n          }\n\n          .auth-header h2 {\n            margin-bottom: var(--spacing-sm);\n          }\n\n          .form-row {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: var(--spacing-md);\n          }\n\n          .google-account-banner {\n            display: flex;\n            align-items: center;\n            gap: var(--spacing-md);\n            padding: var(--spacing-md);\n            background: rgba(76, 175, 80, 0.1);\n            border: 1px solid var(--success);\n            border-radius: var(--radius-md);\n            margin-bottom: var(--spacing-lg);\n          }\n\n          .google-avatar {\n            width: 48px;\n            height: 48px;\n            border-radius: var(--radius-full);\n            object-fit: cover;\n          }\n\n          .google-avatar-placeholder {\n            width: 48px;\n            height: 48px;\n            border-radius: var(--radius-full);\n            background: var(--light-gray);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: var(--gray);\n          }\n\n          .google-account-details {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n          }\n\n          .google-name {\n            font-weight: 600;\n            color: var(--secondary);\n          }\n\n          .google-email {\n            font-size: 0.875rem;\n            color: var(--gray);\n          }\n\n          .google-verified {\n            color: var(--success);\n          }\n\n          .error-message {\n            display: flex;\n            align-items: center;\n            gap: var(--spacing-sm);\n            padding: var(--spacing-md);\n            background: rgba(244, 67, 54, 0.1);\n            border: 1px solid var(--danger);\n            border-radius: var(--radius-md);\n            color: var(--danger);\n            margin-bottom: var(--spacing-lg);\n          }\n\n          .input-wrapper {\n            position: relative;\n          }\n\n          .input-icon {\n            position: absolute;\n            left: 1rem;\n            top: 50%;\n            transform: translateY(-50%);\n            width: 20px;\n            height: 20px;\n            color: var(--gray);\n          }\n\n          .form-input.with-icon {\n            padding-left: 3rem;\n          }\n\n          .label-hint {\n            font-weight: 400;\n            color: var(--gray);\n            font-size: 0.75rem;\n            margin-left: var(--spacing-xs);\n          }\n\n          .form-hint {\n            font-size: 0.75rem;\n            color: var(--gray);\n            margin-top: var(--spacing-xs);\n          }\n\n          .link-button {\n            background: none;\n            border: none;\n            color: var(--primary);\n            cursor: pointer;\n            font-size: inherit;\n            padding: 0;\n          }\n\n          .link-button:hover {\n            text-decoration: underline;\n          }\n\n          .btn-full {\n            width: 100%;\n          }\n\n          .auth-footer {\n            text-align: center;\n            margin-top: var(--spacing-xl);\n          }\n\n          .loading-spinner {\n            display: inline-block;\n            width: 20px;\n            height: 20px;\n            border: 3px solid rgba(255, 255, 255, 0.3);\n            border-top-color: var(--white);\n            border-radius: 50%;\n            animation: spin 0.8s linear infinite;\n          }\n\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n\n          @media (max-width: 600px) {\n            .form-row {\n              grid-template-columns: 1fr;\n            }\n          }\n        "})]}):(0,UN.jsx)("div",{className:"auth-page",children:(0,UN.jsx)(CN.div,{className:"auth-container auth-container-large",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,UN.jsxs)("div",{className:"auth-card card",children:[(0,UN.jsxs)("div",{className:"auth-header",children:[(0,UN.jsx)("h2",{children:"Join the Club"}),(0,UN.jsx)("p",{children:"Create your account to start tracking your ELO"})]}),r&&(0,UN.jsxs)(CN.div,{className:"error-message",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:r})]}),(0,UN.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),!(()=>{if(t.password!==t.confirmPassword)return a("Passwords do not match"),!1;if(t.password.length<6)return a("Password must be at least 6 characters"),!1;const e=parseInt(t.age);return e<16||e>100?(a("Age must be between 16 and 100"),!1):!!HN(t.role,t.registrationPassword)||(a("Invalid registration password for ".concat("owner"===t.role?"Club Owner":"Player"," account")),!1)})())return;o(!0),a("");const r={firstName:t.firstName,lastName:t.lastName,age:parseInt(t.age),role:t.role},s=await GN(t.email,t.password,r);s.success?"owner"===t.role?e("/owner-dashboard"):e("/dashboard"):a(s.error),o(!1)},className:"auth-form",children:[(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"First Name"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)($N,{className:"input-icon"}),(0,UN.jsx)("input",{type:"text",name:"firstName",className:"form-input with-icon",placeholder:"John",value:t.firstName,onChange:m,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Last Name"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)($N,{className:"input-icon"}),(0,UN.jsx)("input",{type:"text",name:"lastName",className:"form-input with-icon",placeholder:"Doe",value:t.lastName,onChange:m,required:!0})]})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Email Address"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(zN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"email",name:"email",className:"form-input with-icon",placeholder:"your@email.com",value:t.email,onChange:m,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Password"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(BN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"password",name:"password",className:"form-input with-icon",placeholder:"Min 6 characters",value:t.password,onChange:m,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Confirm Password"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(BN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"password",name:"confirmPassword",className:"form-input with-icon",placeholder:"Confirm password",value:t.confirmPassword,onChange:m,required:!0})]})]})]}),(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Age"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(DN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"number",name:"age",className:"form-input with-icon",placeholder:"25",min:"16",max:"100",value:t.age,onChange:m,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Account Type"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(ZN,{className:"input-icon"}),(0,UN.jsxs)("select",{name:"role",className:"form-input form-select with-icon",value:t.role,onChange:m,required:!0,children:[(0,UN.jsx)("option",{value:"player",children:"Player"}),(0,UN.jsx)("option",{value:"owner",children:"Club Owner"})]})]})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:["Registration Password",(0,UN.jsxs)("span",{className:"label-hint",children:["(","owner"===t.role?"Club Owner":"Player"," password)"]})]}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(ek,{className:"input-icon"}),(0,UN.jsx)("input",{type:"password",name:"registrationPassword",className:"form-input with-icon",placeholder:"Enter registration password",value:t.registrationPassword,onChange:m,required:!0})]}),(0,UN.jsx)("p",{className:"form-hint",children:"Contact your club administrator for the registration password"})]}),(0,UN.jsx)("button",{type:"submit",className:"btn btn-primary btn-full",disabled:i,children:i?(0,UN.jsx)("span",{className:"loading-spinner"}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)(tk,{className:"w-5 h-5"}),"Create Account"]})})]}),(0,UN.jsx)("div",{className:"auth-divider",children:(0,UN.jsx)("span",{children:"OR"})}),(0,UN.jsxs)("button",{type:"button",onClick:async()=>{o(!0),a(""),console.log("=== handleGoogleSignup START ===");const t=await QN();if(console.log("=== loginWithGoogle result ==="),console.log("Success:",t.success),console.log("isNewUser:",t.isNewUser),console.log("Has user:",!!t.user),console.log("Has profile:",!!t.profile),console.log("Full result:",t),t.success)if(console.log("Login successful"),t.isNewUser){console.log("\ud83c\udd95 NEW USER DETECTED - showing completion form"),c(t.user);const e=t.user.displayName||"",n=e.split(" ");console.log("Display name:",e),console.log("Name parts:",n),p(Nt(Nt({},h),{},{firstName:n[0]||"",lastName:n.slice(1).join(" ")||""})),d(!0),console.log("\u2705 Completion form state set to TRUE")}else{var n,r;console.log("\ud83d\udc64 EXISTING USER - redirecting"),console.log("Profile role:",null===(n=t.profile)||void 0===n?void 0:n.role),"owner"===(null===(r=t.profile)||void 0===r?void 0:r.role)?(console.log("\u2192 Redirecting to owner dashboard"),e("/owner-dashboard")):(console.log("\u2192 Redirecting to player dashboard"),e("/dashboard"))}else console.error("\u274c Login failed:",t.error),a(t.error);o(!1),console.log("=== handleGoogleSignup END ===")},className:"btn btn-google btn-full",disabled:i,children:[(0,UN.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[(0,UN.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,UN.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,UN.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,UN.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,UN.jsx)("div",{className:"auth-footer",children:(0,UN.jsxs)("p",{children:["Already have an account? ",(0,UN.jsx)(Re,{to:"/login",children:"Sign in"})]})})]})})})},rk=PN("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),sk=PN("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ak=PN("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),ik=PN("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ok=()=>{const[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{c()},[]);const c=async()=>{var e;l(!0);const n=null===(e=Qm.currentUser)||void 0===e?void 0:e.uid;if(n){const e=await(async e=>{try{const t=await cf(e),n=await pf(e),r=[...t,...n].map(t=>{if(t.tournamentId){var n,r;const s=t.player1Id===e,a=t.winner===e,i=s?t.player2Name:t.player1Name;let o=0,l=0;return null===(n=t.scores)||void 0===n||n.forEach(e=>{s?(o+=e.player1||0,l+=e.player2||0):(o+=e.player2||0,l+=e.player1||0)}),Nt(Nt({},t),{},{won:a,opponentName:i,playerScore:o,opponentScore:l,scoreDisplay:(null===(r=t.scores)||void 0===r?void 0:r.map(e=>s?"".concat(e.player1,"-").concat(e.player2):"".concat(e.player2,"-").concat(e.player1)).join(", "))||"-",contextDisplay:t.groupName||"Tournament"})}{var s,a;const n=t.team1.some(t=>t.id===e),r=n&&"team1"===t.winner||!n&&"team2"===t.winner,i=(n?t.team2:t.team1).map(e=>e.name).join(" & ");let o=0,l=0;return null===(s=t.scores)||void 0===s||s.forEach(e=>{n?(o+=e.team1||0,l+=e.team2||0):(o+=e.team2||0,l+=e.team1||0)}),Nt(Nt({},t),{},{won:r,opponentName:i,playerScore:o,opponentScore:l,scoreDisplay:(null===(a=t.scores)||void 0===a?void 0:a.map(e=>n?"".concat(e.team1,"-").concat(e.team2):"".concat(e.team2,"-").concat(e.team1)).join(", "))||"-",contextDisplay:"".concat(t.matchMode.charAt(0).toUpperCase()+t.matchMode.slice(1)," ").concat(t.matchType)})}});return r.sort((e,t)=>t.createdAt.toDate()-e.createdAt.toDate()),r}catch(t){return console.error("Error getting player statistics:",t),null}})(n);t(e);const s=await rf({status:"upcoming"});r(s.slice(0,3));const a=await uf(5);i(a)}l(!1)};return o?(0,UN.jsx)("div",{className:"dashboard-loading",children:(0,UN.jsx)("div",{className:"loading-spinner"})}):(0,UN.jsx)("div",{className:"dashboard",children:(0,UN.jsxs)("div",{className:"container",children:[(0,UN.jsxs)(CN.div,{className:"dashboard-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,UN.jsx)("h1",{children:"Player Dashboard"}),(0,UN.jsx)("p",{children:"Track your progress and upcoming matches"})]}),(0,UN.jsxs)("div",{className:"stats-grid",children:[(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(AN,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Current ELO"}),(0,UN.jsxs)("div",{className:"stat-value",children:[(0,UN.jsx)("span",{className:"elo-badge",children:(null===e||void 0===e?void 0:e.currentElo)||1200}),(null===e||void 0===e?void 0:e.lastEloChange)&&(0,UN.jsxs)("span",{className:"elo-change ".concat(null!==e&&void 0!==e&&e.lastEloChange?e.lastEloChange>0?"positive":"negative":null),children:[e.lastEloChange>0?"+":"",e.lastEloChange]})]})]})]}),(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(rk,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Win Rate"}),(0,UN.jsxs)("div",{className:"stat-value",children:[(0,UN.jsxs)("span",{className:"stat-number",children:[(null===e||void 0===e?void 0:e.winRate)||0,"%"]}),(0,UN.jsxs)("span",{className:"stat-subtitle",children:[(null===e||void 0===e?void 0:e.matchesWon)||0,"/",(null===e||void 0===e?void 0:e.matchesPlayed)||0," wins"]})]})]})]}),(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(sk,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Matches Played"}),(0,UN.jsxs)("div",{className:"stat-value",children:[(0,UN.jsx)("span",{className:"stat-number",children:(null===e||void 0===e?void 0:e.matchesPlayed)||0}),(0,UN.jsx)("span",{className:"stat-subtitle",children:"Total matches"})]})]})]}),(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(ak,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Tournaments"}),(0,UN.jsxs)("div",{className:"stat-value",children:[(0,UN.jsx)("span",{className:"stat-number",children:(null===e||void 0===e?void 0:e.tournamentsPlayed)||0}),(0,UN.jsx)("span",{className:"stat-subtitle",children:"Participated"})]})]})]})]}),(0,UN.jsxs)("div",{className:"dashboard-content",children:[(0,UN.jsxs)(CN.div,{className:"content-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,UN.jsxs)("div",{className:"section-header",children:[(0,UN.jsxs)("h2",{children:[(0,UN.jsx)(DN,{className:"w-6 h-6"}),"Upcoming Tournaments"]}),(0,UN.jsx)(Re,{to:"/tournaments",className:"btn btn-ghost btn-small",children:"View All"})]}),(0,UN.jsx)("div",{className:"tournaments-list",children:n.length>0?n.map((e,t)=>{var n;return(0,UN.jsxs)(CN.div,{className:"tournament-card card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+.1*t},children:[(0,UN.jsxs)("div",{className:"tournament-info",children:[(0,UN.jsx)("h4",{children:e.name}),(0,UN.jsxs)("div",{className:"tournament-details",children:[(0,UN.jsxs)("span",{className:"tournament-date",children:[(0,UN.jsx)(ik,{className:"w-4 h-4"}),new Date(e.date).toLocaleDateString()]}),(0,UN.jsxs)("span",{className:"tournament-players",children:[(0,UN.jsx)(ON,{className:"w-4 h-4"}),(null===(n=e.participants)||void 0===n?void 0:n.length)||0," players"]})]})]}),(0,UN.jsx)("div",{className:"tournament-actions",children:(0,UN.jsx)(Re,{to:"/tournament/".concat(e.id),className:"btn btn-primary btn-small",children:"View Details"})})]},e.id)}):(0,UN.jsx)("div",{className:"empty-state",children:(0,UN.jsx)("p",{children:"No upcoming tournaments"})})})]}),(0,UN.jsxs)(CN.div,{className:"content-section",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,UN.jsxs)("div",{className:"section-header",children:[(0,UN.jsxs)("h2",{children:[(0,UN.jsx)(RN,{className:"w-6 h-6"}),"Club Leaderboard"]}),(0,UN.jsx)(Re,{to:"/leaderboard",className:"btn btn-ghost btn-small",children:"Full Rankings"})]}),(0,UN.jsx)("div",{className:"leaderboard",children:a.map((e,t)=>(0,UN.jsxs)(CN.div,{className:"leaderboard-item",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7+.05*t},children:[(0,UN.jsx)("div",{className:"leaderboard-rank",children:e.rank<=3?(0,UN.jsx)("div",{className:"rank-badge rank-".concat(e.rank),children:e.rank}):(0,UN.jsx)("span",{className:"rank-number",children:e.rank})}),(0,UN.jsxs)("div",{className:"leaderboard-player",children:[(0,UN.jsx)("span",{className:"player-name",children:e.name}),(0,UN.jsxs)("span",{className:"player-stats",children:[e.matchesPlayed," matches \u2022 ",e.winRate,"% win rate"]})]}),(0,UN.jsx)("div",{className:"leaderboard-elo",children:(0,UN.jsx)("span",{className:"elo-value",children:e.elo})})]},e.id))})]})]})]})})},lk=PN("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ck=PN("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),uk=PN("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),dk=PN("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),hk=PN("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),pk=PN("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),mk=PN("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fk=PN("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),gk=e=>{let{onClose:t,onSubmit:n}=e;const[r,a]=(0,s.useState)({name:"Wednesday Social Tournament",date:"",time:"18:00",format:"1 game to 21",groupSize:4,maxParticipants:16,description:""}),[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),m=e=>{a(Nt(Nt({},r),{},{[e.target.name]:e.target.value})),p("")};return(0,UN.jsxs)("div",{className:"modal-overlay",onClick:t,children:[(0,UN.jsxs)(CN.div,{className:"modal-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:e=>e.stopPropagation(),children:[(0,UN.jsxs)("div",{className:"modal-header",children:[(0,UN.jsx)("h2",{children:"Create Tournament"}),(0,UN.jsx)("button",{className:"close-btn",onClick:t,children:(0,UN.jsx)(mk,{className:"w-6 h-6"})})]}),h&&(0,UN.jsx)("div",{className:"error-message",children:h}),(0,UN.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),d("Creating Tournament..."),p("");try{const e=await n(r);if(!e.success)throw new Error(e.error||"Failed to create tournament");if(i&&e.tournamentId){d("Dev Tool: Fetching all users...");const t=await Zm();d("Dev Tool: Adding ".concat(t.length," users..."));const n=t.map(t=>sf(e.tournamentId,t.id,t));await Promise.all(n),console.log("Dev Tool: All users added successfully")}}catch(t){console.error(t),p(t.message)}finally{c(!1),d("")}},className:"modal-form",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:[(0,UN.jsx)(AN,{className:"w-4 h-4"}),"Tournament Name"]}),(0,UN.jsx)("input",{type:"text",name:"name",className:"form-input",value:r.name,onChange:m,required:!0})]}),(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:[(0,UN.jsx)(DN,{className:"w-4 h-4"}),"Date"]}),(0,UN.jsx)("input",{type:"date",name:"date",className:"form-input",value:r.date,onChange:m,min:(new Date).toISOString().split("T")[0],required:!0})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:[(0,UN.jsx)(ik,{className:"w-4 h-4"}),"Time"]}),(0,UN.jsx)("input",{type:"time",name:"time",className:"form-input",value:r.time,onChange:m,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:[(0,UN.jsx)(dk,{className:"w-4 h-4"}),"Scoring Format"]}),(0,UN.jsx)("select",{name:"format",className:"form-input form-select",value:r.format,onChange:m,required:!0,children:["1 game to 21","2 games to 15","3 games to 11","Best of 3 to 11","Best of 3 to 15","Best of 5 to 11","Best of 5 to 15","Best of 7 to 11"].map(e=>(0,UN.jsx)("option",{value:e,children:e},e))})]}),(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:[(0,UN.jsx)(ON,{className:"w-4 h-4"}),"Group Size"]}),(0,UN.jsx)("input",{type:"number",name:"groupSize",className:"form-input",value:r.groupSize,onChange:m,min:"2",max:"8",required:!0})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:[(0,UN.jsx)(ON,{className:"w-4 h-4"}),"Max Participants"]}),(0,UN.jsx)("input",{type:"number",name:"maxParticipants",className:"form-input",value:r.maxParticipants,onChange:m,min:"4",max:"64",required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Description (Optional)"}),(0,UN.jsx)("textarea",{name:"description",className:"form-input",rows:"3",value:r.description,onChange:m,placeholder:"Any special instructions or notes..."})]}),(0,UN.jsxs)("div",{className:"dev-tool-section",children:[(0,UN.jsxs)("div",{className:"dev-tool-header",children:[(0,UN.jsx)(fk,{className:"w-4 h-4"}),(0,UN.jsx)("span",{children:"Dev Tools"})]}),(0,UN.jsxs)("label",{className:"dev-checkbox-label",children:[(0,UN.jsx)("input",{type:"checkbox",checked:i,onChange:e=>o(e.target.checked)}),(0,UN.jsx)("span",{children:"Auto-populate with all DB users"})]})]}),(0,UN.jsxs)("div",{className:"modal-actions",children:[(0,UN.jsx)("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:l,children:"Cancel"}),(0,UN.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?u||"Creating...":"Create Tournament"})]})]})]}),(0,UN.jsx)("style",{jsx:!0,children:"\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.5);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: var(--spacing-lg);\n        }\n\n        .modal-content {\n          background: var(--white);\n          border-radius: var(--radius-lg);\n          max-width: 600px;\n          width: 100%;\n          max-height: 90vh;\n          overflow-y: auto;\n          box-shadow: var(--shadow-xl);\n        }\n\n        .modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: var(--spacing-xl);\n          border-bottom: 1px solid var(--light-gray);\n        }\n\n        .modal-header h2 {\n          margin: 0;\n        }\n\n        .close-btn {\n          background: transparent;\n          border: none;\n          color: var(--gray);\n          cursor: pointer;\n          padding: var(--spacing-sm);\n          border-radius: var(--radius-sm);\n          transition: all var(--transition-base);\n        }\n\n        .close-btn:hover {\n          background: var(--light-gray);\n          color: var(--secondary);\n        }\n\n        .modal-form {\n          padding: var(--spacing-xl);\n        }\n\n        .form-label {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-xs);\n        }\n\n        .form-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: var(--spacing-md);\n        }\n\n        .dev-tool-section {\n          margin-top: var(--spacing-lg);\n          padding: var(--spacing-md);\n          border: 1px dashed #fbbf24;\n          border-radius: var(--radius-md);\n          background: rgba(251, 191, 36, 0.05);\n        }\n\n        .dev-tool-header {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-xs);\n          color: #d97706;\n          font-weight: 600;\n          font-size: 0.875rem;\n          margin-bottom: var(--spacing-sm);\n        }\n\n        .dev-checkbox-label {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          cursor: pointer;\n          font-size: 0.875rem;\n          color: var(--dark-gray);\n        }\n\n        .modal-actions {\n          display: flex;\n          justify-content: flex-end;\n          gap: var(--spacing-md);\n          margin-top: var(--spacing-xl);\n        }\n\n        .error-message {\n          margin: var(--spacing-md) var(--spacing-xl) 0;\n          padding: var(--spacing-md);\n          background: rgba(244, 67, 54, 0.1);\n          border: 1px solid var(--danger);\n          border-radius: var(--radius-md);\n          color: var(--danger);\n        }\n\n        @media (max-width: 600px) {\n          .form-row {\n            grid-template-columns: 1fr;\n          }\n        }\n      "})]})},vk=()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)({totalTournaments:0,activePlayers:0,upcomingTournaments:0,completedTournaments:0});(0,s.useEffect)(()=>{d()},[]);const d=async()=>{l(!0);const e=await rf();t(e);const n=await uf(100);r(n),u({totalTournaments:e.length,activePlayers:n.filter(e=>e.matchesPlayed>0).length,upcomingTournaments:e.filter(e=>"upcoming"===e.status).length,activeTournaments:e.filter(e=>"active"===e.status).length,completedTournaments:e.filter(e=>"completed"===e.status).length}),l(!1)},h=(e,t,n)=>{const r=((e,t,n)=>{const r=window.location.origin,s="".concat(r,"/join/").concat(e),a=encodeURIComponent("\ud83c\udff8 You're invited to ".concat(t,"!\n\n")+"\ud83d\udcc5 Date: ".concat(n,"\n")+"\ud83c\udfc6 Join our Wednesday Social Tournament\n\n"+"Click here to confirm your attendance:\n".concat(s));return"https://wa.me/?text=".concat(a)})(e,t,n);window.open(r,"_blank")};return o?(0,UN.jsx)("div",{className:"dashboard-loading",children:(0,UN.jsx)("div",{className:"loading-spinner"})}):(0,UN.jsxs)("div",{className:"dashboard owner-dashboard",children:[(0,UN.jsxs)("div",{className:"container",children:[(0,UN.jsxs)(CN.div,{className:"dashboard-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,UN.jsxs)("div",{className:"header-content",children:[(0,UN.jsx)("h1",{children:"Club Management"}),(0,UN.jsx)("p",{children:"Manage tournaments and track player performance"})]}),(0,UN.jsxs)("button",{className:"btn btn-primary btn-large",onClick:()=>i(!0),children:[(0,UN.jsx)(lk,{className:"w-5 h-5"}),"Create Tournament"]})]}),(0,UN.jsxs)("div",{className:"stats-grid",children:[(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(AN,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Total Tournaments"}),(0,UN.jsx)("div",{className:"stat-value",children:(0,UN.jsx)("span",{className:"stat-number",children:c.totalTournaments})})]})]}),(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(ON,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Active Players"}),(0,UN.jsx)("div",{className:"stat-value",children:(0,UN.jsx)("span",{className:"stat-number",children:c.activePlayers})})]})]}),(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(DN,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Upcoming"}),(0,UN.jsxs)("div",{className:"stat-value",children:[(0,UN.jsx)("span",{className:"stat-number",children:c.upcomingTournaments}),(0,UN.jsx)("span",{className:"stat-subtitle",children:"tournaments"})]})]})]}),(0,UN.jsxs)(CN.div,{className:"stat-card card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(ck,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("h3",{children:"Completed"}),(0,UN.jsxs)("div",{className:"stat-value",children:[(0,UN.jsx)("span",{className:"stat-number",children:c.completedTournaments}),(0,UN.jsx)("span",{className:"stat-subtitle",children:"tournaments"})]})]})]})]}),(0,UN.jsxs)(CN.div,{className:"tournaments-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[(0,UN.jsxs)("div",{className:"section-header",children:[(0,UN.jsx)("h2",{children:"Tournament Management"}),(0,UN.jsxs)("div",{className:"filter-tabs",children:[(0,UN.jsx)("button",{className:"filter-tab active",children:"All"}),(0,UN.jsx)("button",{className:"filter-tab",children:"Upcoming"}),(0,UN.jsx)("button",{className:"filter-tab",children:"Active"}),(0,UN.jsx)("button",{className:"filter-tab",children:"Completed"})]})]}),(0,UN.jsx)("div",{className:"tournaments-grid",children:e.map((e,t)=>{var n;return(0,UN.jsxs)(CN.div,{className:"tournament-management-card card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+.05*t},children:[(0,UN.jsxs)("div",{className:"tournament-header",children:[(0,UN.jsx)("div",{className:"tournament-status",children:(0,UN.jsx)("span",{className:"badge badge-".concat(e.status),children:e.status})}),(0,UN.jsxs)("div",{className:"tournament-actions",children:[(0,UN.jsx)("button",{className:"action-btn",title:"Edit",children:(0,UN.jsx)(uk,{className:"w-4 h-4"})}),(0,UN.jsx)("button",{className:"action-btn",title:"Settings",children:(0,UN.jsx)(dk,{className:"w-4 h-4"})})]})]}),(0,UN.jsxs)("div",{className:"tournament-body",children:[(0,UN.jsx)("h3",{children:e.name}),(0,UN.jsxs)("div",{className:"tournament-meta",children:[(0,UN.jsxs)("span",{className:"meta-item",children:[(0,UN.jsx)(DN,{className:"w-4 h-4"}),new Date(e.date).toLocaleDateString()]}),(0,UN.jsxs)("span",{className:"meta-item",children:[(0,UN.jsx)(ik,{className:"w-4 h-4"}),e.time]}),(0,UN.jsxs)("span",{className:"meta-item",children:[(0,UN.jsx)(ON,{className:"w-4 h-4"}),(null===(n=e.participants)||void 0===n?void 0:n.length)||0," players"]})]}),(0,UN.jsxs)("div",{className:"tournament-format",children:[(0,UN.jsx)("span",{className:"format-label",children:"Format:"}),(0,UN.jsx)("span",{className:"format-value",children:e.format})]})]}),(0,UN.jsxs)("div",{className:"tournament-footer",children:[(0,UN.jsx)(Re,{to:"/tournament/".concat(e.id),className:"btn btn-outline btn-small",children:"Manage"}),(0,UN.jsxs)("button",{className:"btn btn-primary btn-small",onClick:()=>h(e.id,e.name,e.date),children:[(0,UN.jsx)(hk,{className:"w-4 h-4"}),"Send Invites"]})]})]},e.id)})}),0===e.length&&(0,UN.jsxs)("div",{className:"empty-state",children:[(0,UN.jsx)(AN,{className:"w-16 h-16"}),(0,UN.jsx)("h3",{children:"No tournaments yet"}),(0,UN.jsx)("p",{children:"Create your first tournament to get started"}),(0,UN.jsx)("button",{className:"btn btn-primary",onClick:()=>i(!0),children:"Create Tournament"})]})]}),(0,UN.jsxs)(CN.div,{className:"quick-actions-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[(0,UN.jsx)("h2",{children:"Quick Actions"}),(0,UN.jsxs)("div",{className:"quick-actions-grid",children:[(0,UN.jsxs)("button",{className:"quick-action-card",children:[(0,UN.jsx)(pk,{className:"w-8 h-8"}),(0,UN.jsx)("span",{children:"Send Reminders"})]}),(0,UN.jsxs)("button",{className:"quick-action-card",children:[(0,UN.jsx)(ck,{className:"w-8 h-8"}),(0,UN.jsx)("span",{children:"View Reports"})]}),(0,UN.jsxs)(Re,{to:"/players",className:"quick-action-card",children:[(0,UN.jsx)(ON,{className:"w-8 h-8"}),(0,UN.jsx)("span",{children:"Manage Players"})]}),(0,UN.jsxs)(Re,{to:"/settings",className:"quick-action-card",children:[(0,UN.jsx)(dk,{className:"w-8 h-8"}),(0,UN.jsx)("span",{children:"Club Settings"})]})]})]})]}),a&&(0,UN.jsx)(gk,{onClose:()=>i(!1),onSubmit:async e=>{var t,n;const r=await(async e=>{try{const t=Qm.currentUser;if(!t)throw new Error("User not authenticated");const n=Dp(Rp(Ym,"tournaments")),r=n.id;return await Vm(n,Nt(Nt({},e),{},{id:r,createdBy:t.uid,status:"upcoming",participants:[],matches:[],createdAt:qm(),updatedAt:qm()})),console.log("Tournament created successfully:",r),{success:!0,tournamentId:r}}catch(t){return console.error("Error creating tournament:",t),{success:!1,error:t.message}}})(Nt(Nt({},e),{},{ownerId:null===(t=Qm.currentUser)||void 0===t?void 0:t.uid,createdBy:null===(n=Qm.currentUser)||void 0===n?void 0:n.displayName}));return r.success&&(d(),i(!1)),r}})]})},yk=PN("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),bk=PN("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),wk=PN("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),xk=PN("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),Nk=PN("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),kk=PN("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),jk=e=>{let{match:t,onClose:n,onSubmit:r,isOwner:a}=e;const[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),m=(e=>{const t={type:"fixed",games:1,pointsToWin:21};if(!e)return t;const n=e.toLowerCase();return n.startsWith("best of")?(t.type="bestOf",n.includes("best of 3")?(t.games=3,t.gamesToWin=2):n.includes("best of 5")?(t.games=5,t.gamesToWin=3):n.includes("best of 7")&&(t.games=7,t.gamesToWin=4),n.includes("to 15")?t.pointsToWin=15:n.includes("to 11")?t.pointsToWin=11:n.includes("to 9")?t.pointsToWin=9:t.pointsToWin=11):(t.type="fixed",n.includes("1 game")?(t.games=1,t.pointsToWin=21):n.includes("2 games")?(t.games=2,t.pointsToWin=15):n.includes("3 games")&&(t.games=3,t.pointsToWin=11)),t})(t.format);(0,s.useEffect)(()=>{if(t.scores&&t.scores.length>0)o(t.scores);else{const e="bestOf"===m.type?m.gamesToWin:m.games,t=Array(e).fill(null).map(()=>({player1:"",player2:""}));o(t)}},[t]),(0,s.useEffect)(()=>{const e=f(i);c(e)},[i]),(0,s.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const f=e=>{const n=e.filter(e=>""!==e.player1&&""!==e.player2&&!isNaN(parseInt(e.player1))&&!isNaN(parseInt(e.player2)));if(0===n.length)return null;if("fixed"===m.type){if(n.length<m.games)return null;if(1===m.games){const e=parseInt(n[0].player1),r=parseInt(n[0].player2);return e===r?null:e>r?t.player1Id:t.player2Id}{let e=0,r=0;return n.forEach(t=>{e+=parseInt(t.player1),r+=parseInt(t.player2)}),e===r?null:e>r?t.player1Id:t.player2Id}}{let e=0,r=0;return n.forEach(t=>{const n=parseInt(t.player1),s=parseInt(t.player2);n>s?e++:s>n&&r++}),e>=m.gamesToWin?t.player1Id:r>=m.gamesToWin?t.player2Id:null}},g=(e,t,n)=>{const r=[...i];r[e]=Nt(Nt({},r[e]),{},{[t]:n}),o(r)},v=()=>{if("fixed"===m.type){return i.length===m.games&&i.every(e=>""!==e.player1&&""!==e.player2)&&null!==l}return null!==l},y=e=>1===m.games?"Final Score":"Game ".concat(e+1),b=(()=>{if("bestOf"!==m.type)return null;let e=0,t=0;return i.forEach(n=>{if(""!==n.player1&&""!==n.player2){const r=parseInt(n.player1),s=parseInt(n.player2);r>s?e++:s>r&&t++}}),{p1Wins:e,p2Wins:t}})();return(0,UN.jsx)(Df,{children:(0,UN.jsxs)("div",{className:"score-modal-overlay",onClick:n,children:[(0,UN.jsxs)(CN.div,{className:"score-modal-container",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},onClick:e=>e.stopPropagation(),children:[(0,UN.jsxs)("div",{className:"score-modal-header",children:[(0,UN.jsx)("h2",{children:"Enter Match Score"}),(0,UN.jsx)("button",{className:"close-btn",onClick:n,children:(0,UN.jsx)(mk,{className:"w-6 h-6"})})]}),(0,UN.jsxs)("div",{className:"score-modal-body",children:[(0,UN.jsxs)("div",{className:"match-info",children:[(0,UN.jsxs)("div",{className:"players-display",children:[(0,UN.jsxs)("div",{className:"player-name ".concat(l===t.player1Id?"winner":""),children:[t.player1Name,l===t.player1Id&&(0,UN.jsx)(AN,{className:"w-4 h-4"})]}),(0,UN.jsx)("span",{className:"vs",children:"vs"}),(0,UN.jsxs)("div",{className:"player-name ".concat(l===t.player2Id?"winner":""),children:[t.player2Name,l===t.player2Id&&(0,UN.jsx)(AN,{className:"w-4 h-4"})]})]}),(0,UN.jsx)("div",{className:"format-badge",children:t.format}),b&&(0,UN.jsxs)("div",{className:"games-won-display",children:[(0,UN.jsxs)("span",{children:["Games: ",b.p1Wins," - ",b.p2Wins]}),(0,UN.jsxs)("span",{className:"games-needed",children:["(First to ",m.gamesToWin,")"]})]})]}),h&&(0,UN.jsx)("div",{className:"error-message",children:h}),(0,UN.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!v())return;d(!0),p("");const n=i.filter(e=>""!==e.player1&&""!==e.player2).map(e=>({player1:parseInt(e.player1),player2:parseInt(e.player2)})),s=await r(t.id,n,l);s.success||(p(s.error||"Failed to submit score"),d(!1))},className:"score-form",children:[(0,UN.jsxs)("div",{className:"scores-container",children:[(0,UN.jsxs)("div",{className:"scores-header",children:[(0,UN.jsx)("span",{}),(0,UN.jsx)("span",{children:t.player1Name.split(" ")[0]}),(0,UN.jsx)("span",{children:t.player2Name.split(" ")[0]})]}),i.map((e,t)=>(0,UN.jsxs)("div",{className:"score-row",children:[(0,UN.jsx)("label",{className:"game-label",children:y(t)}),(0,UN.jsx)("input",{type:"number",min:"0",max:m.pointsToWin+20,value:e.player1,onChange:e=>g(t,"player1",e.target.value),className:"score-input",placeholder:"0"}),(0,UN.jsx)("input",{type:"number",min:"0",max:m.pointsToWin+20,value:e.player2,onChange:e=>g(t,"player2",e.target.value),className:"score-input",placeholder:"0"})]},t))]}),(()=>{if("bestOf"!==m.type)return!1;if(i.length>=m.games)return!1;let e=0,t=0;const n=i.filter(e=>""!==e.player1&&""!==e.player2);n.forEach(n=>{const r=parseInt(n.player1),s=parseInt(n.player2);r>s?e++:s>r&&t++});const r=e>=m.gamesToWin||t>=m.gamesToWin;return n.length===i.length&&!r})()&&(0,UN.jsxs)("button",{type:"button",className:"btn btn-outline add-game-btn",onClick:()=>{o([...i,{player1:"",player2:""}])},children:["+ Add Game ",i.length+1]}),l&&(0,UN.jsxs)("div",{className:"winner-display",children:[(0,UN.jsx)(kk,{className:"w-5 h-5"}),(0,UN.jsxs)("span",{children:["Winner: ",l===t.player1Id?t.player1Name:t.player2Name]})]}),(0,UN.jsxs)("div",{className:"modal-actions",children:[(0,UN.jsx)("button",{type:"button",className:"btn btn-outline",onClick:n,disabled:u,children:"Cancel"}),(0,UN.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u||!v(),children:u?"Submitting...":"Submit Score"})]})]})]})]}),(0,UN.jsx)("style",{children:"\n          .score-modal-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            width: 100vw;\n            height: 100vh;\n            background: rgba(0, 0, 0, 0.6);\n            backdrop-filter: blur(4px);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 9999;\n            padding: 20px;\n            box-sizing: border-box;\n          }\n\n          .score-modal-container {\n            background: var(--white, #ffffff);\n            border-radius: 16px;\n            max-width: 500px;\n            width: 100%;\n            max-height: 90vh;\n            overflow-y: auto;\n            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n          }\n\n          .score-modal-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 20px 24px;\n            border-bottom: 1px solid var(--light-gray, #e5e7eb);\n            position: sticky;\n            top: 0;\n            background: var(--white, #ffffff);\n            z-index: 10;\n          }\n\n          .score-modal-header h2 {\n            margin: 0;\n            font-size: 1.25rem;\n            font-weight: 600;\n            color: var(--secondary, #1f2937);\n          }\n\n          .close-btn {\n            background: transparent;\n            border: none;\n            color: var(--gray, #6b7280);\n            cursor: pointer;\n            padding: 8px;\n            border-radius: 8px;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n\n          .close-btn:hover {\n            background: var(--light-gray, #f3f4f6);\n            color: var(--secondary, #1f2937);\n          }\n\n          .score-modal-body {\n            padding: 24px;\n          }\n\n          .match-info {\n            padding: 16px;\n            background: var(--light-gray, #f3f4f6);\n            border-radius: 12px;\n            margin-bottom: 20px;\n            text-align: center;\n          }\n\n          .players-display {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 16px;\n            margin-bottom: 12px;\n          }\n\n          .players-display .player-name {\n            font-weight: 600;\n            font-size: 1.1rem;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n            color: var(--secondary, #1f2937);\n          }\n\n          .players-display .player-name.winner {\n            color: var(--success, #22c55e);\n          }\n\n          .players-display .vs {\n            color: var(--gray, #6b7280);\n            font-weight: 400;\n            font-size: 0.875rem;\n          }\n\n          .format-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            background: var(--primary, #3b82f6);\n            color: white;\n            border-radius: 20px;\n            font-size: 0.75rem;\n            font-weight: 600;\n          }\n\n          .games-won-display {\n            margin-top: 12px;\n            font-weight: 600;\n            color: var(--secondary, #1f2937);\n          }\n\n          .games-needed {\n            font-weight: 400;\n            color: var(--gray, #6b7280);\n            font-size: 0.875rem;\n            margin-left: 6px;\n          }\n\n          .error-message {\n            padding: 12px 16px;\n            background: rgba(239, 68, 68, 0.1);\n            border: 1px solid #ef4444;\n            border-radius: 8px;\n            color: #ef4444;\n            margin-bottom: 20px;\n            font-size: 0.875rem;\n          }\n\n          .score-form {\n            display: flex;\n            flex-direction: column;\n            gap: 16px;\n          }\n\n          .scores-container {\n            background: white;\n            border: 1px solid var(--light-gray, #e5e7eb);\n            border-radius: 12px;\n            overflow: hidden;\n          }\n\n          .scores-header {\n            display: grid;\n            grid-template-columns: 100px 1fr 1fr;\n            gap: 12px;\n            padding: 12px 16px;\n            background: var(--secondary, #1f2937);\n            color: white;\n            font-weight: 600;\n            font-size: 0.875rem;\n            text-align: center;\n          }\n\n          .scores-header span:first-child {\n            text-align: left;\n          }\n\n          .score-row {\n            display: grid;\n            grid-template-columns: 100px 1fr 1fr;\n            gap: 12px;\n            padding: 12px 16px;\n            border-bottom: 1px solid var(--light-gray, #e5e7eb);\n            align-items: center;\n          }\n\n          .score-row:last-child {\n            border-bottom: none;\n          }\n\n          .game-label {\n            font-weight: 500;\n            color: var(--secondary, #1f2937);\n            font-size: 0.875rem;\n          }\n\n          .score-input {\n            width: 100%;\n            padding: 10px 12px;\n            border: 2px solid var(--light-gray, #e5e7eb);\n            border-radius: 8px;\n            font-size: 1.25rem;\n            font-weight: 600;\n            text-align: center;\n            transition: border-color 0.2s ease;\n            -moz-appearance: textfield;\n            box-sizing: border-box;\n          }\n\n          .score-input::-webkit-outer-spin-button,\n          .score-input::-webkit-inner-spin-button {\n            -webkit-appearance: none;\n            margin: 0;\n          }\n\n          .score-input:focus {\n            outline: none;\n            border-color: var(--primary, #3b82f6);\n          }\n\n          .score-input::placeholder {\n            color: var(--gray, #9ca3af);\n            font-weight: 400;\n          }\n\n          .add-game-btn {\n            width: 100%;\n            padding: 12px;\n            font-weight: 500;\n          }\n\n          .winner-display {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n            padding: 12px 16px;\n            background: rgba(34, 197, 94, 0.1);\n            border: 1px solid var(--success, #22c55e);\n            border-radius: 8px;\n            color: var(--success, #22c55e);\n            font-weight: 600;\n          }\n\n          .modal-actions {\n            display: flex;\n            justify-content: flex-end;\n            gap: 12px;\n            margin-top: 8px;\n            padding-top: 16px;\n            border-top: 1px solid var(--light-gray, #e5e7eb);\n          }\n\n          .btn {\n            padding: 10px 20px;\n            border-radius: 8px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n            border: none;\n          }\n\n          .btn-outline {\n            background: transparent;\n            border: 1px solid var(--light-gray, #e5e7eb);\n            color: var(--secondary, #1f2937);\n          }\n\n          .btn-outline:hover {\n            background: var(--light-gray, #f3f4f6);\n          }\n\n          .btn-primary {\n            background: var(--primary, #3b82f6);\n            color: white;\n          }\n\n          .btn-primary:hover:not(:disabled) {\n            background: #2563eb;\n          }\n\n          .btn-primary:disabled {\n            opacity: 0.5;\n            cursor: not-allowed;\n          }\n\n          @media (max-width: 500px) {\n            .score-modal-overlay {\n              padding: 10px;\n            }\n\n            .score-modal-container {\n              max-height: 95vh;\n            }\n\n            .scores-header,\n            .score-row {\n              grid-template-columns: 80px 1fr 1fr;\n              gap: 8px;\n              padding: 10px 12px;\n            }\n\n            .score-input {\n              padding: 8px;\n              font-size: 1.1rem;\n            }\n\n            .players-display {\n              flex-direction: column;\n              gap: 8px;\n            }\n\n            .modal-actions {\n              flex-direction: column;\n            }\n\n            .modal-actions .btn {\n              width: 100%;\n            }\n          }\n        "})]})})},Ek=e=>{var t,n,r,a,i,o,l;let{userProfile:c}=e;const{id:u}=ie(),d=ae(),[h,p]=(0,s.useState)(null),[m,f]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[y,b]=(0,s.useState)([]),[w,x]=(0,s.useState)(!0),[N,k]=(0,s.useState)(!1),[j,E]=(0,s.useState)(null),[S,T]=(0,s.useState)(!1),[C,_]=(0,s.useState)(!1),[I,P]=(0,s.useState)(!1),[A,R]=(0,s.useState)(!1),[D,O]=(0,s.useState)(null),[L,M]=(0,s.useState)(""),[U,F]=(0,s.useState)(null),[V,z]=(0,s.useState)(!1),B=null===(t=Qm.currentUser)||void 0===t?void 0:t.uid;(0,s.useEffect)(()=>{W()},[u]);const W=async()=>{var e,t;x(!0);const n=await nf(u);if(!n)return void d("/dashboard");if(p(n),k((null===(e=n.participants)||void 0===e?void 0:e.some(e=>e.userId===B))||!1),T(n.createdBy===B),"upcoming"!==n.status&&(null===(t=n.participants)||void 0===t?void 0:t.length)>0){const e=df(n.participants,n.groupSize||4);v(e)}const r=await lf(u);if(f(r),"active"===n.status||"completed"===n.status){const e=await(async e=>{try{var t;const n=await nf(e),r=await lf(e);if(!n)return null;const s={};null===(t=n.participants)||void 0===t||t.forEach(e=>{s[e.userId]={userId:e.userId,name:e.name,startingElo:e.elo||1200,matchesPlayed:0,matchesWon:0,pointsScored:0,pointsConceded:0}}),r.forEach(e=>{if("completed"!==e.status)return;const t=e.player1Id,n=e.player2Id;var r,a;s[t]&&(s[t].matchesPlayed+=1,e.winner===t&&(s[t].matchesWon+=1),null===(r=e.scores)||void 0===r||r.forEach(e=>{s[t].pointsScored+=e.player1||0,s[t].pointsConceded+=e.player2||0})),s[n]&&(s[n].matchesPlayed+=1,e.winner===n&&(s[n].matchesWon+=1),null===(a=e.scores)||void 0===a||a.forEach(e=>{s[n].pointsScored+=e.player2||0,s[n].pointsConceded+=e.player1||0}))});const a=Object.values(s).map(e=>Nt(Nt({},e),{},{pointDifference:e.pointsScored-e.pointsConceded})).sort((e,t)=>t.matchesWon!==e.matchesWon?t.matchesWon-e.matchesWon:t.pointDifference-e.pointDifference);return{tournament:n,matches:r,standings:a,totalMatches:r.length,completedMatches:r.filter(e=>"completed"===e.status).length}}catch(n){return console.error("Error getting tournament summary:",n),null}})(u);e&&b(e.standings)}x(!1)},q=e=>{var t;return"completed"!==h.status&&("completed"!==e.status&&(!!S||(null===(t=e.players)||void 0===t?void 0:t.includes(B))))},H=e=>e.scores&&0!==e.scores.length?e.scores.map((e,t)=>"".concat(e.player1,"-").concat(e.player2)).join(", "):"-",G=e=>e.winner?e.winner===e.player1Id?e.player1Name:e.player2Name:"-",K=()=>m.length>0&&m.every(e=>"completed"===e.status),Q=(()=>{const e={};return m.forEach(t=>{const n=t.groupName||"Ungrouped";e[n]||(e[n]=[]),e[n].push(t)}),e})(),Y=m.filter(e=>"completed"===e.status).length;if(w)return(0,UN.jsx)("div",{className:"loading-container",children:(0,UN.jsx)("div",{className:"loading-spinner"})});const X=e=>h.groupSettings&&h.groupSettings[e]?h.groupSettings[e].format:h.format,$=async(e,t)=>{z(!0);const n="default"===t?null:{format:t};await(async(e,t,n)=>{try{const r=Dp(Ym,"tournaments",e),s={["groupSettings.".concat(t)]:n,updatedAt:qm()};return await zm(r,s),console.log("Updated settings for ".concat(t)),{success:!0}}catch(r){return console.error("Error updating group settings:",r),{success:!1,error:r.message}}})(u,e,n),await W(),F(null),z(!1)},J=["1 game to 21","2 games to 15","3 games to 11","Best of 3 to 11","Best of 3 to 15","Best of 5 to 11","Best of 5 to 15","Best of 7 to 11"];return(0,UN.jsxs)("div",{className:"tournament-details",children:[(0,UN.jsxs)("div",{className:"container",children:[(0,UN.jsxs)(CN.div,{className:"tournament-header-section",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,UN.jsxs)("div",{className:"tournament-title",children:[(0,UN.jsx)("h1",{children:h.name}),(0,UN.jsx)("span",{className:"badge badge-".concat(h.status),children:h.status})]}),(0,UN.jsxs)("div",{className:"tournament-info-grid",children:[(0,UN.jsxs)("div",{className:"info-item",children:[(0,UN.jsx)(DN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:new Date(h.date).toLocaleDateString()})]}),(0,UN.jsxs)("div",{className:"info-item",children:[(0,UN.jsx)(ik,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:h.time})]}),(0,UN.jsxs)("div",{className:"info-item",children:[(0,UN.jsx)(ON,{className:"w-5 h-5"}),(0,UN.jsxs)("span",{children:[(null===(n=h.participants)||void 0===n?void 0:n.length)||0," / ",h.maxParticipants," players"]})]}),(0,UN.jsxs)("div",{className:"info-item",children:[(0,UN.jsx)(AN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:h.format})]})]}),m.length>0&&(0,UN.jsxs)("div",{className:"match-progress",children:[(0,UN.jsxs)("div",{className:"progress-label",children:[(0,UN.jsx)("span",{children:"Match Progress"}),(0,UN.jsxs)("span",{children:[Y," / ",m.length," completed"]})]}),(0,UN.jsx)("div",{className:"progress-bar",children:(0,UN.jsx)("div",{className:"progress-fill",style:{width:"".concat(Y/m.length*100,"%")}})})]}),h.description&&(0,UN.jsx)("div",{className:"tournament-description",children:(0,UN.jsx)("p",{children:h.description})}),(0,UN.jsxs)("div",{className:"tournament-actions",children:["upcoming"===h.status&&!S&&(0,UN.jsx)(UN.Fragment,{children:N?(0,UN.jsxs)("button",{className:"btn btn-outline",onClick:async()=>{if(!c)return;const e=await(async(e,t)=>{try{const n=Dp(Ym,"tournaments",e),r=await Mm(n);if(!r.exists())return{success:!1,error:"Tournament not found"};const s=(r.data().participants||[]).filter(e=>e.userId!==t);await zm(n,{participants:s,updatedAt:qm()});const a=Dp(Ym,"users",t),i=await Mm(a);if(i.exists()){const t=(i.data().tournaments||[]).filter(t=>t!==e);await zm(a,{tournaments:t,updatedAt:qm()})}return{success:!0}}catch(n){return console.error("Error leaving tournament:",n),{success:!1,error:n.message}}})(u,B);e.success&&W()},children:[(0,UN.jsx)(yk,{className:"w-5 h-5"}),"Leave Tournament"]}):(0,UN.jsxs)("button",{className:"btn btn-primary",onClick:async()=>{if(!c)return;(await sf(u,B,c)).success&&W()},disabled:(null===(r=h.participants)||void 0===r?void 0:r.length)>=h.maxParticipants,children:[(0,UN.jsx)(JN,{className:"w-5 h-5"}),"Join Tournament"]})}),S&&(0,UN.jsxs)("div",{className:"owner-actions",children:["upcoming"===h.status&&(null===(a=h.participants)||void 0===a?void 0:a.length)>=2&&(0,UN.jsxs)("button",{className:"btn btn-primary",onClick:async()=>{var e;if(S&&!((null===(e=h.participants)||void 0===e?void 0:e.length)<2)){P(!0);try{await(async(e,t)=>{try{const n=Dp(Ym,"tournaments",e);return await zm(n,Nt(Nt({},t),{},{updatedAt:qm()})),console.log("Tournament updated successfully"),{success:!0}}catch(n){return console.error("Error updating tournament:",n),{success:!1,error:n.message}}})(u,{status:"active"}),await W()}catch(t){console.error("Error starting tournament:",t)}P(!1)}},disabled:I,children:[(0,UN.jsx)(bk,{className:"w-5 h-5"}),I?"Starting...":"Start Tournament"]}),"active"===h.status&&0===m.length&&(null===(i=h.participants)||void 0===i?void 0:i.length)>=2&&(0,UN.jsxs)("button",{className:"btn btn-success",onClick:async()=>{if(S&&!(m.length>0)){_(!0);try{const e=df(h.participants,h.groupSize||4);for(let t=0;t<e.length;t++){const n="Group ".concat(String.fromCharCode(65+t)),r=X(n);await hf(u,r,e[t],n)}await W()}catch(e){console.error("Error generating matches:",e)}_(!1)}},disabled:C,children:[(0,UN.jsx)(wk,{className:"w-5 h-5 ".concat(C?"spin":"")}),C?"Generating...":"Generate Matches"]}),"active"===h.status&&m.length>0&&(0,UN.jsxs)("button",{className:"btn btn-complete",onClick:async()=>{if(S){R(!0),M(""),O(null);try{const e=await(async e=>{try{var t,n;console.log("=== Starting completeTournament ==="),console.log("Tournament ID:",e);const s=Dp(Ym,"tournaments",e),a=await Mm(s);if(!a.exists())return console.error("Tournament not found"),{success:!1,error:"Tournament not found"};const i=a.data();if(console.log("Tournament:",i.name),"completed"===i.status)return console.log("Tournament already completed"),{success:!1,error:"Tournament is already completed"};const o=await lf(e);console.log("Total matches:",o.length);const l=o.filter(e=>"completed"!==e.status);if(l.length>0)return console.error("Pending matches:",l.length),{success:!1,error:"".concat(l.length," match(es) still pending. Complete all matches first.")};const c={};null===(t=i.participants)||void 0===t||t.forEach(e=>{c[e.userId]=e.elo||1200});const u={};for(const e of i.participants||[])try{const t=await Jm(e.userId);u[e.userId]=t&&t.matchesPlayed||0}catch(r){console.warn("Could not get profile for",e.userId),u[e.userId]=0}const d={},h={};null===(n=i.participants)||void 0===n||n.forEach(e=>{d[e.userId]=0,h[e.userId]={played:0,won:0}}),console.log("Processing matches for ELO calculation..."),o.forEach(e=>{if(!e.winner||!e.player1Id||!e.player2Id)return void console.warn("Skipping invalid match:",e.id);const t=e.player1Id,n=e.player2Id,r=e.winner,s=r===t?n:t,a=c[t]||1200,i=c[n]||1200,o=r===t?a:i,l=s===t?a:i,p=u[r]||0,m=u[s]||0,f=af(o,l,!0,p),g=af(l,o,!1,m);console.log("Match: ".concat(e.player1Name," vs ").concat(e.player2Name)),console.log("  Winner: ".concat(r===t?e.player1Name:e.player2Name," (ELO: ").concat(o,")")),console.log("  Winner K-factor: ".concat(p<30?40:o>=2400?20:32)),console.log("  ELO changes: Winner +".concat(f,", Loser ").concat(g)),void 0!==d[r]&&(d[r]+=f,h[r].played+=1,h[r].won+=1),void 0!==d[s]&&(d[s]+=g,h[s].played+=1)}),console.log("Final ELO changes:",d),console.log("Match stats:",h);const p=[];for(const[e,t]of Object.entries(d)){const n=h[e],r=Dp(Ym,"users",e);console.log("Updating player ".concat(e,": ELO change ").concat(t,", matches played ").concat(n.played,", won ").concat(n.won)),p.push(zm(r,{elo:Gm(t),matchesPlayed:Gm(n.played),matchesWon:Gm(n.won),tournamentsPlayed:Gm(1),lastEloChange:t,updatedAt:qm()}))}return await Promise.all(p),console.log("All player ELOs updated"),await zm(s,{status:"completed",completedAt:qm(),updatedAt:qm(),eloChanges:d,finalStandings:Object.entries(h).map(e=>{let[t,n]=e;return Nt(Nt({id:t},n),{},{eloChange:d[t]})}).sort((e,t)=>t.won-e.won||t.played-e.played)}),console.log("=== Tournament completed successfully ==="),{success:!0,eloChanges:d,matchStats:h}}catch(s){return console.error("=== Error completing tournament ==="),console.error("Error:",s),{success:!1,error:s.message}}})(u);e.success?(O(e),await W()):M(e.error)}catch(e){console.error("Error completing tournament:",e),M(e.message)}R(!1)}},disabled:A||!K(),title:K()?"End tournament and calculate ELO":"Complete all matches first",children:[(0,UN.jsx)(xk,{className:"w-5 h-5 ".concat(A?"spin":"")}),A?"Completing...":"Complete Tournament"]})]})]}),L&&(0,UN.jsxs)("div",{className:"completion-error",children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:L})]}),S&&"upcoming"===h.status&&(0,UN.jsxs)("div",{className:"owner-info-banner",children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("strong",{children:"You are the tournament organizer."}),(0,UN.jsx)("p",{children:'Once you have enough participants, click "Start Tournament" to begin. Then generate matches for all groups.'})]})]}),S&&"active"===h.status&&0===m.length&&(0,UN.jsxs)("div",{className:"owner-info-banner warning",children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("strong",{children:"Tournament is active but has no matches."}),(0,UN.jsx)("p",{children:'Click "Generate Matches" to create round-robin matches for all groups.'})]})]}),S&&"active"===h.status&&K()&&(0,UN.jsxs)("div",{className:"owner-info-banner success",children:[(0,UN.jsx)(JN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("strong",{children:"All matches completed!"}),(0,UN.jsx)("p",{children:'Click "Complete Tournament" to finalize results and update player ELO ratings.'})]})]}),S&&"active"===h.status&&m.length>0&&!K()&&(0,UN.jsxs)("div",{className:"owner-info-banner",children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsxs)("strong",{children:[m.length-Y," match(es) remaining."]}),(0,UN.jsx)("p",{children:"Once all matches are completed, you can finalize the tournament."})]})]})]}),"completed"===h.status&&y.length>0&&(0,UN.jsxs)(CN.div,{className:"tournament-summary",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:[(0,UN.jsxs)("div",{className:"summary-header",children:[(0,UN.jsx)(ak,{className:"w-8 h-8"}),(0,UN.jsx)("h2",{children:"Tournament Results"})]}),(0,UN.jsx)("div",{className:"standings-podium",children:y.slice(0,3).map((e,t)=>(0,UN.jsxs)("div",{className:"podium-place place-".concat(t+1),children:[(0,UN.jsxs)("div",{className:"podium-rank",children:[0===t&&"\ud83e\udd47",1===t&&"\ud83e\udd48",2===t&&"\ud83e\udd49"]}),(0,UN.jsx)("div",{className:"podium-name",children:e.name}),(0,UN.jsxs)("div",{className:"podium-stats",children:[e.matchesWon,"W - ",e.matchesPlayed-e.matchesWon,"L"]})]},e.userId))}),(0,UN.jsxs)("div",{className:"full-standings",children:[(0,UN.jsx)("h3",{children:"Final Standings"}),(0,UN.jsxs)("table",{className:"standings-table",children:[(0,UN.jsx)("thead",{children:(0,UN.jsxs)("tr",{children:[(0,UN.jsx)("th",{children:"#"}),(0,UN.jsx)("th",{children:"Player"}),(0,UN.jsx)("th",{children:"Played"}),(0,UN.jsx)("th",{children:"Won"}),(0,UN.jsx)("th",{children:"Lost"}),(0,UN.jsx)("th",{children:"Points +/-"})]})}),(0,UN.jsx)("tbody",{children:y.map((e,t)=>(0,UN.jsxs)("tr",{className:e.userId===B?"is-me":"",children:[(0,UN.jsx)("td",{className:"rank-cell",children:t+1}),(0,UN.jsx)("td",{className:"name-cell",children:e.name}),(0,UN.jsx)("td",{children:e.matchesPlayed}),(0,UN.jsx)("td",{className:"won-cell",children:e.matchesWon}),(0,UN.jsx)("td",{className:"lost-cell",children:e.matchesPlayed-e.matchesWon}),(0,UN.jsxs)("td",{className:"diff-cell ".concat(e.pointDifference>=0?"positive":"negative"),children:[e.pointDifference>=0?"+":"",e.pointDifference]})]},e.userId))})]})]})]}),(0,UN.jsxs)(CN.div,{className:"participants-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,UN.jsxs)("h2",{children:["Participants (",(null===(o=h.participants)||void 0===o?void 0:o.length)||0,")"]}),(0,UN.jsx)("div",{className:"participants-grid",children:(null===(l=h.participants)||void 0===l?void 0:l.length)>0?h.participants.map((e,t)=>(0,UN.jsxs)("div",{className:"participant-card ".concat(e.userId===B?"is-me":""),children:[(0,UN.jsxs)("div",{className:"participant-rank",children:["#",t+1]}),(0,UN.jsxs)("div",{className:"participant-info",children:[(0,UN.jsxs)("span",{className:"participant-name",children:[e.name,e.userId===B&&(0,UN.jsx)("span",{className:"me-badge",children:"You"})]}),(0,UN.jsxs)("span",{className:"participant-elo",children:["ELO: ",e.elo]})]})]},e.userId)):(0,UN.jsx)("p",{className:"empty-state",children:"No participants yet"})})]}),g.length>0&&(0,UN.jsxs)(CN.div,{className:"groups-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,UN.jsx)("h2",{children:"Tournament Groups"}),(0,UN.jsx)("div",{className:"groups-grid",children:g.map((e,t)=>{var n;const r="Group ".concat(String.fromCharCode(65+t)),s=X(r),a=null!=(null===(n=h.groupSettings)||void 0===n?void 0:n[r]),i=m.some(e=>e.groupName===r);return(0,UN.jsxs)("div",{className:"group-card card",children:[(0,UN.jsxs)("div",{className:"group-header",children:[(0,UN.jsxs)("div",{className:"group-title-stack",children:[(0,UN.jsx)("h3",{children:r}),(0,UN.jsx)("span",{className:"group-rules-text",children:a?(0,UN.jsx)("span",{className:"text-highlight",children:s}):(0,UN.jsxs)("span",{className:"text-muted",children:["Default (",s,")"]})})]}),S&&!i&&(0,UN.jsxs)("div",{className:"settings-wrapper",children:[(0,UN.jsx)("button",{className:"btn-icon ".concat(U===r?"active":""),onClick:()=>F(U===r?null:r),children:(0,UN.jsx)(dk,{className:"w-4 h-4"})}),(0,UN.jsx)(Df,{children:U===r&&(0,UN.jsxs)(CN.div,{className:"settings-popover",initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},children:[(0,UN.jsx)("h4",{children:"Edit Scoring"}),(0,UN.jsxs)("div",{className:"popover-options",children:[(0,UN.jsx)("button",{className:"popover-option ".concat(a?"":"selected"),onClick:()=>$(r,"default"),children:"Use Default"}),(0,UN.jsx)("div",{className:"divider"}),J.map(e=>(0,UN.jsx)("button",{className:"popover-option ".concat(s===e&&a?"selected":""),onClick:()=>$(r,e),children:e},e))]})]})})]})]}),i&&(0,UN.jsx)("div",{className:"format-locked-badge",children:(0,UN.jsx)("span",{className:"text-muted text-sm",children:"\u2713 Format Locked"})}),(0,UN.jsx)("div",{className:"group-players",children:e.map((e,t)=>(0,UN.jsxs)("div",{className:"group-player ".concat(e.userId===B?"is-me":""),children:[(0,UN.jsx)("span",{className:"player-seed",children:t+1}),(0,UN.jsx)("span",{className:"player-name",children:e.name}),(0,UN.jsx)("span",{className:"player-elo",children:e.elo})]},e.userId))})]},t)})})]}),Object.keys(Q).length>0&&(0,UN.jsxs)(CN.div,{className:"matches-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,UN.jsxs)("div",{className:"section-header",children:[(0,UN.jsx)("h2",{children:"Matches"}),(0,UN.jsxs)("div",{className:"format-info",children:[(0,UN.jsx)(VN,{className:"w-4 h-4"}),(0,UN.jsxs)("span",{children:["Format: ",h.format]})]})]}),Object.entries(Q).map(e=>{let[t,n]=e;return(0,UN.jsxs)("div",{className:"group-matches",children:[(0,UN.jsx)("h3",{className:"group-matches-title",children:t}),(0,UN.jsx)("div",{className:"matches-table-container",children:(0,UN.jsxs)("table",{className:"matches-table",children:[(0,UN.jsx)("thead",{children:(0,UN.jsxs)("tr",{children:[(0,UN.jsx)("th",{children:"Player 1"}),(0,UN.jsx)("th",{children:"Player 2"}),(0,UN.jsx)("th",{children:"Score"}),(0,UN.jsx)("th",{children:"Winner"}),(0,UN.jsx)("th",{children:"Status"}),(0,UN.jsx)("th",{children:"Action"})]})}),(0,UN.jsx)("tbody",{children:n.map(e=>{var t;return(0,UN.jsxs)("tr",{className:"\n                            ".concat("completed"===e.status?"completed":"","\n                            ").concat(null!==(t=e.players)&&void 0!==t&&t.includes(B)?"my-match":"","\n                          "),children:[(0,UN.jsx)("td",{className:e.winner===e.player1Id?"winner-cell":"",children:(0,UN.jsxs)("div",{className:"player-cell",children:[e.player1Name,e.winner===e.player1Id&&(0,UN.jsx)(AN,{className:"w-4 h-4 winner-icon"})]})}),(0,UN.jsx)("td",{className:e.winner===e.player2Id?"winner-cell":"",children:(0,UN.jsxs)("div",{className:"player-cell",children:[e.player2Name,e.winner===e.player2Id&&(0,UN.jsx)(AN,{className:"w-4 h-4 winner-icon"})]})}),(0,UN.jsx)("td",{className:"score-cell",children:H(e)}),(0,UN.jsx)("td",{className:"winner-name-cell",children:G(e)}),(0,UN.jsx)("td",{children:(0,UN.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})}),(0,UN.jsx)("td",{children:q(e)?(0,UN.jsxs)("button",{className:"btn btn-small btn-primary",onClick:()=>E(e),children:[(0,UN.jsx)(Nk,{className:"w-4 h-4"}),"Enter Score"]}):"completed"===e.status?(0,UN.jsxs)("span",{className:"completed-text",children:[(0,UN.jsx)(JN,{className:"w-4 h-4"}),"Done"]}):(0,UN.jsx)("span",{className:"pending-text",children:"-"})})]},e.id)})})]})})]},t)}),(0,UN.jsxs)("div",{className:"table-legend",children:[(0,UN.jsxs)("div",{className:"legend-item",children:[(0,UN.jsx)("span",{className:"legend-color my-match-color"}),(0,UN.jsx)("span",{children:"Your Match"})]}),(0,UN.jsxs)("div",{className:"legend-item",children:[(0,UN.jsx)("span",{className:"legend-color completed-color"}),(0,UN.jsx)("span",{children:"Completed"})]})]})]}),0===m.length&&"active"===h.status&&!S&&(0,UN.jsxs)(CN.div,{className:"no-matches-message",initial:{opacity:0},animate:{opacity:1},children:[(0,UN.jsx)(VN,{className:"w-8 h-8"}),(0,UN.jsx)("p",{children:"No matches have been created for this tournament yet."}),(0,UN.jsx)("p",{className:"hint",children:"The tournament organizer will generate matches soon."})]}),"upcoming"===h.status&&(0,UN.jsxs)(CN.div,{className:"tournament-not-started",initial:{opacity:0},animate:{opacity:1},children:[(0,UN.jsx)(ik,{className:"w-8 h-8"}),(0,UN.jsx)("p",{children:"Tournament hasn't started yet."}),(0,UN.jsx)("p",{className:"hint",children:N?"You're registered! Matches will be available once the tournament starts.":"Join now to participate when the tournament begins."})]})]}),j&&(0,UN.jsx)(jk,{match:j,onClose:()=>E(null),onSubmit:async(e,t,n)=>{try{return await(async(e,t,n)=>{try{const r=Dp(Ym,"matches",e);return await zm(r,{scores:t,winner:n,status:"completed",completedAt:qm(),updatedAt:qm()}),console.log("Match score updated successfully"),{success:!0}}catch(r){return console.error("Error updating match score:",r),{success:!1,error:r.message}}})(e,t,n),await W(),E(null),{success:!0}}catch(r){return console.error("Error submitting score:",r),{success:!1,error:r.message}}},isOwner:S})]})},Sk=PN("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Tk=PN("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ck=e=>{let{userProfile:t}=e;const n=ae(),[r,a]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[l,c]=(0,s.useState)("all"),[u,d]=(0,s.useState)("");(0,s.useEffect)(()=>{h()},[]);const h=async()=>{o(!0);const e=await rf();a(e),o(!1)},p=r.filter(e=>("all"===l||e.status===l)&&!(u&&!e.name.toLowerCase().includes(u.toLowerCase()))),m=e=>{const t={upcoming:{label:"Upcoming",class:"badge-upcoming"},active:{label:"Active",class:"badge-active"},completed:{label:"Completed",class:"badge-completed"}};return t[e]||t.upcoming},f=e=>{if(!e)return"TBD";return new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})},g=e=>{var n;return null===(n=e.participants)||void 0===n?void 0:n.some(e=>e.userId===(null===t||void 0===t?void 0:t.id))};return(0,UN.jsx)("div",{className:"page-container",children:(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)(CN.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,UN.jsx)("div",{className:"page-header",children:(0,UN.jsxs)("div",{children:[(0,UN.jsx)("h1",{children:"Tournaments"}),(0,UN.jsx)("p",{className:"page-subtitle",children:"Browse and join upcoming tournaments"})]})}),(0,UN.jsxs)("div",{className:"filters-section card",children:[(0,UN.jsxs)("div",{className:"search-bar",children:[(0,UN.jsx)(Sk,{className:"w-5 h-5"}),(0,UN.jsx)("input",{type:"text",placeholder:"Search tournaments...",value:u,onChange:e=>d(e.target.value),className:"search-input"})]}),(0,UN.jsx)("div",{className:"filter-tabs",children:[{key:"all",label:"All"},{key:"upcoming",label:"Upcoming"},{key:"active",label:"Active"},{key:"completed",label:"Completed"}].map(e=>{let{key:t,label:n}=e;return(0,UN.jsx)("button",{onClick:()=>c(t),className:"filter-tab ".concat(l===t?"active":""),children:n},t)})})]}),i?(0,UN.jsxs)("div",{className:"loading-state",children:[(0,UN.jsx)("div",{className:"spinner"}),(0,UN.jsx)("p",{children:"Loading tournaments..."})]}):0===p.length?(0,UN.jsxs)("div",{className:"empty-state card",children:[(0,UN.jsx)(AN,{className:"w-16 h-16 opacity-20"}),(0,UN.jsx)("h3",{children:"No tournaments found"}),(0,UN.jsx)("p",{children:"Check back later for upcoming tournaments"})]}):(0,UN.jsx)("div",{className:"tournaments-grid",children:p.map(e=>{var t;return(0,UN.jsxs)(CN.div,{className:"tournament-card card",whileHover:{y:-4},onClick:()=>n("/tournament/".concat(e.id)),children:[(0,UN.jsxs)("div",{className:"tournament-header",children:[(0,UN.jsx)("h3",{children:e.name}),(0,UN.jsx)("span",{className:"badge ".concat(m(e.status).class),children:m(e.status).label})]}),(0,UN.jsxs)("div",{className:"tournament-details",children:[(0,UN.jsxs)("div",{className:"detail-item",children:[(0,UN.jsx)(DN,{className:"w-4 h-4"}),(0,UN.jsx)("span",{children:f(e.date)})]}),(0,UN.jsxs)("div",{className:"detail-item",children:[(0,UN.jsx)(ik,{className:"w-4 h-4"}),(0,UN.jsx)("span",{children:e.time||"TBD"})]}),(0,UN.jsxs)("div",{className:"detail-item",children:[(0,UN.jsx)(ON,{className:"w-4 h-4"}),(0,UN.jsxs)("span",{children:[(null===(t=e.participants)||void 0===t?void 0:t.length)||0,"/",e.maxParticipants||16," players"]})]})]}),e.description&&(0,UN.jsx)("p",{className:"tournament-description",children:e.description}),(0,UN.jsxs)("div",{className:"tournament-footer",children:[g(e)?(0,UN.jsxs)("span",{className:"participating-badge",children:[(0,UN.jsx)(AN,{className:"w-4 h-4"}),"You're participating"]}):(0,UN.jsxs)("div",{className:"tournament-format",children:[(0,UN.jsx)(AN,{className:"w-4 h-4"}),(0,UN.jsx)("span",{children:e.format||"1 game to 21"})]}),(0,UN.jsx)(Tk,{className:"w-5 h-5 chevron-icon"})]})]},e.id)})})]})})})},_k=PN("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ik=e=>{let{userProfile:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[o,l]=(0,s.useState)("all");(0,s.useEffect)(()=>{c()},[]);const c=async()=>{i(!0);const e=await uf(50);r(e),i(!1)},u=e=>e>=1800?"elo-master":e>=1600?"elo-expert":e>=1400?"elo-advanced":e>=1200?"elo-intermediate":"elo-beginner",d=e=>e>=1800?"Master":e>=1600?"Expert":e>=1400?"Advanced":e>=1200?"Intermediate":"Beginner",h=n.findIndex(e=>e.id===(null===t||void 0===t?void 0:t.id))+1;return(0,UN.jsx)("div",{className:"page-container",children:(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)(CN.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,UN.jsx)("div",{className:"page-header",children:(0,UN.jsxs)("div",{children:[(0,UN.jsx)("h1",{children:"Leaderboard"}),(0,UN.jsx)("p",{className:"page-subtitle",children:"Top players ranked by ELO rating"})]})}),h>0&&(0,UN.jsx)("div",{className:"user-rank-card card",children:(0,UN.jsxs)("div",{className:"user-rank-content",children:[(0,UN.jsxs)("div",{className:"user-rank-info",children:[(0,UN.jsx)("h3",{children:"Your Rank"}),(0,UN.jsxs)("div",{className:"user-rank-stats",children:[(0,UN.jsxs)("div",{className:"stat-item",children:[(0,UN.jsx)(AN,{className:"w-5 h-5"}),(0,UN.jsxs)("span",{className:"stat-value",children:["#",h]})]}),(0,UN.jsxs)("div",{className:"stat-item",children:[(0,UN.jsx)(rk,{className:"w-5 h-5"}),(0,UN.jsxs)("span",{className:"stat-value",children:[(null===t||void 0===t?void 0:t.elo)||1200," ELO"]})]}),(0,UN.jsxs)("div",{className:"stat-item",children:[(0,UN.jsx)(_k,{className:"w-5 h-5"}),(0,UN.jsx)("span",{className:"stat-value",children:d((null===t||void 0===t?void 0:t.elo)||1200)})]})]})]}),(0,UN.jsx)("div",{className:"elo-badge ".concat(u((null===t||void 0===t?void 0:t.elo)||1200)),children:d((null===t||void 0===t?void 0:t.elo)||1200)})]})}),a?(0,UN.jsxs)("div",{className:"loading-state",children:[(0,UN.jsx)("div",{className:"spinner"}),(0,UN.jsx)("p",{children:"Loading leaderboard..."})]}):0===n.length?(0,UN.jsxs)("div",{className:"empty-state card",children:[(0,UN.jsx)(AN,{className:"w-16 h-16 opacity-20"}),(0,UN.jsx)("h3",{children:"No players yet"}),(0,UN.jsx)("p",{children:"Be the first to compete!"})]}):(0,UN.jsx)("div",{className:"leaderboard-container card",children:(0,UN.jsx)("div",{className:"leaderboard-table",children:n.map((e,n)=>{return(0,UN.jsxs)(CN.div,{className:"leaderboard-row ".concat(e.id===(null===t||void 0===t?void 0:t.id)?"current-user":""," ").concat(n<3?"top-three":""),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*n},children:[(0,UN.jsx)("div",{className:"rank-cell",children:(r=e.rank,1===r?(0,UN.jsx)(AN,{className:"w-6 h-6 text-yellow-500"}):2===r?(0,UN.jsx)(ak,{className:"w-6 h-6 text-gray-400"}):3===r?(0,UN.jsx)(ak,{className:"w-6 h-6 text-orange-600"}):(0,UN.jsxs)("span",{className:"rank-number",children:["#",r]}))}),(0,UN.jsx)("div",{className:"player-cell",children:(0,UN.jsxs)("div",{className:"player-info",children:[(0,UN.jsx)("span",{className:"player-name",children:e.name}),(0,UN.jsx)("span",{className:"player-tier ".concat(u(e.elo)),children:d(e.elo)})]})}),(0,UN.jsx)("div",{className:"elo-cell",children:(0,UN.jsxs)("div",{className:"elo-value",children:[(0,UN.jsx)("span",{className:"elo-number",children:e.elo}),(0,UN.jsx)("span",{className:"elo-label",children:"ELO"})]})}),(0,UN.jsxs)("div",{className:"stats-cell",children:[(0,UN.jsxs)("div",{className:"stat-group",children:[(0,UN.jsx)("span",{className:"stat-label",children:"Matches"}),(0,UN.jsx)("span",{className:"stat-number",children:e.matchesPlayed})]}),(0,UN.jsxs)("div",{className:"stat-group",children:[(0,UN.jsx)("span",{className:"stat-label",children:"Won"}),(0,UN.jsx)("span",{className:"stat-number win",children:e.matchesWon})]}),(0,UN.jsxs)("div",{className:"stat-group",children:[(0,UN.jsx)("span",{className:"stat-label",children:"Win Rate"}),(0,UN.jsxs)("span",{className:"stat-number",children:[e.winRate,"%"]})]})]}),e.id===(null===t||void 0===t?void 0:t.id)&&(0,UN.jsx)("div",{className:"you-badge",children:"You"})]},e.id);var r})})})]})})})},Pk=PN("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ak=PN("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Rk=e=>{var t,n;let{user:r,userProfile:a}=e;const[i,o]=(0,s.useState)(a),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)({firstName:(null===a||void 0===a?void 0:a.firstName)||"",lastName:(null===a||void 0===a?void 0:a.lastName)||"",age:(null===a||void 0===a?void 0:a.age)||""}),[h,p]=(0,s.useState)(!1),[m,f]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0),[w,x]=(0,s.useState)({totalPointsScored:0,totalPointsConceded:0,avgPointsScored:0,avgPointsConceded:0});(0,s.useEffect)(()=>{N()},[null===r||void 0===r?void 0:r.uid]);const N=async()=>{if(null===r||void 0===r||!r.uid)return;b(!0);const e=await Jm(r.uid);e&&(o(e),d({firstName:e.firstName||"",lastName:e.lastName||"",age:e.age||""}));const t=await(async e=>{try{const t=(await rf()).filter(t=>{var n;return null===(n=t.participants)||void 0===n?void 0:n.some(t=>t.userId===e)});return t.sort((e,t)=>new Date(t.date)-new Date(e.date)),t}catch(t){return console.error("Error getting player tournaments:",t),[]}})(r.uid);f(t);const n=await(async e=>{try{const t=await cf(e),n=await pf(e),r=[...t,...n].map(t=>{if(t.tournamentId){var n,r;const s=t.player1Id===e,a=t.winner===e,i=s?t.player2Name:t.player1Name;let o=0,l=0;return null===(n=t.scores)||void 0===n||n.forEach(e=>{s?(o+=e.player1||0,l+=e.player2||0):(o+=e.player2||0,l+=e.player1||0)}),Nt(Nt({},t),{},{won:a,opponentName:i,playerScore:o,opponentScore:l,scoreDisplay:(null===(r=t.scores)||void 0===r?void 0:r.map(e=>s?"".concat(e.player1,"-").concat(e.player2):"".concat(e.player2,"-").concat(e.player1)).join(", "))||"-",contextDisplay:t.groupName||"Tournament"})}{var s,a;const n=t.team1.some(t=>t.id===e),r=n&&"team1"===t.winner||!n&&"team2"===t.winner,i=(n?t.team2:t.team1).map(e=>e.name).join(" & ");let o=0,l=0;return null===(s=t.scores)||void 0===s||s.forEach(e=>{n?(o+=e.team1||0,l+=e.team2||0):(o+=e.team2||0,l+=e.team1||0)}),Nt(Nt({},t),{},{won:r,opponentName:i,playerScore:o,opponentScore:l,scoreDisplay:(null===(a=t.scores)||void 0===a?void 0:a.map(e=>n?"".concat(e.team1,"-").concat(e.team2):"".concat(e.team2,"-").concat(e.team1)).join(", "))||"-",contextDisplay:"".concat(t.matchMode.charAt(0).toUpperCase()+t.matchMode.slice(1)," ").concat(t.matchType)})}});return r.sort((e,t)=>t.createdAt.toDate()-e.createdAt.toDate()),r}catch(t){return console.error("Error getting player match history:",t),[]}})(r.uid);if(v(n.slice(0,10)),n.length>0){let e=0,t=0,r=0;n.forEach(n=>{"completed"===n.status&&(e+=n.playerScore||0,t+=n.opponentScore||0,r++)}),x({totalPointsScored:e,totalPointsConceded:t,avgPointsScored:r>0?(e/r).toFixed(1):0,avgPointsConceded:r>0?(t/r).toFixed(1):0})}b(!1)},k=e=>{d(Nt(Nt({},u),{},{[e.target.name]:e.target.value}))},j=(null===i||void 0===i?void 0:i.matchesPlayed)>0?Math.round(i.matchesWon/i.matchesPlayed*100):0,E=((null===i||void 0===i?void 0:i.matchesPlayed)||0)-((null===i||void 0===i?void 0:i.matchesWon)||0);return(0,UN.jsx)("div",{className:"profile-page",children:(0,UN.jsxs)("div",{className:"container",children:[(0,UN.jsxs)(CN.div,{className:"profile-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,UN.jsx)("h1",{children:"My Profile"}),!l&&(0,UN.jsxs)("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[(0,UN.jsx)(uk,{className:"w-5 h-5"}),"Edit Profile"]})]}),(0,UN.jsxs)(CN.div,{className:"stats-overview",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,UN.jsxs)("div",{className:"main-stat elo-stat",children:[(0,UN.jsx)("div",{className:"stat-icon-large",children:(0,UN.jsx)(AN,{className:"w-8 h-8"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-label",children:"Current ELO Rating"}),(0,UN.jsx)("span",{className:"stat-value-large",children:(null===i||void 0===i?void 0:i.elo)||1200}),void 0!==(null===i||void 0===i?void 0:i.lastEloChange)&&0!==(null===i||void 0===i?void 0:i.lastEloChange)&&(0,UN.jsxs)("span",{className:"elo-change-badge ".concat(i.lastEloChange>0?"positive":"negative"),children:[i.lastEloChange>0?(0,UN.jsx)(RN,{className:"w-4 h-4"}):(0,UN.jsx)(Pk,{className:"w-4 h-4"}),i.lastEloChange>0?"+":"",i.lastEloChange," from last tournament"]})]})]}),(0,UN.jsxs)("div",{className:"stats-grid-small",children:[(0,UN.jsxs)("div",{className:"mini-stat",children:[(0,UN.jsx)(sk,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"mini-stat-value",children:(null===i||void 0===i?void 0:i.matchesPlayed)||0}),(0,UN.jsx)("span",{className:"mini-stat-label",children:"Matches Played"})]})]}),(0,UN.jsxs)("div",{className:"mini-stat",children:[(0,UN.jsx)(ak,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"mini-stat-value won",children:(null===i||void 0===i?void 0:i.matchesWon)||0}),(0,UN.jsx)("span",{className:"mini-stat-label",children:"Matches Won"})]})]}),(0,UN.jsxs)("div",{className:"mini-stat",children:[(0,UN.jsx)(mk,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"mini-stat-value lost",children:E}),(0,UN.jsx)("span",{className:"mini-stat-label",children:"Matches Lost"})]})]}),(0,UN.jsxs)("div",{className:"mini-stat",children:[(0,UN.jsx)(rk,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsxs)("span",{className:"mini-stat-value",children:[j,"%"]}),(0,UN.jsx)("span",{className:"mini-stat-label",children:"Win Rate"})]})]}),(0,UN.jsxs)("div",{className:"mini-stat",children:[(0,UN.jsx)(DN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"mini-stat-value",children:(null===i||void 0===i?void 0:i.tournamentsPlayed)||0}),(0,UN.jsx)("span",{className:"mini-stat-label",children:"Tournaments"})]})]})]})]}),(0,UN.jsxs)("div",{className:"profile-content",children:[(0,UN.jsxs)(CN.div,{className:"profile-section card",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[(0,UN.jsx)("h2",{children:"Personal Information"}),l?(0,UN.jsxs)("div",{className:"edit-form",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"First Name"}),(0,UN.jsx)("input",{type:"text",name:"firstName",className:"form-input",value:u.firstName,onChange:k})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Last Name"}),(0,UN.jsx)("input",{type:"text",name:"lastName",className:"form-input",value:u.lastName,onChange:k})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Age"}),(0,UN.jsx)("input",{type:"number",name:"age",className:"form-input",value:u.age,onChange:k,min:"16",max:"100"})]}),(0,UN.jsxs)("div",{className:"edit-actions",children:[(0,UN.jsxs)("button",{className:"btn btn-outline",onClick:()=>{d({firstName:(null===i||void 0===i?void 0:i.firstName)||"",lastName:(null===i||void 0===i?void 0:i.lastName)||"",age:(null===i||void 0===i?void 0:i.age)||""}),c(!1)},disabled:h,children:[(0,UN.jsx)(mk,{className:"w-5 h-5"}),"Cancel"]}),(0,UN.jsxs)("button",{className:"btn btn-primary",onClick:async()=>{p(!0),await(async(e,t)=>{try{const n=Dp(Ym,"users",e);return await zm(n,Nt(Nt({},t),{},{updatedAt:qm()})),{success:!0}}catch(n){return console.error("Error updating user profile:",n),{success:!1,error:n.message}}})(r.uid,u);const e=await Jm(r.uid);e&&o(e),c(!1),p(!1)},disabled:h,children:[(0,UN.jsx)(Ak,{className:"w-5 h-5"}),h?"Saving...":"Save Changes"]})]})]}):(0,UN.jsxs)("div",{className:"profile-info",children:[(0,UN.jsxs)("div",{className:"info-row",children:[(0,UN.jsx)($N,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"info-label",children:"Full Name"}),(0,UN.jsxs)("span",{className:"info-value",children:[null===i||void 0===i?void 0:i.firstName," ",null===i||void 0===i?void 0:i.lastName]})]})]}),(0,UN.jsxs)("div",{className:"info-row",children:[(0,UN.jsx)(zN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"info-label",children:"Email"}),(0,UN.jsx)("span",{className:"info-value",children:null===r||void 0===r?void 0:r.email})]})]}),(0,UN.jsxs)("div",{className:"info-row",children:[(0,UN.jsx)(DN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"info-label",children:"Age"}),(0,UN.jsxs)("span",{className:"info-value",children:[(null===i||void 0===i?void 0:i.age)||"-"," years"]})]})]}),(0,UN.jsxs)("div",{className:"info-row",children:[(0,UN.jsx)(ak,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"info-label",children:"Account Type"}),(0,UN.jsx)("span",{className:"info-value badge-inline",children:"owner"===(null===i||void 0===i?void 0:i.role)?"Club Owner":"Player"})]})]}),(0,UN.jsxs)("div",{className:"info-row",children:[(0,UN.jsx)(ik,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"info-label",children:"Member Since"}),(0,UN.jsx)("span",{className:"info-value",children:new Date((null===i||void 0===i||null===(t=i.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||Date.now()).toLocaleDateString()})]})]})]})]}),(0,UN.jsxs)(CN.div,{className:"profile-section card",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,UN.jsx)("h2",{children:"Performance Overview"}),(null===i||void 0===i?void 0:i.matchesPlayed)>0?(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsxs)("div",{className:"win-loss-bar",children:[(0,UN.jsx)("div",{className:"win-portion",style:{width:"".concat(j,"%")},children:j>15&&(0,UN.jsxs)("span",{children:[null===i||void 0===i?void 0:i.matchesWon," W"]})}),(0,UN.jsx)("div",{className:"loss-portion",style:{width:"".concat(100-j,"%")},children:100-j>15&&(0,UN.jsxs)("span",{children:[E," L"]})})]}),(0,UN.jsxs)("div",{className:"win-loss-legend",children:[(0,UN.jsxs)("div",{className:"legend-item",children:[(0,UN.jsx)("span",{className:"legend-color win"}),(0,UN.jsxs)("span",{children:["Wins (",null===i||void 0===i?void 0:i.matchesWon,")"]})]}),(0,UN.jsxs)("div",{className:"legend-item",children:[(0,UN.jsx)("span",{className:"legend-color loss"}),(0,UN.jsxs)("span",{children:["Losses (",E,")"]})]})]}),(0,UN.jsx)("div",{className:"performance-stats",children:(0,UN.jsxs)("div",{className:"perf-stat-grid",children:[(0,UN.jsxs)("div",{className:"perf-stat-item",children:[(0,UN.jsx)(RN,{className:"w-5 h-5 stat-icon-positive"}),(0,UN.jsxs)("div",{className:"perf-stat-content",children:[(0,UN.jsx)("span",{className:"perf-stat-value",children:w.avgPointsScored}),(0,UN.jsx)("span",{className:"perf-stat-label",children:"Avg Points Scored"})]})]}),(0,UN.jsxs)("div",{className:"perf-stat-item",children:[(0,UN.jsx)(Pk,{className:"w-5 h-5 stat-icon-negative"}),(0,UN.jsxs)("div",{className:"perf-stat-content",children:[(0,UN.jsx)("span",{className:"perf-stat-value",children:w.avgPointsConceded}),(0,UN.jsx)("span",{className:"perf-stat-label",children:"Avg Points Conceded"})]})]}),(0,UN.jsxs)("div",{className:"perf-stat-item",children:[(0,UN.jsx)(rk,{className:"w-5 h-5 stat-icon-neutral"}),(0,UN.jsxs)("div",{className:"perf-stat-content",children:[(0,UN.jsxs)("span",{className:"perf-stat-value ".concat(w.totalPointsScored-w.totalPointsConceded>=0?"positive":"negative"),children:[w.totalPointsScored-w.totalPointsConceded>=0?"+":"",w.totalPointsScored-w.totalPointsConceded]}),(0,UN.jsx)("span",{className:"perf-stat-label",children:"Point Differential"})]})]}),(0,UN.jsxs)("div",{className:"perf-stat-item",children:[(0,UN.jsx)(ck,{className:"w-5 h-5 stat-icon-neutral"}),(0,UN.jsxs)("div",{className:"perf-stat-content",children:[(0,UN.jsx)("span",{className:"perf-stat-value",children:w.totalPointsScored}),(0,UN.jsx)("span",{className:"perf-stat-label",children:"Total Points Scored"})]})]})]})})]}):(0,UN.jsxs)("div",{className:"empty-performance",children:[(0,UN.jsx)(sk,{className:"w-12 h-12"}),(0,UN.jsx)("p",{children:"No matches played yet"}),(0,UN.jsx)("span",{children:"Join a tournament to start tracking your performance!"})]})]})]}),(0,UN.jsxs)(CN.div,{className:"matches-section card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,UN.jsx)("div",{className:"section-header",children:(0,UN.jsx)("h2",{children:"Recent Matches"})}),y?(0,UN.jsxs)("div",{className:"loading-state",children:[(0,UN.jsx)("div",{className:"loading-spinner"}),(0,UN.jsx)("p",{children:"Loading matches..."})]}):g.length>0?(0,UN.jsx)("div",{className:"matches-list",children:g.map((e,t)=>(0,UN.jsxs)("div",{className:"match-item ".concat(e.won?"won":"lost"),children:[(0,UN.jsx)("div",{className:"match-result-badge",children:e.won?"W":"L"}),(0,UN.jsxs)("div",{className:"match-details",children:[(0,UN.jsxs)("span",{className:"opponent-name",children:["vs ",e.opponentName]}),(0,UN.jsx)("span",{className:"match-score",children:e.scoreDisplay})]}),(0,UN.jsxs)("div",{className:"match-meta",children:[(0,UN.jsx)("span",{className:"match-tournament",children:e.contextDisplay}),(0,UN.jsx)("span",{className:"match-format",children:e.format})]})]},e.id))}):(0,UN.jsx)("div",{className:"empty-state",children:(0,UN.jsx)("p",{children:"No matches played yet"})})]}),(0,UN.jsxs)(CN.div,{className:"tournaments-section card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[(0,UN.jsx)("div",{className:"section-header",children:(0,UN.jsx)("h2",{children:"Tournament History"})}),y?(0,UN.jsxs)("div",{className:"loading-state",children:[(0,UN.jsx)("div",{className:"loading-spinner"}),(0,UN.jsx)("p",{children:"Loading tournaments..."})]}):m.length>0?(0,UN.jsx)("div",{className:"tournament-history-list",children:m.map((e,t)=>(0,UN.jsxs)(Re,{to:"/tournament/".concat(e.id),className:"tournament-history-item",children:[(0,UN.jsxs)("div",{className:"tournament-info",children:[(0,UN.jsx)("span",{className:"tournament-name",children:e.name}),(0,UN.jsxs)("span",{className:"tournament-date",children:[(0,UN.jsx)(DN,{className:"w-4 h-4"}),new Date(e.date).toLocaleDateString()]})]}),(0,UN.jsxs)("div",{className:"tournament-status",children:[(0,UN.jsx)("span",{className:"badge badge-".concat(e.status),children:e.status}),(0,UN.jsx)(Tk,{className:"w-5 h-5"})]})]},e.id))}):(0,UN.jsxs)("div",{className:"empty-state",children:[(0,UN.jsx)(AN,{className:"w-12 h-12"}),(0,UN.jsx)("p",{children:"No tournaments joined yet"}),(0,UN.jsx)(Re,{to:"/tournaments",className:"btn btn-primary",children:"Browse Tournaments"})]})]})]})})},Dk=()=>{var e,t,n,r;const{tournamentId:a}=ie(),i=ae(),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),[d,h]=(0,s.useState)(!1),[p,m]=(0,s.useState)(null),[f,g]=(0,s.useState)(null),[v,y]=(0,s.useState)("");(0,s.useEffect)(()=>{const e=Vs(Qm,async e=>{if(e){m(e);const t=await Jm(e.uid);g(t)}});return b(),()=>e()},[a]);const b=async()=>{u(!0);const e=await nf(a);l(e),u(!1)};if(c)return(0,UN.jsx)("div",{className:"loading-container",children:(0,UN.jsx)("div",{className:"loading-spinner"})});if(!o)return(0,UN.jsxs)("div",{className:"error-container",children:[(0,UN.jsx)("h2",{children:"Tournament Not Found"}),(0,UN.jsx)("p",{children:"This tournament link may be invalid or expired."}),(0,UN.jsx)("button",{className:"btn btn-primary",onClick:()=>i("/"),children:"Go to Home"})]});const w=p&&(null===(e=o.participants)||void 0===e?void 0:e.some(e=>e.userId===p.uid)),x=(null===(t=o.participants)||void 0===t?void 0:t.length)>=o.maxParticipants;return(0,UN.jsx)("div",{className:"join-tournament-page",children:(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)(CN.div,{className:"join-card card",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[(0,UN.jsxs)("div",{className:"tournament-banner",children:[(0,UN.jsx)(AN,{className:"banner-icon"}),(0,UN.jsx)("h1",{children:"You're Invited!"})]}),(0,UN.jsxs)("div",{className:"tournament-details",children:[(0,UN.jsx)("h2",{children:o.name}),(0,UN.jsxs)("div",{className:"details-grid",children:[(0,UN.jsxs)("div",{className:"detail-item",children:[(0,UN.jsx)(DN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"detail-label",children:"Date"}),(0,UN.jsx)("span",{className:"detail-value",children:new Date(o.date).toLocaleDateString()})]})]}),(0,UN.jsxs)("div",{className:"detail-item",children:[(0,UN.jsx)(ik,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"detail-label",children:"Time"}),(0,UN.jsx)("span",{className:"detail-value",children:o.time})]})]}),(0,UN.jsxs)("div",{className:"detail-item",children:[(0,UN.jsx)(ON,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"detail-label",children:"Players"}),(0,UN.jsxs)("span",{className:"detail-value",children:[(null===(n=o.participants)||void 0===n?void 0:n.length)||0," / ",o.maxParticipants]})]})]}),(0,UN.jsxs)("div",{className:"detail-item",children:[(0,UN.jsx)(AN,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{children:[(0,UN.jsx)("span",{className:"detail-label",children:"Format"}),(0,UN.jsx)("span",{className:"detail-value",children:o.format})]})]})]}),o.description&&(0,UN.jsx)("div",{className:"tournament-description",children:(0,UN.jsx)("p",{children:o.description})}),v&&(0,UN.jsx)("div",{className:"error-message",children:v}),(0,UN.jsx)("div",{className:"join-actions",children:w?(0,UN.jsxs)("div",{className:"already-joined",children:[(0,UN.jsx)(JN,{className:"w-6 h-6"}),(0,UN.jsx)("span",{children:"You're already registered for this tournament!"}),(0,UN.jsx)("button",{className:"btn btn-primary",onClick:()=>i("/tournament/".concat(a)),children:"View Tournament"})]}):x?(0,UN.jsxs)("div",{className:"tournament-full",children:[(0,UN.jsx)("span",{children:"Sorry, this tournament is full!"}),(0,UN.jsx)("button",{className:"btn btn-outline",onClick:()=>i("/dashboard"),children:"Browse Other Tournaments"})]}):(0,UN.jsx)(UN.Fragment,{children:p?(0,UN.jsx)("button",{className:"btn btn-primary btn-large",onClick:async()=>{if(!p)return void i("/login?redirect=/join/".concat(a));if(!f)return y("Please complete your profile first"),void setTimeout(()=>i("/profile"),2e3);h(!0);const e=await sf(a,p.uid,f);e.success?i("/tournament/".concat(a)):y(e.error||"Failed to join tournament"),h(!1)},disabled:d,children:d?(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)("span",{className:"loading-spinner"}),"Joining..."]}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)(JN,{className:"w-5 h-5"}),"Join Tournament"]})}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)("p",{className:"join-prompt",children:"Sign in or create an account to join this tournament"}),(0,UN.jsxs)("div",{className:"auth-buttons",children:[(0,UN.jsxs)("button",{className:"btn btn-primary btn-large",onClick:()=>i("/login?redirect=/join/".concat(a)),children:[(0,UN.jsx)(WN,{className:"w-5 h-5"}),"Sign In"]}),(0,UN.jsx)("button",{className:"btn btn-outline btn-large",onClick:()=>i("/register?redirect=/join/".concat(a)),children:"Create Account"})]})]})})})]}),(0,UN.jsxs)("div",{className:"participants-preview",children:[(0,UN.jsxs)("h3",{children:["Current Participants (",(null===(r=o.participants)||void 0===r?void 0:r.length)||0,")"]}),o.participants&&o.participants.length>0?(0,UN.jsxs)("div",{className:"participants-list",children:[o.participants.slice(0,8).map(e=>(0,UN.jsxs)("div",{className:"participant-chip",children:[(0,UN.jsx)("span",{className:"participant-name",children:e.name}),(0,UN.jsxs)("span",{className:"participant-elo",children:["ELO ",e.elo]})]},e.userId)),o.participants.length>8&&(0,UN.jsxs)("div",{className:"more-participants",children:["+",o.participants.length-8," more"]})]}):(0,UN.jsx)("p",{className:"no-participants",children:"Be the first to join!"})]})]})})})},Ok=PN("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Lk=PN("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Mk=PN("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Uk=PN("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Fk=PN("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Vk=()=>{var e;const[t,n]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[i,o]=(0,s.useState)(""),[l,c]=(0,s.useState)("all"),[u,d]=(0,s.useState)("all"),[h,p]=(0,s.useState)("name"),[m,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(null),[w,x]=(0,s.useState)(!1),[N,k]=(0,s.useState)(""),[j,E]=(0,s.useState)(""),S=null===(e=Qm.currentUser)||void 0===e?void 0:e.uid;(0,s.useEffect)(()=>{T()},[]);const T=async()=>{a(!0);try{const e=await Zm();n(e)}catch(e){console.error("Error loading members:",e)}a(!1)},C=t.filter(e=>{const t="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),n=(e.email||"").toLowerCase(),r=t.includes(i.toLowerCase())||n.includes(i.toLowerCase()),s="all"===l||"active"===l&&!e.disabled||"disabled"===l&&e.disabled,a="all"===u||e.role===u;return r&&s&&a}).sort((e,t)=>{var n,r,s,a;switch(h){case"name":return"".concat(e.firstName," ").concat(e.lastName).localeCompare("".concat(t.firstName," ").concat(t.lastName));case"elo":return(t.elo||1200)-(e.elo||1200);case"matches":return(t.matchesPlayed||0)-(e.matchesPlayed||0);case"joined":const i=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date(0);return((null===(s=t.createdAt)||void 0===s||null===(a=s.toDate)||void 0===a?void 0:a.call(s))||new Date(0))-i;default:return 0}}),_=()=>{switch(y){case"disable":return{title:"Disable Member",message:"Are you sure you want to disable ".concat(null===m||void 0===m?void 0:m.firstName," ").concat(null===m||void 0===m?void 0:m.lastName,"? They will not be able to log in or participate in tournaments."),buttonText:"Disable Member",buttonClass:"btn-warning",icon:(0,UN.jsx)(Ok,{className:"w-6 h-6"})};case"enable":return{title:"Enable Member",message:"Re-enable ".concat(null===m||void 0===m?void 0:m.firstName," ").concat(null===m||void 0===m?void 0:m.lastName,"? They will be able to log in and participate normally."),buttonText:"Enable Member",buttonClass:"btn-success",icon:(0,UN.jsx)(Lk,{className:"w-6 h-6"})};case"remove":return{title:"Remove Member",message:"Are you sure you want to permanently remove ".concat(null===m||void 0===m?void 0:m.firstName," ").concat(null===m||void 0===m?void 0:m.lastName,"? This action cannot be undone and will delete all their data."),buttonText:"Remove Permanently",buttonClass:"btn-danger",icon:(0,UN.jsx)(Mk,{className:"w-6 h-6"})};default:return{}}},I=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return r?(0,UN.jsx)("div",{className:"page-container",children:(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)("div",{className:"loading-state",children:[(0,UN.jsx)("div",{className:"spinner"}),(0,UN.jsx)("p",{children:"Loading members..."})]})})}):(0,UN.jsxs)("div",{className:"page-container member-management",children:[(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)(CN.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,UN.jsxs)("div",{className:"page-header",children:[(0,UN.jsxs)("div",{children:[(0,UN.jsxs)("h1",{children:[(0,UN.jsx)(ON,{className:"w-8 h-8"}),"Member Management"]}),(0,UN.jsx)("p",{className:"page-subtitle",children:"Manage club members, disable accounts, or remove users"})]}),(0,UN.jsxs)("button",{className:"btn btn-outline",onClick:T,children:[(0,UN.jsx)(wk,{className:"w-5 h-5"}),"Refresh"]})]}),j&&(0,UN.jsxs)(CN.div,{className:"success-banner",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,UN.jsx)(Lk,{className:"w-5 h-5"}),j]}),(0,UN.jsxs)("div",{className:"stats-grid",children:[(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(ON,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-value",children:t.length}),(0,UN.jsx)("span",{className:"stat-label",children:"Total Members"})]})]}),(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon active",children:(0,UN.jsx)(Lk,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-value",children:t.filter(e=>!e.disabled).length}),(0,UN.jsx)("span",{className:"stat-label",children:"Active Members"})]})]}),(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon disabled",children:(0,UN.jsx)(Uk,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-value",children:t.filter(e=>e.disabled).length}),(0,UN.jsx)("span",{className:"stat-label",children:"Disabled"})]})]}),(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon owner",children:(0,UN.jsx)(ZN,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-value",children:t.filter(e=>"owner"===e.role).length}),(0,UN.jsx)("span",{className:"stat-label",children:"Owners"})]})]})]}),(0,UN.jsxs)("div",{className:"filters-section card",children:[(0,UN.jsxs)("div",{className:"search-bar",children:[(0,UN.jsx)(Sk,{className:"w-5 h-5"}),(0,UN.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:i,onChange:e=>o(e.target.value),className:"search-input"})]}),(0,UN.jsxs)("div",{className:"filter-controls",children:[(0,UN.jsxs)("div",{className:"filter-group",children:[(0,UN.jsx)("label",{children:"Status"}),(0,UN.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"filter-select",children:[(0,UN.jsx)("option",{value:"all",children:"All Status"}),(0,UN.jsx)("option",{value:"active",children:"Active"}),(0,UN.jsx)("option",{value:"disabled",children:"Disabled"})]})]}),(0,UN.jsxs)("div",{className:"filter-group",children:[(0,UN.jsx)("label",{children:"Role"}),(0,UN.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"filter-select",children:[(0,UN.jsx)("option",{value:"all",children:"All Roles"}),(0,UN.jsx)("option",{value:"player",children:"Players"}),(0,UN.jsx)("option",{value:"owner",children:"Owners"})]})]}),(0,UN.jsxs)("div",{className:"filter-group",children:[(0,UN.jsx)("label",{children:"Sort By"}),(0,UN.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"filter-select",children:[(0,UN.jsx)("option",{value:"name",children:"Name"}),(0,UN.jsx)("option",{value:"elo",children:"ELO Rating"}),(0,UN.jsx)("option",{value:"matches",children:"Matches Played"}),(0,UN.jsx)("option",{value:"joined",children:"Date Joined"})]})]})]})]}),(0,UN.jsx)("div",{className:"members-table-container card",children:0===C.length?(0,UN.jsxs)("div",{className:"empty-state",children:[(0,UN.jsx)(ON,{className:"w-16 h-16 opacity-20"}),(0,UN.jsx)("h3",{children:"No members found"}),(0,UN.jsx)("p",{children:"Try adjusting your search or filters"})]}):(0,UN.jsxs)("table",{className:"members-table",children:[(0,UN.jsx)("thead",{children:(0,UN.jsxs)("tr",{children:[(0,UN.jsx)("th",{children:"Member"}),(0,UN.jsx)("th",{children:"Role"}),(0,UN.jsx)("th",{children:"ELO"}),(0,UN.jsx)("th",{children:"Matches"}),(0,UN.jsx)("th",{children:"Win Rate"}),(0,UN.jsx)("th",{children:"Joined"}),(0,UN.jsx)("th",{children:"Status"}),(0,UN.jsx)("th",{children:"Actions"})]})}),(0,UN.jsx)("tbody",{children:C.map(e=>{var t,n;return(0,UN.jsxs)("tr",{className:"\n                        ".concat(e.disabled?"disabled-row":"","\n                        ").concat(e.id===S?"current-user-row":"","\n                      "),children:[(0,UN.jsx)("td",{className:"member-cell",children:(0,UN.jsxs)("div",{className:"member-info",children:[e.photoURL?(0,UN.jsx)("img",{src:e.photoURL,alt:e.firstName,className:"member-avatar"}):(0,UN.jsxs)("div",{className:"member-avatar-placeholder",children:[null===(t=e.firstName)||void 0===t?void 0:t[0],null===(n=e.lastName)||void 0===n?void 0:n[0]]}),(0,UN.jsxs)("div",{className:"member-details",children:[(0,UN.jsxs)("span",{className:"member-name",children:[e.firstName," ",e.lastName,e.id===S&&(0,UN.jsx)("span",{className:"you-badge",children:"You"})]}),(0,UN.jsx)("span",{className:"member-email",children:e.email})]})]})}),(0,UN.jsx)("td",{children:(0,UN.jsxs)("span",{className:"role-badge role-".concat(e.role),children:["owner"===e.role&&(0,UN.jsx)(ZN,{className:"w-3 h-3"}),e.role]})}),(0,UN.jsxs)("td",{className:"elo-cell",children:[(0,UN.jsx)(RN,{className:"w-4 h-4"}),e.elo||1200]}),(0,UN.jsx)("td",{children:e.matchesPlayed||0}),(0,UN.jsx)("td",{children:e.matchesPlayed>0?"".concat(Math.round(e.matchesWon/e.matchesPlayed*100),"%"):"-"}),(0,UN.jsx)("td",{className:"date-cell",children:I(e.createdAt)}),(0,UN.jsx)("td",{children:(0,UN.jsx)("span",{className:"status-badge status-".concat(e.disabled?"disabled":"active"),children:e.disabled?"Disabled":"Active"})}),(0,UN.jsx)("td",{className:"actions-cell",children:e.id!==S&&(0,UN.jsxs)("div",{className:"action-buttons",children:[e.disabled?(0,UN.jsx)("button",{className:"btn btn-small btn-success",onClick:()=>(e=>{f(e),b("enable"),v(!0),k("")})(e),title:"Enable user",children:(0,UN.jsx)(Lk,{className:"w-4 h-4"})}):(0,UN.jsx)("button",{className:"btn btn-small btn-warning",onClick:()=>(e=>{f(e),b("disable"),v(!0),k("")})(e),title:"Disable user",children:(0,UN.jsx)(Ok,{className:"w-4 h-4"})}),(0,UN.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>(e=>{f(e),b("remove"),v(!0),k("")})(e),title:"Remove user permanently",children:(0,UN.jsx)(Mk,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),(0,UN.jsxs)("div",{className:"results-count",children:["Showing ",C.length," of ",t.length," members"]})]})}),(0,UN.jsx)(Df,{children:g&&m&&(0,UN.jsx)(CN.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>v(!1),children:(0,UN.jsxs)(CN.div,{className:"modal-content confirm-modal",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:e=>e.stopPropagation(),children:[(0,UN.jsx)("div",{className:"modal-icon ".concat(y),children:_().icon}),(0,UN.jsx)("h2",{children:_().title}),(0,UN.jsx)("p",{children:_().message}),N&&(0,UN.jsxs)("div",{className:"modal-error",children:[(0,UN.jsx)(Fk,{className:"w-5 h-5"}),N]}),(0,UN.jsxs)("div",{className:"modal-actions",children:[(0,UN.jsx)("button",{className:"btn btn-outline",onClick:()=>v(!1),disabled:w,children:"Cancel"}),(0,UN.jsx)("button",{className:"btn ".concat(_().buttonClass),onClick:async()=>{if(m&&y){x(!0),k(""),E("");try{let e;switch(y){case"disable":e=await(async e=>{try{const t=Dp(Ym,"users",e);return await zm(t,{disabled:!0,disabledAt:qm(),updatedAt:qm()}),console.log("User disabled successfully:",e),{success:!0}}catch(t){return console.error("Error disabling user:",t),{success:!1,error:t.message}}})(m.id),e.success&&E("".concat(m.firstName," ").concat(m.lastName," has been disabled"));break;case"enable":e=await(async e=>{try{const t=Dp(Ym,"users",e);return await zm(t,{disabled:!1,disabledAt:null,updatedAt:qm()}),console.log("User enabled successfully:",e),{success:!0}}catch(t){return console.error("Error enabling user:",t),{success:!1,error:t.message}}})(m.id),e.success&&E("".concat(m.firstName," ").concat(m.lastName," has been enabled"));break;case"remove":e=await ef(m.id),e.success&&E("".concat(m.firstName," ").concat(m.lastName," has been removed"))}e&&!e.success?k(e.error):(await T(),v(!1),f(null),b(null),setTimeout(()=>E(""),3e3))}catch(e){k(e.message)}x(!1)}},disabled:w,children:w?(0,UN.jsx)("span",{className:"loading-spinner"}):_().buttonText})]})]})})})]})},zk=PN("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Bk=PN("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),Wk=e=>{var t,n,r,a,i,o,l,c,u;let{isOpen:d,onClose:h,onMatchCreated:p,userProfile:m}=e;const[f,g]=(0,s.useState)("1v1"),[v,y]=(0,s.useState)("ranked"),[b,w]=(0,s.useState)("Best of 3 to 11"),[x,N]=(0,s.useState)(null),[k,j]=(0,s.useState)(null),[E,S]=(0,s.useState)(null),[T,C]=(0,s.useState)([]),[_,I]=(0,s.useState)(""),[P,A]=(0,s.useState)(null),[R,D]=(0,s.useState)(!1),[O,L]=(0,s.useState)(""),[M,U]=(0,s.useState)(1),F=null===(t=Qm.currentUser)||void 0===t?void 0:t.uid,V=["1 game to 21","2 games to 15","3 games to 11","Best of 3 to 11","Best of 3 to 15","Best of 5 to 11","Best of 5 to 15","Best of 7 to 11"];(0,s.useEffect)(()=>{d&&(B(),z())},[d]),(0,s.useEffect)(()=>{if("ranked"===v){b.startsWith("Best of")||w("Best of 3 to 11")}},[v,b]);const z=()=>{g("1v1"),y("ranked"),w("Best of 3 to 11"),N(null),j(null),S(null),I(""),A(null),L(""),U(1)},B=async()=>{try{const e=(await Zm()).filter(e=>e.id!==F&&!e.disabled&&"player"===e.role);C(e)}catch(O){console.error("Error loading users:",O)}},W=T.filter(e=>{const t="".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(_.toLowerCase()),n=![null===x||void 0===x?void 0:x.id,null===k||void 0===k?void 0:k.id,null===E||void 0===E?void 0:E.id].filter(Boolean).includes(e.id);return t&&n}),q=e=>{switch(e){case"opponent":N(null);break;case"partner":j(null);break;case"opponent2":S(null)}};return d?(0,UN.jsxs)(Df,{children:[(0,UN.jsx)(CN.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,children:(0,UN.jsxs)(CN.div,{className:"modal-content create-match-modal",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:e=>e.stopPropagation(),children:[(0,UN.jsxs)("div",{className:"modal-header",children:[(0,UN.jsxs)("div",{className:"modal-title",children:[(0,UN.jsx)(AN,{className:"w-6 h-6"}),(0,UN.jsx)("h2",{children:"Create Match"})]}),(0,UN.jsx)("button",{className:"close-btn",onClick:h,children:(0,UN.jsx)(mk,{className:"w-6 h-6"})})]}),(0,UN.jsxs)("div",{className:"progress-steps",children:[(0,UN.jsxs)("div",{className:"progress-step ".concat(M>=1?"active":""),children:[(0,UN.jsx)("span",{className:"step-number",children:"1"}),(0,UN.jsx)("span",{className:"step-label",children:"Settings"})]}),(0,UN.jsx)("div",{className:"step-connector"}),(0,UN.jsxs)("div",{className:"progress-step ".concat(M>=2?"active":""),children:[(0,UN.jsx)("span",{className:"step-number",children:"2"}),(0,UN.jsx)("span",{className:"step-label",children:"Players"})]})]}),O&&(0,UN.jsxs)("div",{className:"error-message",children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:O})]}),1===M&&(0,UN.jsxs)("div",{className:"modal-body",children:[(0,UN.jsxs)("div",{className:"form-section",children:[(0,UN.jsx)("label",{className:"section-label",children:"Match Type"}),(0,UN.jsxs)("div",{className:"option-cards",children:[(0,UN.jsxs)("div",{className:"option-card ".concat("1v1"===f?"selected":""),onClick:()=>g("1v1"),children:[(0,UN.jsx)(ON,{className:"w-8 h-8"}),(0,UN.jsx)("span",{className:"option-title",children:"1 vs 1"}),(0,UN.jsx)("span",{className:"option-desc",children:"Singles match"}),"1v1"===f&&(0,UN.jsx)(kk,{className:"check-icon"})]}),(0,UN.jsxs)("div",{className:"option-card ".concat("2v2"===f?"selected":""),onClick:()=>g("2v2"),children:[(0,UN.jsx)(ON,{className:"w-8 h-8"}),(0,UN.jsx)("span",{className:"option-title",children:"2 vs 2"}),(0,UN.jsx)("span",{className:"option-desc",children:"Doubles match"}),"2v2"===f&&(0,UN.jsx)(kk,{className:"check-icon"})]})]})]}),(0,UN.jsxs)("div",{className:"form-section",children:[(0,UN.jsx)("label",{className:"section-label",children:"Match Mode"}),(0,UN.jsxs)("div",{className:"option-cards",children:[(0,UN.jsxs)("div",{className:"option-card ".concat("ranked"===v?"selected":""),onClick:()=>y("ranked"),children:[(0,UN.jsx)(_k,{className:"w-8 h-8"}),(0,UN.jsx)("span",{className:"option-title",children:"Ranked"}),(0,UN.jsx)("span",{className:"option-desc",children:"Affects ELO rating"}),"ranked"===v&&(0,UN.jsx)(kk,{className:"check-icon"})]}),(0,UN.jsxs)("div",{className:"option-card ".concat("casual"===v?"selected":""),onClick:()=>y("casual"),children:[(0,UN.jsx)(Bk,{className:"w-8 h-8"}),(0,UN.jsx)("span",{className:"option-title",children:"Casual"}),(0,UN.jsx)("span",{className:"option-desc",children:"Just for fun"}),"casual"===v&&(0,UN.jsx)(kk,{className:"check-icon"})]})]})]}),(0,UN.jsxs)("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[(0,UN.jsx)("label",{className:"form-label",children:"Format"}),(0,UN.jsx)("select",{value:b,onChange:e=>w(e.target.value),className:"form-select",children:("ranked"===v?V.filter(e=>e.startsWith("Best of")).map(e=>({value:e,label:e})):V.map(e=>({value:e,label:e}))).map(e=>(0,UN.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,UN.jsx)("p",{className:"form-hint",children:"ranked"===v&&'Ranked matches must be a "Best of" format.'})]}),(0,UN.jsxs)("div",{className:"match-summary",children:[(0,UN.jsx)(rk,{className:"w-5 h-5"}),(0,UN.jsxs)("span",{children:[f," ",v," match \u2022 ",b]})]}),(0,UN.jsxs)("div",{className:"modal-footer",children:[(0,UN.jsx)("button",{className:"btn btn-outline",onClick:h,children:"Cancel"}),(0,UN.jsx)("button",{className:"btn btn-primary",onClick:()=>U(2),children:"Next: Select Players"})]})]}),2===M&&(0,UN.jsxs)("div",{className:"modal-body",children:[(0,UN.jsxs)("div",{className:"team-section",children:[(0,UN.jsxs)("h3",{className:"team-title",children:[(0,UN.jsx)("span",{className:"team-badge team-1",children:"Team 1"}),"Your Team"]}),(0,UN.jsx)("div",{className:"player-slot filled",children:(0,UN.jsxs)("div",{className:"player-info",children:[null!==m&&void 0!==m&&m.photoURL?(0,UN.jsx)("img",{src:m.photoURL,alt:"",className:"player-avatar"}):(0,UN.jsxs)("div",{className:"player-avatar-placeholder",children:[null===m||void 0===m||null===(n=m.firstName)||void 0===n?void 0:n[0],null===m||void 0===m||null===(r=m.lastName)||void 0===r?void 0:r[0]]}),(0,UN.jsxs)("div",{className:"player-details",children:[(0,UN.jsxs)("span",{className:"player-name",children:[null===m||void 0===m?void 0:m.firstName," ",null===m||void 0===m?void 0:m.lastName,(0,UN.jsx)("span",{className:"you-tag",children:"You"})]}),(0,UN.jsxs)("span",{className:"player-elo",children:["ELO: ",(null===m||void 0===m?void 0:m.elo)||1200]})]})]})}),"2v2"===f&&(k?(0,UN.jsxs)("div",{className:"player-slot filled",children:[(0,UN.jsxs)("div",{className:"player-info",children:[k.photoURL?(0,UN.jsx)("img",{src:k.photoURL,alt:"",className:"player-avatar"}):(0,UN.jsxs)("div",{className:"player-avatar-placeholder",children:[null===(a=k.firstName)||void 0===a?void 0:a[0],null===(i=k.lastName)||void 0===i?void 0:i[0]]}),(0,UN.jsxs)("div",{className:"player-details",children:[(0,UN.jsxs)("span",{className:"player-name",children:[k.firstName," ",k.lastName]}),(0,UN.jsxs)("span",{className:"player-elo",children:["ELO: ",k.elo||1200]})]})]}),(0,UN.jsx)("button",{className:"remove-player-btn",onClick:()=>q("partner"),children:(0,UN.jsx)(mk,{className:"w-4 h-4"})})]}):(0,UN.jsxs)("div",{className:"player-slot empty ".concat("partner"===P?"selecting":""),onClick:()=>A("partner"),children:[(0,UN.jsx)(tk,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:"Select your partner"})]}))]}),(0,UN.jsx)("div",{className:"vs-divider",children:(0,UN.jsx)("span",{children:"VS"})}),(0,UN.jsxs)("div",{className:"team-section",children:[(0,UN.jsxs)("h3",{className:"team-title",children:[(0,UN.jsx)("span",{className:"team-badge team-2",children:"Team 2"}),"Opponent","2v2"===f?"s":""]}),x?(0,UN.jsxs)("div",{className:"player-slot filled",children:[(0,UN.jsxs)("div",{className:"player-info",children:[x.photoURL?(0,UN.jsx)("img",{src:x.photoURL,alt:"",className:"player-avatar"}):(0,UN.jsxs)("div",{className:"player-avatar-placeholder opponent",children:[null===(o=x.firstName)||void 0===o?void 0:o[0],null===(l=x.lastName)||void 0===l?void 0:l[0]]}),(0,UN.jsxs)("div",{className:"player-details",children:[(0,UN.jsxs)("span",{className:"player-name",children:[x.firstName," ",x.lastName]}),(0,UN.jsxs)("span",{className:"player-elo",children:["ELO: ",x.elo||1200]})]})]}),(0,UN.jsx)("button",{className:"remove-player-btn",onClick:()=>q("opponent"),children:(0,UN.jsx)(mk,{className:"w-4 h-4"})})]}):(0,UN.jsxs)("div",{className:"player-slot empty ".concat("opponent"===P?"selecting":""),onClick:()=>A("opponent"),children:[(0,UN.jsx)(tk,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:"Select opponent"})]}),"2v2"===f&&(E?(0,UN.jsxs)("div",{className:"player-slot filled",children:[(0,UN.jsxs)("div",{className:"player-info",children:[E.photoURL?(0,UN.jsx)("img",{src:E.photoURL,alt:"",className:"player-avatar"}):(0,UN.jsxs)("div",{className:"player-avatar-placeholder opponent",children:[null===(c=E.firstName)||void 0===c?void 0:c[0],null===(u=E.lastName)||void 0===u?void 0:u[0]]}),(0,UN.jsxs)("div",{className:"player-details",children:[(0,UN.jsxs)("span",{className:"player-name",children:[E.firstName," ",E.lastName]}),(0,UN.jsxs)("span",{className:"player-elo",children:["ELO: ",E.elo||1200]})]})]}),(0,UN.jsx)("button",{className:"remove-player-btn",onClick:()=>q("opponent2"),children:(0,UN.jsx)(mk,{className:"w-4 h-4"})})]}):(0,UN.jsxs)("div",{className:"player-slot empty ".concat("opponent2"===P?"selecting":""),onClick:()=>A("opponent2"),children:[(0,UN.jsx)(tk,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:"Select second opponent"})]}))]}),P&&(0,UN.jsxs)("div",{className:"player-selector",children:[(0,UN.jsxs)("div",{className:"selector-header",children:[(0,UN.jsx)(Sk,{className:"w-4 h-4"}),(0,UN.jsx)("input",{type:"text",placeholder:"Search players...",value:_,onChange:e=>I(e.target.value),autoFocus:!0}),(0,UN.jsx)("button",{onClick:()=>A(null),children:(0,UN.jsx)(mk,{className:"w-4 h-4"})})]}),(0,UN.jsx)("div",{className:"selector-list",children:0===W.length?(0,UN.jsx)("div",{className:"no-results",children:"No players found"}):W.map(e=>{var t,n;return(0,UN.jsxs)("div",{className:"selector-item",onClick:()=>(e=>{switch(P){case"opponent":N(e);break;case"partner":j(e);break;case"opponent2":S(e)}A(null),I("")})(e),children:[e.photoURL?(0,UN.jsx)("img",{src:e.photoURL,alt:"",className:"selector-avatar"}):(0,UN.jsxs)("div",{className:"selector-avatar-placeholder",children:[null===(t=e.firstName)||void 0===t?void 0:t[0],null===(n=e.lastName)||void 0===n?void 0:n[0]]}),(0,UN.jsxs)("div",{className:"selector-details",children:[(0,UN.jsxs)("span",{className:"selector-name",children:[e.firstName," ",e.lastName]}),(0,UN.jsxs)("span",{className:"selector-elo",children:["ELO: ",e.elo||1200]})]})]},e.id)})})]}),"ranked"===v&&x&&(0,UN.jsxs)("div",{className:"elo-preview",children:[(0,UN.jsx)(_k,{className:"w-5 h-5"}),(0,UN.jsxs)("div",{className:"elo-preview-content",children:[(0,UN.jsx)("span",{className:"elo-preview-title",children:"Estimated ELO Change"}),(0,UN.jsxs)("span",{className:"elo-preview-values",children:["Win: ",(0,UN.jsxs)("span",{className:"elo-gain",children:["+",H(!0)]})," | Loss: ",(0,UN.jsx)("span",{className:"elo-loss",children:H(!1)})]})]})]}),(0,UN.jsxs)("div",{className:"modal-footer",children:[(0,UN.jsx)("button",{className:"btn btn-outline",onClick:()=>U(1),children:"Back"}),(0,UN.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if((()=>{if(!x)return L("Please select an opponent"),!1;if("2v2"===f){if(!k)return L("Please select your partner"),!1;if(!E)return L("Please select a second opponent"),!1}return!("ranked"===v&&!b.startsWith("Best of"))||(L('Ranked matches must be a "Best of" format.'),!1)})()){D(!0),L("");try{const e=parseInt(b.split(" to ")[1])||0,t={matchType:f,matchMode:v,format:b,pointsPerGame:e,team1:"1v1"===f?[{id:F,name:"".concat(m.firstName," ").concat(m.lastName),elo:m.elo}]:[{id:F,name:"".concat(m.firstName," ").concat(m.lastName),elo:m.elo},{id:k.id,name:"".concat(k.firstName," ").concat(k.lastName),elo:k.elo}],team2:"1v1"===f?[{id:x.id,name:"".concat(x.firstName," ").concat(x.lastName),elo:x.elo}]:[{id:x.id,name:"".concat(x.firstName," ").concat(x.lastName),elo:x.elo},{id:E.id,name:"".concat(E.firstName," ").concat(E.lastName),elo:E.elo}],createdBy:F},n=await(async e=>{try{const t=Qm.currentUser;if(!t)throw new Error("User not authenticated");const n=Dp(Rp(Ym,"individualMatches")),r=n.id,s=e.team1.reduce((e,t)=>e+(t.elo||1200),0)/e.team1.length,a=e.team2.reduce((e,t)=>e+(t.elo||1200),0)/e.team2.length,i=[...e.team1.map(e=>e.id),...e.team2.map(e=>e.id)],o={id:r,matchType:e.matchType,matchMode:e.matchMode,format:e.format,pointsPerGame:e.pointsPerGame,team1:e.team1,team2:e.team2,team1AvgElo:s,team2AvgElo:a,players:i,createdBy:e.createdBy||t.uid,status:"pending",scores:[],winner:null,eloChanges:null,createdAt:qm(),updatedAt:qm()};return await Vm(n,o),console.log("Individual match created successfully:",r),{success:!0,matchId:r}}catch(O){return console.error("Error creating individual match:",O),{success:!1,error:O.message}}})(t);n.success?(p&&p(n.matchId),h()):L(n.error)}catch(O){L(O.message)}D(!1)}},disabled:R,children:R?(0,UN.jsx)("span",{className:"loading-spinner"}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)(AN,{className:"w-5 h-5"}),"Create Match"]})})]})]})]})}),(0,UN.jsx)("style",{children:"\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.5);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: var(--spacing-xl);\n        }\n\n        .create-match-modal {\n          background: var(--white);\n          border-radius: var(--radius-lg);\n          width: 100%;\n          max-width: 550px;\n          max-height: 90vh;\n          overflow-y: auto;\n        }\n\n        .modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: var(--spacing-lg);\n          border-bottom: 1px solid var(--light-gray);\n          position: sticky;\n          top: 0;\n          background: var(--white);\n          z-index: 10;\n        }\n\n        .modal-title {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          color: var(--primary);\n        }\n\n        .modal-title h2 {\n          margin: 0;\n          font-size: 1.25rem;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: var(--gray);\n          padding: var(--spacing-xs);\n          border-radius: var(--radius-md);\n          transition: all var(--transition-base);\n        }\n\n        .close-btn:hover {\n          background: var(--light-gray);\n          color: var(--secondary);\n        }\n\n        .progress-steps {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: var(--spacing-lg);\n          gap: var(--spacing-md);\n        }\n\n        .progress-step {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-xs);\n          color: var(--gray);\n        }\n\n        .progress-step.active {\n          color: var(--primary);\n        }\n\n        .step-number {\n          width: 28px;\n          height: 28px;\n          border-radius: var(--radius-full);\n          background: var(--light-gray);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 0.875rem;\n        }\n\n        .progress-step.active .step-number {\n          background: var(--gradient-primary);\n          color: var(--white);\n        }\n\n        .step-label {\n          font-size: 0.875rem;\n          font-weight: 500;\n        }\n\n        .step-connector {\n          width: 40px;\n          height: 2px;\n          background: var(--light-gray);\n        }\n\n        .error-message {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          padding: var(--spacing-md);\n          background: rgba(244, 67, 54, 0.1);\n          border: 1px solid var(--danger);\n          border-radius: var(--radius-md);\n          color: var(--danger);\n          margin: 0 var(--spacing-lg);\n        }\n\n        .modal-body {\n          padding: var(--spacing-lg);\n        }\n\n        .form-section {\n          margin-bottom: var(--spacing-xl);\n        }\n\n        .section-label {\n          display: block;\n          font-weight: 600;\n          color: var(--secondary);\n          margin-bottom: var(--spacing-md);\n        }\n\n        .option-cards {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: var(--spacing-md);\n        }\n\n        .option-card {\n          position: relative;\n          padding: var(--spacing-lg);\n          border: 2px solid var(--light-gray);\n          border-radius: var(--radius-md);\n          cursor: pointer;\n          text-align: center;\n          transition: all var(--transition-base);\n        }\n\n        .option-card:hover {\n          border-color: var(--primary);\n          background: rgba(255, 107, 53, 0.05);\n        }\n\n        .option-card.selected {\n          border-color: var(--primary);\n          background: rgba(255, 107, 53, 0.1);\n        }\n\n        .option-card svg:first-child {\n          color: var(--primary);\n          margin-bottom: var(--spacing-sm);\n        }\n\n        .option-title {\n          display: block;\n          font-weight: 600;\n          color: var(--secondary);\n          margin-bottom: var(--spacing-xs);\n        }\n\n        .option-desc {\n          display: block;\n          font-size: 0.75rem;\n          color: var(--gray);\n        }\n\n        .check-icon {\n          position: absolute;\n          top: var(--spacing-sm);\n          right: var(--spacing-sm);\n          width: 20px;\n          height: 20px;\n          color: var(--success);\n        }\n\n        .form-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: var(--spacing-md);\n          margin-bottom: var(--spacing-lg);\n        }\n\n        .form-group {\n          display: flex;\n          flex-direction: column;\n          gap: var(--spacing-xs);\n        }\n\n        .form-label {\n          font-weight: 600;\n          font-size: 0.875rem;\n          color: var(--secondary);\n        }\n\n        .form-select {\n          padding: var(--spacing-sm) var(--spacing-md);\n          border: 1px solid var(--light-gray);\n          border-radius: var(--radius-md);\n          font-size: 1rem;\n          cursor: pointer;\n        }\n\n        .form-hint {\n          font-size: 0.75rem;\n          color: var(--gray);\n        }\n\n        .match-summary {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          padding: var(--spacing-md);\n          background: rgba(255, 107, 53, 0.1);\n          border-radius: var(--radius-md);\n          color: var(--primary);\n          font-weight: 500;\n          margin-bottom: var(--spacing-lg);\n        }\n\n        .modal-footer {\n          display: flex;\n          justify-content: flex-end;\n          gap: var(--spacing-md);\n          padding-top: var(--spacing-lg);\n          border-top: 1px solid var(--light-gray);\n          margin-top: var(--spacing-lg);\n        }\n\n        /* Step 2 Styles */\n        .team-section {\n          margin-bottom: var(--spacing-lg);\n        }\n\n        .team-title {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          margin-bottom: var(--spacing-md);\n          font-size: 1rem;\n        }\n\n        .team-badge {\n          padding: var(--spacing-xs) var(--spacing-sm);\n          border-radius: var(--radius-sm);\n          font-size: 0.625rem;\n          font-weight: 700;\n          text-transform: uppercase;\n        }\n\n        .team-badge.team-1 {\n          background: rgba(76, 175, 80, 0.1);\n          color: var(--success);\n        }\n\n        .team-badge.team-2 {\n          background: rgba(244, 67, 54, 0.1);\n          color: var(--danger);\n        }\n\n        .player-slot {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: var(--spacing-md);\n          border: 2px dashed var(--light-gray);\n          border-radius: var(--radius-md);\n          margin-bottom: var(--spacing-sm);\n          transition: all var(--transition-base);\n        }\n\n        .player-slot.filled {\n          border-style: solid;\n          border-color: var(--light-gray);\n          background: var(--off-white);\n        }\n\n        .player-slot.empty {\n          cursor: pointer;\n          justify-content: center;\n          gap: var(--spacing-sm);\n          color: var(--gray);\n        }\n\n        .player-slot.empty:hover,\n        .player-slot.selecting {\n          border-color: var(--primary);\n          background: rgba(255, 107, 53, 0.05);\n          color: var(--primary);\n        }\n\n        .player-info {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-md);\n        }\n\n        .player-avatar {\n          width: 40px;\n          height: 40px;\n          border-radius: var(--radius-full);\n          object-fit: cover;\n        }\n\n        .player-avatar-placeholder {\n          width: 40px;\n          height: 40px;\n          border-radius: var(--radius-full);\n          background: var(--gradient-primary);\n          color: var(--white);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 0.875rem;\n        }\n\n        .player-avatar-placeholder.opponent {\n          background: linear-gradient(135deg, var(--danger), #d32f2f);\n        }\n\n        .player-details {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .player-name {\n          font-weight: 600;\n          color: var(--secondary);\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-xs);\n        }\n\n        .you-tag {\n          font-size: 0.625rem;\n          padding: 2px 6px;\n          background: var(--success);\n          color: var(--white);\n          border-radius: var(--radius-sm);\n          font-weight: 600;\n        }\n\n        .player-elo {\n          font-size: 0.875rem;\n          color: var(--gray);\n        }\n\n        .remove-player-btn {\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: var(--gray);\n          padding: var(--spacing-xs);\n          border-radius: var(--radius-md);\n        }\n\n        .remove-player-btn:hover {\n          background: rgba(244, 67, 54, 0.1);\n          color: var(--danger);\n        }\n\n        .vs-divider {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin: var(--spacing-lg) 0;\n        }\n\n        .vs-divider span {\n          padding: var(--spacing-sm) var(--spacing-lg);\n          background: var(--secondary);\n          color: var(--white);\n          font-weight: 700;\n          border-radius: var(--radius-full);\n        }\n\n        .player-selector {\n          position: absolute;\n          left: var(--spacing-lg);\n          right: var(--spacing-lg);\n          background: var(--white);\n          border: 1px solid var(--light-gray);\n          border-radius: var(--radius-md);\n          box-shadow: var(--shadow-lg);\n          z-index: 20;\n          margin-top: var(--spacing-sm);\n        }\n\n        .selector-header {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          padding: var(--spacing-md);\n          border-bottom: 1px solid var(--light-gray);\n        }\n\n        .selector-header input {\n          flex: 1;\n          border: none;\n          outline: none;\n          font-size: 0.875rem;\n        }\n\n        .selector-header button {\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: var(--gray);\n        }\n\n        .selector-list {\n          max-height: 200px;\n          overflow-y: auto;\n        }\n\n        .selector-item {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-md);\n          padding: var(--spacing-md);\n          cursor: pointer;\n          transition: background var(--transition-base);\n        }\n\n        .selector-item:hover {\n          background: var(--light-gray);\n        }\n\n        .selector-avatar {\n          width: 32px;\n          height: 32px;\n          border-radius: var(--radius-full);\n          object-fit: cover;\n        }\n\n        .selector-avatar-placeholder {\n          width: 32px;\n          height: 32px;\n          border-radius: var(--radius-full);\n          background: var(--gradient-primary);\n          color: var(--white);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 0.75rem;\n          font-weight: 600;\n        }\n\n        .selector-details {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .selector-name {\n          font-weight: 500;\n          font-size: 0.875rem;\n        }\n\n        .selector-elo {\n          font-size: 0.75rem;\n          color: var(--gray);\n        }\n\n        .no-results {\n          padding: var(--spacing-lg);\n          text-align: center;\n          color: var(--gray);\n        }\n\n        .elo-preview {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-md);\n          padding: var(--spacing-md);\n          background: rgba(33, 150, 243, 0.1);\n          border-radius: var(--radius-md);\n          margin-top: var(--spacing-lg);\n        }\n\n        .elo-preview svg {\n          color: #2196F3;\n        }\n\n        .elo-preview-content {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .elo-preview-title {\n          font-size: 0.75rem;\n          color: var(--gray);\n        }\n\n        .elo-preview-values {\n          font-weight: 500;\n          color: var(--secondary);\n        }\n\n        .elo-gain {\n          color: var(--success);\n        }\n\n        .elo-loss {\n          color: var(--danger);\n        }\n\n        .loading-spinner {\n          display: inline-block;\n          width: 20px;\n          height: 20px;\n          border: 3px solid rgba(255, 255, 255, 0.3);\n          border-top-color: var(--white);\n          border-radius: 50%;\n          animation: spin 0.8s linear infinite;\n        }\n\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n\n        @media (max-width: 600px) {\n          .form-row {\n            grid-template-columns: 1fr;\n          }\n\n          .option-cards {\n            grid-template-columns: 1fr;\n          }\n        }\n      "})]}):null;function H(e){const t=(null===m||void 0===m?void 0:m.elo)||1200;let n,r;if("1v1"===f)n=t,r=(null===x||void 0===x?void 0:x.elo)||1200;else{if(!k||!x||!E)return 0;n=(t+(k.elo||1200))/2,r=((x.elo||1200)+(E.elo||1200))/2}const s=((null===m||void 0===m?void 0:m.matchesPlayed)||0)<30?40:32,a=1/(1+Math.pow(10,(r-n)/400)),i=e?1:0;return Math.round(s*(i-a))}},qk=e=>{var t;let{userProfile:n}=e;const r=ae(),[a,i]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)("all"),[d,h]=(0,s.useState)("all"),[p,m]=(0,s.useState)(!1),f=null===(t=Qm.currentUser)||void 0===t?void 0:t.uid;(0,s.useEffect)(()=>{g()},[]);const g=async()=>{l(!0);try{const e=await pf(f);i(e)}catch(e){console.error("Error loading matches:",e)}l(!1)},v=a.filter(e=>{const t="all"===c||e.status===c,n="all"===d||e.matchMode===d;return t&&n}),y=e=>{switch(e){case"completed":return(0,UN.jsx)(JN,{className:"w-4 h-4"});case"pending":case"in-progress":return(0,UN.jsx)(ik,{className:"w-4 h-4"});case"cancelled":return(0,UN.jsx)(yk,{className:"w-4 h-4"});default:return null}},b=e=>{switch(e){case"completed":return"status-completed";case"pending":return"status-pending";case"in-progress":return"status-active";case"cancelled":return"status-cancelled";default:return""}},w=e=>{if(!e)return"Unknown";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=(e,t)=>e.map(e=>e.name).join(" & "),N=e=>e.team1.some(e=>e.id===f),k=a.filter(e=>"completed"===e.status).length,j=a.filter(e=>"completed"===e.status&&"ranked"===e.matchMode).length,E=a.filter(e=>{if("completed"!==e.status)return!1;const t=N(e);return t&&"team1"===e.winner||!t&&"team2"===e.winner}).length;return(0,UN.jsxs)("div",{className:"page-container individual-matches",children:[(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)(CN.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,UN.jsxs)("div",{className:"page-header",children:[(0,UN.jsxs)("div",{children:[(0,UN.jsxs)("h1",{children:[(0,UN.jsx)(AN,{className:"w-8 h-8"}),"Individual Matches"]}),(0,UN.jsx)("p",{className:"page-subtitle",children:"Challenge other players to ranked or casual matches"})]}),(0,UN.jsxs)("button",{className:"btn btn-primary",onClick:()=>m(!0),children:[(0,UN.jsx)(lk,{className:"w-5 h-5"}),"Create Match"]})]}),(0,UN.jsxs)("div",{className:"stats-grid",children:[(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon",children:(0,UN.jsx)(AN,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-value",children:k}),(0,UN.jsx)("span",{className:"stat-label",children:"Total Matches"})]})]}),(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon ranked",children:(0,UN.jsx)(_k,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-value",children:j}),(0,UN.jsx)("span",{className:"stat-label",children:"Ranked Matches"})]})]}),(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon wins",children:(0,UN.jsx)(JN,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsx)("span",{className:"stat-value",children:E}),(0,UN.jsx)("span",{className:"stat-label",children:"Wins"})]})]}),(0,UN.jsxs)("div",{className:"stat-card",children:[(0,UN.jsx)("div",{className:"stat-icon winrate",children:(0,UN.jsx)(ON,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"stat-content",children:[(0,UN.jsxs)("span",{className:"stat-value",children:[k>0?Math.round(E/k*100):0,"%"]}),(0,UN.jsx)("span",{className:"stat-label",children:"Win Rate"})]})]})]}),(0,UN.jsxs)("div",{className:"filters-section card",children:[(0,UN.jsx)("div",{className:"filter-tabs",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"in-progress",label:"In Progress"},{key:"completed",label:"Completed"},{key:"cancelled",label:"Cancelled"}].map(e=>{let{key:t,label:n}=e;return(0,UN.jsx)("button",{onClick:()=>u(t),className:"filter-tab ".concat(c===t?"active":""),children:n},t)})}),(0,UN.jsxs)("div",{className:"mode-filter",children:[(0,UN.jsx)(zk,{className:"w-4 h-4"}),(0,UN.jsxs)("select",{value:d,onChange:e=>h(e.target.value),children:[(0,UN.jsx)("option",{value:"all",children:"All Modes"}),(0,UN.jsx)("option",{value:"ranked",children:"Ranked Only"}),(0,UN.jsx)("option",{value:"casual",children:"Casual Only"})]})]})]}),o?(0,UN.jsxs)("div",{className:"loading-state",children:[(0,UN.jsx)("div",{className:"spinner"}),(0,UN.jsx)("p",{children:"Loading matches..."})]}):0===v.length?(0,UN.jsxs)("div",{className:"empty-state card",children:[(0,UN.jsx)(AN,{className:"w-16 h-16 opacity-20"}),(0,UN.jsx)("h3",{children:"No matches found"}),(0,UN.jsx)("p",{children:"Create a match to challenge another player!"}),(0,UN.jsxs)("button",{className:"btn btn-primary",onClick:()=>m(!0),children:[(0,UN.jsx)(lk,{className:"w-5 h-5"}),"Create Your First Match"]})]}):(0,UN.jsx)("div",{className:"matches-list",children:v.map(e=>{const t=(e=>{if("completed"!==e.status)return null;const t=N(e);return t&&"team1"===e.winner||!t&&"team2"===e.winner?"won":"lost"})(e),n=(e=>e.eloChanges&&"ranked"===e.matchMode?e.eloChanges[f]||0:null)(e),s=N(e);return(0,UN.jsxs)(CN.div,{className:"match-card card ".concat(t?"result-".concat(t):""),whileHover:{y:-2},onClick:()=>r("/match/".concat(e.id)),children:[(0,UN.jsxs)("div",{className:"match-header",children:[(0,UN.jsxs)("div",{className:"match-mode",children:["ranked"===e.matchMode?(0,UN.jsxs)("span",{className:"mode-badge ranked",children:[(0,UN.jsx)(_k,{className:"w-3 h-3"}),"Ranked"]}):(0,UN.jsxs)("span",{className:"mode-badge casual",children:[(0,UN.jsx)(Bk,{className:"w-3 h-3"}),"Casual"]}),(0,UN.jsx)("span",{className:"match-type",children:e.matchType})]}),(0,UN.jsxs)("span",{className:"status-badge ".concat(b(e.status)),children:[y(e.status),e.status]})]}),(0,UN.jsxs)("div",{className:"match-teams",children:[(0,UN.jsxs)("div",{className:"team team-1 ".concat(s?"user-team":""," ").concat("team1"===e.winner?"winner":""),children:[(0,UN.jsx)("span",{className:"team-players",children:x(e.team1)}),s&&(0,UN.jsx)("span",{className:"you-indicator",children:"You"})]}),(0,UN.jsx)("div",{className:"vs-badge",children:"completed"===e.status?(0,UN.jsx)("span",{className:"score",children:(a=e.scores,a&&0!==a.length?a.map(e=>"".concat(e.team1,"-").concat(e.team2)).join(", "):"-")}):(0,UN.jsx)("span",{children:"VS"})}),(0,UN.jsxs)("div",{className:"team team-2 ".concat(s?"":"user-team"," ").concat("team2"===e.winner?"winner":""),children:[(0,UN.jsx)("span",{className:"team-players",children:x(e.team2)}),!s&&(0,UN.jsx)("span",{className:"you-indicator",children:"You"})]})]}),(0,UN.jsxs)("div",{className:"match-footer",children:[(0,UN.jsxs)("div",{className:"match-info",children:[(0,UN.jsx)("span",{className:"match-format",children:e.format}),(0,UN.jsxs)("span",{className:"match-date",children:[(0,UN.jsx)(DN,{className:"w-3 h-3"}),w(e.createdAt)]})]}),t&&(0,UN.jsxs)("div",{className:"match-result ".concat(t),children:[(0,UN.jsx)("span",{className:"result-text",children:"won"===t?"Victory":"Defeat"}),null!==n&&0!==n&&(0,UN.jsxs)("span",{className:"elo-change ".concat(n>0?"positive":"negative"),children:[n>0?"+":"",n," ELO"]})]}),(0,UN.jsx)(Tk,{className:"chevron-icon"})]})]},e.id);var a})})]})}),(0,UN.jsx)(Wk,{isOpen:p,onClose:()=>m(!1),onMatchCreated:()=>{g()},userProfile:n})]})},Hk=PN("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Gk=e=>{var t;let{userProfile:n}=e;const{id:r}=ie(),a=ae(),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)(!1),[h,p]=(0,s.useState)([]),[m,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(""),y=null===(t=Qm.currentUser)||void 0===t?void 0:t.uid,b=e=>{const t={type:"fixed",games:1,pointsToWin:21,gamesToWin:1};if(!e)return t;const n=e.toLowerCase();return n.startsWith("best of")?(t.type="bestOf",n.includes("best of 3")?(t.games=3,t.gamesToWin=2):n.includes("best of 5")?(t.games=5,t.gamesToWin=3):n.includes("best of 7")&&(t.games=7,t.gamesToWin=4),n.includes("to 15")?t.pointsToWin=15:(n.includes("to 11"),t.pointsToWin=11)):(t.type="fixed",n.includes("1 game")?(t.games=1,t.pointsToWin=21):n.includes("2 games")?(t.games=2,t.pointsToWin=15):n.includes("3 games")&&(t.games=3,t.pointsToWin=11)),t};(0,s.useEffect)(()=>{w()},[r]);const w=async()=>{c(!0);try{const e=await(async e=>{try{const t=Dp(Ym,"individualMatches",e),n=await Mm(t);return n.exists()?Nt({id:n.id},n.data()):null}catch(g){return console.error("Error getting individual match:",g),null}})(r);if(!e)return void a("/matches");if(o(e),e){const t=b(e.format),n=(t.type,t.games);e.scores&&e.scores.length>0?p(e.scores):p(Array(n).fill({team1:0,team2:0}))}}catch(g){console.error("Error loading match:",g)}c(!1)},x=()=>{var e;return null===i||void 0===i||null===(e=i.players)||void 0===e?void 0:e.includes(y)},N=()=>{var e;return null===i||void 0===i||null===(e=i.team1)||void 0===e?void 0:e.some(e=>e.id===y)},k=(e,t,n)=>{const r=[...h];r[e]=Nt(Nt({},r[e]),{},{[t]:parseInt(n)||0}),p(r)},j=e=>null!==i&&void 0!==i&&i.eloChanges?i.eloChanges[e]||0:null;if(l)return(0,UN.jsx)("div",{className:"page-container",children:(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)("div",{className:"loading-state",children:[(0,UN.jsx)("div",{className:"spinner"}),(0,UN.jsx)("p",{children:"Loading match..."})]})})});if(!i)return(0,UN.jsx)("div",{className:"page-container",children:(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)("div",{className:"error-state",children:[(0,UN.jsx)(VN,{className:"w-16 h-16"}),(0,UN.jsx)("h2",{children:"Match Not Found"}),(0,UN.jsx)("button",{className:"btn btn-primary",onClick:()=>a("/matches"),children:"Back to Matches"})]})})});const E=i.winner,S=N()?"team1":"team2",T=b(i.format),C=E===S;return(0,UN.jsx)("div",{className:"page-container match-details",children:(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)(CN.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,UN.jsxs)("button",{className:"back-btn",onClick:()=>a("/matches"),children:[(0,UN.jsx)(Hk,{className:"w-5 h-5"}),"Back to Matches"]}),(0,UN.jsxs)("div",{className:"match-header card",children:[(0,UN.jsxs)("div",{className:"header-top",children:[(0,UN.jsxs)("div",{className:"match-badges",children:["ranked"===i.matchMode?(0,UN.jsxs)("span",{className:"mode-badge ranked",children:[(0,UN.jsx)(_k,{className:"w-4 h-4"}),"Ranked Match"]}):(0,UN.jsxs)("span",{className:"mode-badge casual",children:[(0,UN.jsx)(Bk,{className:"w-4 h-4"}),"Casual Match"]}),(0,UN.jsx)("span",{className:"type-badge",children:i.matchType})]}),(0,UN.jsxs)("span",{className:"status-badge status-".concat(i.status),children:["completed"===i.status&&(0,UN.jsx)(JN,{className:"w-4 h-4"}),"pending"===i.status&&(0,UN.jsx)(ik,{className:"w-4 h-4"}),"cancelled"===i.status&&(0,UN.jsx)(yk,{className:"w-4 h-4"}),i.status]})]}),(0,UN.jsxs)("div",{className:"match-info-row",children:[(0,UN.jsxs)("div",{className:"info-item",children:[(0,UN.jsx)(rk,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:i.format})]}),(0,UN.jsxs)("div",{className:"info-item",children:[(0,UN.jsx)(DN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:(e=>{if(!e)return"Unknown";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})(i.createdAt)})]})]})]}),(0,UN.jsxs)("div",{className:"teams-section",children:[(0,UN.jsxs)(CN.div,{className:"team-card ".concat("team1"===E?"winner":""," ").concat(N()?"user-team":""),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:["team1"===E&&(0,UN.jsxs)("div",{className:"winner-banner",children:[(0,UN.jsx)(AN,{className:"w-5 h-5"}),"Winner"]}),(0,UN.jsx)("h3",{children:"Team 1"}),(0,UN.jsx)("div",{className:"team-players",children:i.team1.map(e=>(0,UN.jsxs)("div",{className:"player-row",children:[(0,UN.jsxs)("div",{className:"player-info",children:[(0,UN.jsxs)("span",{className:"player-name",children:[e.name,e.id===y&&(0,UN.jsx)("span",{className:"you-tag",children:"You"})]}),(0,UN.jsxs)("span",{className:"player-elo",children:["ELO: ",e.elo||1200]})]}),"completed"===i.status&&"ranked"===i.matchMode&&(0,UN.jsxs)("span",{className:"elo-change ".concat(j(e.id)>=0?"positive":"negative"),children:[j(e.id)>=0?"+":"",j(e.id)]})]},e.id))})]}),(0,UN.jsx)("div",{className:"vs-container",children:(0,UN.jsx)("div",{className:"vs-badge",children:"VS"})}),(0,UN.jsxs)(CN.div,{className:"team-card ".concat("team2"===E?"winner":""," ").concat(!N()&&x()?"user-team":""),initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:["team2"===E&&(0,UN.jsxs)("div",{className:"winner-banner",children:[(0,UN.jsx)(AN,{className:"w-5 h-5"}),"Winner"]}),(0,UN.jsx)("h3",{children:"Team 2"}),(0,UN.jsx)("div",{className:"team-players",children:i.team2.map(e=>(0,UN.jsxs)("div",{className:"player-row",children:[(0,UN.jsxs)("div",{className:"player-info",children:[(0,UN.jsxs)("span",{className:"player-name",children:[e.name,e.id===y&&(0,UN.jsx)("span",{className:"you-tag",children:"You"})]}),(0,UN.jsxs)("span",{className:"player-elo",children:["ELO: ",e.elo||1200]})]}),"completed"===i.status&&"ranked"===i.matchMode&&(0,UN.jsxs)("span",{className:"elo-change ".concat(j(e.id)>=0?"positive":"negative"),children:[j(e.id)>=0?"+":"",j(e.id)]})]},e.id))})]})]}),"completed"===i.status&&i.scores&&i.scores.length>0&&(0,UN.jsxs)(CN.div,{className:"scores-section card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,UN.jsxs)("h3",{children:[(0,UN.jsx)(AN,{className:"w-5 h-5"}),"Match Score"]}),(0,UN.jsx)("div",{className:"scores-grid",children:i.scores.map((e,t)=>(0,UN.jsxs)("div",{className:"game-score",children:[(0,UN.jsxs)("span",{className:"game-label",children:["Game ",t+1]}),(0,UN.jsxs)("div",{className:"game-result",children:[(0,UN.jsx)("span",{className:e.team1>e.team2?"winner-score":"",children:e.team1}),(0,UN.jsx)("span",{className:"score-separator",children:"-"}),(0,UN.jsx)("span",{className:e.team2>e.team1?"winner-score":"",children:e.team2})]})]},t))}),(0,UN.jsxs)("div",{className:"final-score",children:[(0,UN.jsx)("span",{children:"bestOf"===T.type?"Final Score (Games):":"Final Score (Total Points):"}),(0,UN.jsx)("strong",{children:"bestOf"===T.type?"".concat(i.scores.filter(e=>e.team1>e.team2).length," - ").concat(i.scores.filter(e=>e.team2>e.team1).length):"".concat(i.scores.reduce((e,t)=>e+t.team1,0)," - ").concat(i.scores.reduce((e,t)=>e+t.team2,0))})]})]}),u&&(0,UN.jsxs)(CN.div,{className:"score-entry-section card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,UN.jsxs)("h3",{children:[(0,UN.jsx)(Nk,{className:"w-5 h-5"}),"Enter Match Score"]}),g&&(0,UN.jsxs)("div",{className:"error-message",children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),g]}),(0,UN.jsxs)("div",{className:"score-entry-grid",children:[(0,UN.jsxs)("div",{className:"score-header",children:[(0,UN.jsx)("span",{}),(0,UN.jsx)("span",{children:"Team 1"}),(0,UN.jsx)("span",{children:"Team 2"})]}),h.map((e,t)=>(0,UN.jsxs)("div",{className:"score-row",children:[(0,UN.jsxs)("span",{className:"game-label",children:["Game ",t+1]}),(0,UN.jsx)("input",{type:"number",min:"0",max:"99",value:e.team1,onChange:e=>k(t,"team1",e.target.value),className:"score-input"}),(0,UN.jsx)("input",{type:"number",min:"0",max:"99",value:e.team2,onChange:e=>k(t,"team2",e.target.value),className:"score-input"})]},t))]}),(0,UN.jsxs)("p",{className:"score-hint",children:["bestOf"===T.type?"Enter scores for each game. First team to win ".concat(T.gamesToWin," games wins."):"Enter scores for all ".concat(T.games," games. Team with highest total score wins."),"ranked"===i.matchMode&&" This will affect ELO ratings."]}),(0,UN.jsxs)("div",{className:"score-entry-actions",children:[(0,UN.jsx)("button",{className:"btn btn-outline",onClick:()=>d(!1),children:"Cancel"}),(0,UN.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(v(""),!(()=>{const e=b(i.format),t=h.filter(e=>e.team1>0||e.team2>0);if("bestOf"===e.type){let n=0,r=0;if(t.forEach(e=>{e.team1>e.team2?n++:e.team2>e.team1&&r++}),n<e.gamesToWin&&r<e.gamesToWin)return v("Match must have a winner (first to ".concat(e.gamesToWin," games)")),!1}else{if(t.length<e.games)return v("All ".concat(e.games," games must be entered.")),!1;let n=0,r=0;if(t.forEach(e=>{n+=e.team1,r+=e.team2}),n===r)return v("Total score cannot be a draw for this format."),!1}return!0})())return;const e=(()=>{const e=b(i.format),t=h.filter(e=>e.team1>0||e.team2>0);if("bestOf"===e.type){let n=0,r=0;if(t.forEach(e=>{e.team1>e.team2?n++:e.team2>e.team1&&r++}),n>=e.gamesToWin)return"team1";if(r>=e.gamesToWin)return"team2"}else{if(t.length<e.games)return null;let n=0,r=0;if(t.forEach(e=>{n+=e.team1,r+=e.team2}),n>r)return"team1";if(r>n)return"team2"}return null})();if(e){f(!0);try{const t=h.filter(e=>e.team1>0||e.team2>0),n=await(async(e,t,n)=>{try{const s=Dp(Ym,"individualMatches",e),a=await Mm(s);if(!a.exists())return{success:!1,error:"Match not found"};const i=a.data();if("completed"===i.status)return{success:!1,error:"Match is already completed"};const o={};if("ranked"===i.matchMode){const e=i.team1,t=i.team2,s=e.reduce((e,t)=>e+(t.elo||1200),0)/e.length,a=t.reduce((e,t)=>e+(t.elo||1200),0)/t.length,l={};for(const n of[...e,...t])try{const e=await Jm(n.id);l[n.id]=(null===e||void 0===e?void 0:e.matchesPlayed)||0}catch(r){l[n.id]=0}const c="team1"===n?e:t,u="team1"===n?t:e,d="team1"===n?s:a,h="team1"===n?a:s;for(const n of c){const e=l[n.id]||0,t=af(n.elo||1200,h,!0,e);o[n.id]=t;const r=Dp(Ym,"users",n.id);await zm(r,{elo:Gm(t),matchesPlayed:Gm(1),matchesWon:Gm(1),lastEloChange:t,updatedAt:qm()})}for(const n of u){const e=l[n.id]||0,t=af(n.elo||1200,d,!1,e);o[n.id]=t;const r=Dp(Ym,"users",n.id);await zm(r,{elo:Gm(t),matchesPlayed:Gm(1),lastEloChange:t,updatedAt:qm()})}}else for(const e of[...i.team1,...i.team2]){o[e.id]=0;const t=Dp(Ym,"users",e.id),r="team1"===n&&i.team1.some(t=>t.id===e.id)||"team2"===n&&i.team2.some(t=>t.id===e.id);await zm(t,{matchesPlayed:Gm(1),matchesWon:Gm(r?1:0),updatedAt:qm()})}return await zm(s,{scores:t,winner:n,status:"completed",eloChanges:o,completedAt:qm(),updatedAt:qm()}),console.log("Individual match completed successfully"),{success:!0,eloChanges:o}}catch(g){return console.error("Error completing individual match:",g),{success:!1,error:g.message}}})(r,t,e);n.success?(await w(),d(!1)):v(n.error)}catch(g){v(g.message)}f(!1)}else v("Could not determine winner")},disabled:m,children:m?(0,UN.jsx)("span",{className:"loading-spinner"}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)(JN,{className:"w-5 h-5"}),"Submit Score"]})})]})]}),!!i&&"completed"!==i.status&&"cancelled"!==i.status&&(x()||"owner"===(null===n||void 0===n?void 0:n.role))&&!u&&(0,UN.jsxs)("div",{className:"match-actions",children:[(0,UN.jsxs)("button",{className:"btn btn-primary",onClick:()=>d(!0),children:[(0,UN.jsx)(Nk,{className:"w-5 h-5"}),"Enter Score"]}),(0,UN.jsxs)("button",{className:"btn btn-outline btn-danger",onClick:async()=>{if(window.confirm("Are you sure you want to cancel this match?")){f(!0);try{const e=await(async e=>{try{const t=Dp(Ym,"individualMatches",e);return await zm(t,{status:"cancelled",cancelledAt:qm(),updatedAt:qm()}),console.log("Match cancelled successfully"),{success:!0}}catch(g){return console.error("Error cancelling match:",g),{success:!1,error:g.message}}})(r);e.success&&await w()}catch(g){console.error("Error cancelling match:",g)}f(!1)}},disabled:m,children:[(0,UN.jsx)(yk,{className:"w-5 h-5"}),"Cancel Match"]})]}),"completed"===i.status&&x()&&(0,UN.jsxs)(CN.div,{className:"result-banner ".concat(C?"victory":"defeat"),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},children:[(0,UN.jsx)(AN,{className:"w-8 h-8"}),(0,UN.jsxs)("div",{className:"result-text",children:[(0,UN.jsx)("span",{className:"result-title",children:C?"Victory!":"Defeat"}),"ranked"===i.matchMode&&(0,UN.jsxs)("span",{className:"result-elo",children:["ELO: ",j(y)>=0?"+":"",j(y)]})]})]})]})})})},Kk=PN("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Qk=PN("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),Yk=PN("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Xk=PN("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),$k=e=>{let{user:t,userProfile:n}=e;const r=ae(),a=re(),[i,o]=s.useState(!1),l="owner"===(null===n||void 0===n?void 0:n.role),c=[{path:"/dashboard",label:"Dashboard",icon:(0,UN.jsx)(Kk,{className:"w-5 h-5"})},{path:"/tournaments",label:"Tournaments",icon:(0,UN.jsx)(AN,{className:"w-5 h-5"})},{path:"/matches",label:"Matches",icon:(0,UN.jsx)(Qk,{className:"w-5 h-5"})},{path:"/leaderboard",label:"Leaderboard",icon:(0,UN.jsx)(ck,{className:"w-5 h-5"})},{path:"/profile",label:"Profile",icon:(0,UN.jsx)($N,{className:"w-5 h-5"})}];return l&&c.splice(4,0,{path:"/members",label:"Members",icon:(0,UN.jsx)(ON,{className:"w-5 h-5"}),ownerOnly:!0}),(0,UN.jsxs)("nav",{className:"navigation",children:[(0,UN.jsx)("div",{className:"container",children:(0,UN.jsxs)("div",{className:"nav-content",children:[(0,UN.jsxs)(Re,{to:"/dashboard",className:"nav-brand",children:[(0,UN.jsx)(AN,{className:"w-6 h-6"}),(0,UN.jsx)("span",{children:"Squash Club"})]}),(0,UN.jsx)("div",{className:"nav-menu desktop-menu",children:c.map(e=>(0,UN.jsxs)(Re,{to:e.path,className:"nav-link ".concat(a.pathname===e.path?"active":""," ").concat(e.ownerOnly?"owner-link":""),children:[e.icon,(0,UN.jsx)("span",{children:e.label}),e.ownerOnly&&(0,UN.jsx)(ZN,{className:"w-3 h-3 owner-badge"})]},e.path))}),(0,UN.jsxs)("div",{className:"nav-actions",children:[(0,UN.jsxs)("div",{className:"user-info",children:[(0,UN.jsxs)("span",{className:"user-name",children:[null===n||void 0===n?void 0:n.firstName,l&&(0,UN.jsx)("span",{className:"role-tag",children:"Owner"})]}),(0,UN.jsxs)("span",{className:"user-elo",children:["ELO: ",(null===n||void 0===n?void 0:n.elo)||1200]})]}),(0,UN.jsxs)("button",{onClick:async()=>{(await YN()).success&&r("/")},className:"btn btn-ghost btn-small",children:[(0,UN.jsx)(Yk,{className:"w-4 h-4"}),(0,UN.jsx)("span",{className:"desktop-only",children:"Logout"})]}),(0,UN.jsx)("button",{className:"mobile-menu-toggle",onClick:()=>o(!i),children:i?(0,UN.jsx)(mk,{}):(0,UN.jsx)(Xk,{})})]})]})}),i&&(0,UN.jsx)(CN.div,{className:"mobile-menu",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:c.map(e=>(0,UN.jsxs)(Re,{to:e.path,className:"mobile-nav-link ".concat(a.pathname===e.path?"active":""," ").concat(e.ownerOnly?"owner-link":""),onClick:()=>o(!1),children:[e.icon,(0,UN.jsx)("span",{children:e.label}),e.ownerOnly&&(0,UN.jsx)(ZN,{className:"w-3 h-3 owner-badge"})]},e.path))}),(0,UN.jsx)("style",{children:"\n        .navigation {\n          background: var(--white);\n          box-shadow: var(--shadow-sm);\n          position: sticky;\n          top: 0;\n          z-index: 100;\n        }\n\n        .nav-content {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          height: 70px;\n        }\n\n        .nav-brand {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          text-decoration: none;\n          color: var(--secondary);\n          font-family: var(--font-display);\n          font-size: 1.5rem;\n          letter-spacing: 0.02em;\n        }\n\n        .nav-menu {\n          display: flex;\n          gap: var(--spacing-xs);\n        }\n\n        .nav-link {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-xs);\n          padding: var(--spacing-sm) var(--spacing-md);\n          color: var(--dark-gray);\n          text-decoration: none;\n          border-radius: var(--radius-md);\n          transition: all var(--transition-base);\n          font-size: 0.9rem;\n          position: relative;\n        }\n\n        .nav-link:hover {\n          background: var(--light-gray);\n          color: var(--primary);\n        }\n\n        .nav-link.active {\n          background: var(--gradient-primary);\n          color: var(--white);\n        }\n\n        .nav-link.owner-link {\n          border: 1px solid transparent;\n        }\n\n        .nav-link.owner-link:not(.active) {\n          border-color: rgba(255, 107, 53, 0.3);\n          background: rgba(255, 107, 53, 0.05);\n        }\n\n        .owner-badge {\n          margin-left: 2px;\n          opacity: 0.7;\n        }\n\n        .nav-link.active .owner-badge {\n          opacity: 1;\n        }\n\n        .nav-actions {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-md);\n        }\n\n        .user-info {\n          display: flex;\n          flex-direction: column;\n          align-items: flex-end;\n          margin-right: var(--spacing-md);\n        }\n\n        .user-name {\n          font-weight: 600;\n          color: var(--secondary);\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-xs);\n        }\n\n        .role-tag {\n          font-size: 0.625rem;\n          padding: 2px 6px;\n          background: var(--gradient-primary);\n          color: var(--white);\n          border-radius: var(--radius-sm);\n          font-weight: 600;\n          text-transform: uppercase;\n        }\n\n        .user-elo {\n          font-size: 0.75rem;\n          color: var(--primary);\n          font-weight: 600;\n        }\n\n        .mobile-menu-toggle {\n          display: none;\n          background: transparent;\n          border: none;\n          color: var(--secondary);\n          cursor: pointer;\n        }\n\n        .mobile-menu {\n          position: absolute;\n          top: 70px;\n          left: 0;\n          right: 0;\n          background: var(--white);\n          box-shadow: var(--shadow-md);\n          padding: var(--spacing-md);\n        }\n\n        .mobile-nav-link {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-md);\n          padding: var(--spacing-md);\n          color: var(--dark-gray);\n          text-decoration: none;\n          border-radius: var(--radius-md);\n          transition: all var(--transition-base);\n        }\n\n        .mobile-nav-link:hover {\n          background: var(--light-gray);\n        }\n\n        .mobile-nav-link.active {\n          background: var(--gradient-primary);\n          color: var(--white);\n        }\n\n        .mobile-nav-link.owner-link:not(.active) {\n          background: rgba(255, 107, 53, 0.05);\n          border-left: 3px solid var(--primary);\n        }\n\n        @media (max-width: 900px) {\n          .nav-link span {\n            display: none;\n          }\n          \n          .nav-link {\n            padding: var(--spacing-sm);\n          }\n\n          .owner-badge {\n            display: none;\n          }\n        }\n\n        @media (max-width: 768px) {\n          .desktop-menu {\n            display: none;\n          }\n\n          .desktop-only {\n            display: none;\n          }\n\n          .mobile-menu-toggle {\n            display: block;\n          }\n\n          .user-info {\n            display: none;\n          }\n        }\n      "})]})},Jk=()=>(0,UN.jsx)("div",{className:"loading-screen",children:(0,UN.jsxs)(CN.div,{className:"loading-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[(0,UN.jsx)("div",{className:"loading-spinner"}),(0,UN.jsx)("h3",{children:"Loading..."})]})}),Zk=e=>{var t,n;let{user:r,onProfileComplete:a}=e;const[i,o]=(0,s.useState)({firstName:(null===r||void 0===r||null===(t=r.displayName)||void 0===t?void 0:t.split(" ")[0])||"",lastName:(null===r||void 0===r||null===(n=r.displayName)||void 0===n?void 0:n.split(" ").slice(1).join(" "))||"",age:"",role:"player",registrationPassword:""}),[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(!1),h=e=>{o(Nt(Nt({},i),{},{[e.target.name]:e.target.value})),c("")};return(0,UN.jsxs)("div",{className:"auth-page",children:[(0,UN.jsx)(CN.div,{className:"auth-container auth-container-large",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,UN.jsxs)("div",{className:"auth-card card",children:[(0,UN.jsxs)("div",{className:"auth-header",children:[(0,UN.jsx)("h2",{children:"Complete Your Profile"}),(0,UN.jsx)("p",{children:"We need a few more details to set up your account"})]}),(0,UN.jsxs)("div",{className:"account-banner",children:[null!==r&&void 0!==r&&r.photoURL?(0,UN.jsx)("img",{src:r.photoURL,alt:"Profile",className:"account-avatar"}):(0,UN.jsx)("div",{className:"account-avatar-placeholder",children:(0,UN.jsx)($N,{className:"w-6 h-6"})}),(0,UN.jsxs)("div",{className:"account-details",children:[(0,UN.jsx)("span",{className:"account-name",children:(null===r||void 0===r?void 0:r.displayName)||"User"}),(0,UN.jsx)("span",{className:"account-email",children:null===r||void 0===r?void 0:r.email})]})]}),l&&(0,UN.jsxs)(CN.div,{className:"error-message",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[(0,UN.jsx)(VN,{className:"w-5 h-5"}),(0,UN.jsx)("span",{children:l})]}),(0,UN.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),HN(i.role,i.registrationPassword)){if(i.age){const e=parseInt(i.age);if(e<16||e>100)return void c("Age must be between 16 and 100")}d(!0),c("");try{var t;console.log("Creating profile for user:",r.uid);const e={firstName:i.firstName,lastName:i.lastName,email:r.email,role:i.role,age:i.age?parseInt(i.age):null,photoURL:r.photoURL||null,authProvider:(null===(t=r.providerData[0])||void 0===t?void 0:t.providerId)||"unknown"};console.log("Profile data:",e);const n=await $m(r.uid,e);console.log("Create profile result:",n),n.success?(console.log("\u2705 Profile created successfully"),a&&await a()):c(n.error||"Failed to create profile")}catch(n){console.error("Error creating profile:",n),c(n.message)}d(!1)}else c("Invalid registration password for ".concat("owner"===i.role?"Club Owner":"Player"," account"))},className:"auth-form",children:[(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"First Name"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)($N,{className:"input-icon"}),(0,UN.jsx)("input",{type:"text",name:"firstName",className:"form-input with-icon",placeholder:"John",value:i.firstName,onChange:h,required:!0})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Last Name"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)($N,{className:"input-icon"}),(0,UN.jsx)("input",{type:"text",name:"lastName",className:"form-input with-icon",placeholder:"Doe",value:i.lastName,onChange:h,required:!0})]})]})]}),(0,UN.jsxs)("div",{className:"form-row",children:[(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Age (Optional)"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(DN,{className:"input-icon"}),(0,UN.jsx)("input",{type:"number",name:"age",className:"form-input with-icon",placeholder:"25",min:"16",max:"100",value:i.age,onChange:h})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsx)("label",{className:"form-label",children:"Account Type"}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(ZN,{className:"input-icon"}),(0,UN.jsxs)("select",{name:"role",className:"form-input form-select with-icon",value:i.role,onChange:h,required:!0,children:[(0,UN.jsx)("option",{value:"player",children:"Player"}),(0,UN.jsx)("option",{value:"owner",children:"Club Owner"})]})]})]})]}),(0,UN.jsxs)("div",{className:"form-group",children:[(0,UN.jsxs)("label",{className:"form-label",children:["Registration Password",(0,UN.jsxs)("span",{className:"label-hint",children:["(","owner"===i.role?"Club Owner":"Player"," password)"]})]}),(0,UN.jsxs)("div",{className:"input-wrapper",children:[(0,UN.jsx)(ek,{className:"input-icon"}),(0,UN.jsx)("input",{type:"password",name:"registrationPassword",className:"form-input with-icon",placeholder:"Enter registration password",value:i.registrationPassword,onChange:h,required:!0})]}),(0,UN.jsx)("p",{className:"form-hint",children:"Contact your club administrator for the registration password"})]}),(0,UN.jsx)("button",{type:"submit",className:"btn btn-primary btn-full",disabled:u,children:u?(0,UN.jsx)("span",{className:"loading-spinner"}):(0,UN.jsxs)(UN.Fragment,{children:[(0,UN.jsx)(tk,{className:"w-5 h-5"}),"Complete Registration"]})})]}),(0,UN.jsx)("div",{className:"auth-footer",children:(0,UN.jsxs)("button",{type:"button",className:"btn btn-outline btn-full",onClick:async()=>{await YN(),window.location.reload()},children:[(0,UN.jsx)(Yk,{className:"w-5 h-5"}),"Sign Out & Try Different Account"]})})]})}),(0,UN.jsx)("style",{children:"\n        .auth-page {\n          min-height: 100vh;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: var(--spacing-xl);\n          background: linear-gradient(135deg, var(--light-gray) 0%, rgba(255, 107, 53, 0.1) 100%);\n        }\n\n        .auth-container {\n          width: 100%;\n          max-width: 450px;\n        }\n\n        .auth-container-large {\n          max-width: 550px;\n        }\n\n        .auth-card {\n          background: var(--white);\n          border-radius: var(--radius-lg);\n          padding: var(--spacing-2xl);\n          box-shadow: var(--shadow-lg);\n        }\n\n        .auth-header {\n          text-align: center;\n          margin-bottom: var(--spacing-xl);\n        }\n\n        .auth-header h2 {\n          margin-bottom: var(--spacing-sm);\n          color: var(--secondary);\n        }\n\n        .auth-header p {\n          color: var(--gray);\n        }\n\n        .account-banner {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-md);\n          padding: var(--spacing-md);\n          background: var(--light-gray);\n          border-radius: var(--radius-md);\n          margin-bottom: var(--spacing-lg);\n        }\n\n        .account-avatar {\n          width: 48px;\n          height: 48px;\n          border-radius: var(--radius-full);\n          object-fit: cover;\n        }\n\n        .account-avatar-placeholder {\n          width: 48px;\n          height: 48px;\n          border-radius: var(--radius-full);\n          background: var(--gray);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: var(--white);\n        }\n\n        .account-details {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n        }\n\n        .account-name {\n          font-weight: 600;\n          color: var(--secondary);\n        }\n\n        .account-email {\n          font-size: 0.875rem;\n          color: var(--gray);\n        }\n\n        .error-message {\n          display: flex;\n          align-items: center;\n          gap: var(--spacing-sm);\n          padding: var(--spacing-md);\n          background: rgba(244, 67, 54, 0.1);\n          border: 1px solid var(--danger);\n          border-radius: var(--radius-md);\n          color: var(--danger);\n          margin-bottom: var(--spacing-lg);\n        }\n\n        .auth-form {\n          margin-bottom: var(--spacing-lg);\n        }\n\n        .form-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: var(--spacing-md);\n        }\n\n        .form-group {\n          margin-bottom: var(--spacing-md);\n        }\n\n        .form-label {\n          display: block;\n          margin-bottom: var(--spacing-xs);\n          font-weight: 500;\n          color: var(--secondary);\n        }\n\n        .input-wrapper {\n          position: relative;\n        }\n\n        .input-icon {\n          position: absolute;\n          left: 1rem;\n          top: 50%;\n          transform: translateY(-50%);\n          width: 20px;\n          height: 20px;\n          color: var(--gray);\n        }\n\n        .form-input {\n          width: 100%;\n          padding: var(--spacing-md);\n          border: 2px solid var(--light-gray);\n          border-radius: var(--radius-md);\n          font-size: 1rem;\n          transition: border-color var(--transition-base);\n        }\n\n        .form-input:focus {\n          outline: none;\n          border-color: var(--primary);\n        }\n\n        .form-input.with-icon {\n          padding-left: 3rem;\n        }\n\n        .form-select {\n          appearance: none;\n          background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");\n          background-position: right 0.5rem center;\n          background-repeat: no-repeat;\n          background-size: 1.5em 1.5em;\n          padding-right: 2.5rem;\n        }\n\n        .label-hint {\n          font-weight: 400;\n          color: var(--gray);\n          font-size: 0.75rem;\n          margin-left: var(--spacing-xs);\n        }\n\n        .form-hint {\n          font-size: 0.75rem;\n          color: var(--gray);\n          margin-top: var(--spacing-xs);\n        }\n\n        .btn {\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          gap: var(--spacing-sm);\n          padding: var(--spacing-md) var(--spacing-lg);\n          border-radius: var(--radius-md);\n          font-weight: 600;\n          cursor: pointer;\n          transition: all var(--transition-base);\n          border: none;\n        }\n\n        .btn-primary {\n          background: var(--gradient-primary);\n          color: var(--white);\n        }\n\n        .btn-primary:hover {\n          transform: translateY(-2px);\n          box-shadow: var(--shadow-md);\n        }\n\n        .btn-outline {\n          background: transparent;\n          border: 2px solid var(--light-gray);\n          color: var(--gray);\n        }\n\n        .btn-outline:hover {\n          border-color: var(--gray);\n          background: var(--light-gray);\n        }\n\n        .btn-full {\n          width: 100%;\n        }\n\n        .btn:disabled {\n          opacity: 0.7;\n          cursor: not-allowed;\n        }\n\n        .auth-footer {\n          margin-top: var(--spacing-lg);\n        }\n\n        .loading-spinner {\n          display: inline-block;\n          width: 20px;\n          height: 20px;\n          border: 3px solid rgba(255, 255, 255, 0.3);\n          border-top-color: var(--white);\n          border-radius: 50%;\n          animation: spin 0.8s linear infinite;\n        }\n\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n\n        @media (max-width: 600px) {\n          .form-row {\n            grid-template-columns: 1fr;\n          }\n        }\n      "})]})};const ej=function(){const[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(null),[a,i]=(0,s.useState)(!0),[o,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=Vs(Qm,async e=>{if(console.log("=== onAuthStateChanged triggered ==="),console.log("Auth user:",e?e.uid:"null"),e){t(e),console.log("Fetching profile for:",e.uid);const s=await Jm(e.uid);if(console.log("Profile result:",s?"FOUND":"NOT FOUND"),s){if(s.disabled)return console.log("\u26d4 User account is disabled"),await Qm.signOut(),t(null),r(null),l(!1),alert("Your account has been disabled. Please contact the administrator."),void i(!1);console.log("\u2705 Profile exists - setting normal state"),r(s),l(!1)}else{var n;console.log("\u26a0\ufe0f No profile found - checking auth provider");const t=null===(n=e.providerData)||void 0===n?void 0:n.some(e=>"google.com"===e.providerId);if(console.log("Is Google user:",t),t)console.log("\ud83d\udd04 Google user needs profile completion"),r(null),l(!0);else{console.log("\ud83d\udce7 Email user - waiting for profile..."),await new Promise(e=>setTimeout(e,1500));const t=await Jm(e.uid);t?(console.log("\u2705 Profile found on retry"),r(t),l(!1)):(console.log("\u274c Still no profile after retry - showing completion"),r(null),l(!0))}}}else console.log("No user - clearing state"),t(null),r(null),l(!1);i(!1)});return()=>e()},[]);const c=async()=>{if(console.log("=== refreshUserProfile called ==="),e){const t=await Jm(e.uid);console.log("Refreshed profile:",t?"FOUND":"NOT FOUND"),t&&(r(t),l(!1))}};return a?(0,UN.jsx)(Jk,{}):e&&o?(0,UN.jsx)(Ie,{children:(0,UN.jsx)(Zk,{user:e,onProfileComplete:c})}):(0,UN.jsx)(Ie,{children:(0,UN.jsxs)("div",{className:"app",children:[(0,UN.jsx)(Df,{mode:"wait",children:e&&(0,UN.jsx)($k,{user:e,userProfile:n})}),(0,UN.jsxs)(je,{children:[(0,UN.jsx)(Ne,{path:"/",element:e?(0,UN.jsx)(xe,{to:"/dashboard"}):(0,UN.jsx)(FN,{})}),(0,UN.jsx)(Ne,{path:"/login",element:e?(0,UN.jsx)(xe,{to:"/dashboard"}):(0,UN.jsx)(XN,{})}),(0,UN.jsx)(Ne,{path:"/register",element:e?(0,UN.jsx)(xe,{to:"/dashboard"}):(0,UN.jsx)(nk,{})}),(0,UN.jsx)(Ne,{path:"/join/:tournamentId",element:(0,UN.jsx)(Dk,{})}),(0,UN.jsx)(Ne,{path:"/dashboard",element:e?"owner"===(null===n||void 0===n?void 0:n.role)?(0,UN.jsx)(vk,{}):(0,UN.jsx)(ok,{}):(0,UN.jsx)(xe,{to:"/login"})}),(0,UN.jsx)(Ne,{path:"/owner-dashboard",element:e&&"owner"===(null===n||void 0===n?void 0:n.role)?(0,UN.jsx)(vk,{}):(0,UN.jsx)(xe,{to:"/dashboard"})}),(0,UN.jsx)(Ne,{path:"/members",element:e&&"owner"===(null===n||void 0===n?void 0:n.role)?(0,UN.jsx)(Vk,{}):(0,UN.jsx)(xe,{to:"/dashboard"})}),(0,UN.jsx)(Ne,{path:"/tournaments",element:e?(0,UN.jsx)(Ck,{userProfile:n}):(0,UN.jsx)(xe,{to:"/login"})}),(0,UN.jsx)(Ne,{path:"/tournament/:id",element:e?(0,UN.jsx)(Ek,{userProfile:n}):(0,UN.jsx)(xe,{to:"/login"})}),(0,UN.jsx)(Ne,{path:"/matches",element:e?(0,UN.jsx)(qk,{userProfile:n}):(0,UN.jsx)(xe,{to:"/login"})}),(0,UN.jsx)(Ne,{path:"/match/:id",element:e?(0,UN.jsx)(Gk,{userProfile:n}):(0,UN.jsx)(xe,{to:"/login"})}),(0,UN.jsx)(Ne,{path:"/leaderboard",element:e?(0,UN.jsx)(Ik,{userProfile:n}):(0,UN.jsx)(xe,{to:"/login"})}),(0,UN.jsx)(Ne,{path:"/profile",element:e?(0,UN.jsx)(Rk,{user:e,userProfile:n}):(0,UN.jsx)(xe,{to:"/login"})})]})]})})};i.createRoot(document.getElementById("root")).render((0,UN.jsx)(s.StrictMode,{children:(0,UN.jsx)(ej,{})}))})();
//# sourceMappingURL=main.563ac49f.js.map